@using Logictracker.Web
@{
    Layout = null;
}

<script id="tDistribucion" type="text/x-kendo-template">
    <div>
        <span>#= data.Codigo #</span>
        <br />
        # if(data.Patente != null) {#
        <span style="font-size:xx-small">#= data.Patente #</span>
        # } else { #
        <span style="font-size:xx-small;color:red;"> sin vehículo</span>
        # } #
        <span style="font-size:xx-small"> Inicia : #= kendo.toString(new Date(data.Inicio),"G") #</span>
    </div>
</script>

<script id="tCliente" type="text/x-kendo-template">
    <div>
        <span>#= data.Codigo #</span>
        <br />
        <span style="font-size:xx-small;"> #= data.DescripcionCorta #</span>
        <span style="font-size:xx-small">#= data.DireccionNomenclada #</span>
    </div>
</script>

<script id="tPuntoEntrega" type="text/x-kendo-template">
    <div>
        <span>#= data.Codigo #</span>
        <br />
        <span style="font-size:xx-small;"> #= data.Descripcion #</span>
    </div>
</script>


<div ng-controller="RechazoItemController">
    <div class="InputContainer">

        <div class="InputGroup">
            <span class="InputGroup__label">@Html.ResourceLabel("Labels", "Motivo"):</span>
            <lt-rechazo-motivo class="InputGroup__control" />
        </div>

        <div class="InputGroup">
            <span class="InputGroup__label">@Html.ResourceLabel("Labels", "Supervisor Ventas"):</span>
            <div class="InputGroup__control">
                <input class="form-control" kendo-combo-box
                       k-data-source="supervisorVentasDS"
                       k-data-text-field="'Value'"
                       k-data-value-field="'Key'"
                       k-ng-model="supervisorVentasSelected" />
            </div>
        </div>

        <div class="InputGroup">
            <span class="InputGroup__label">@Html.ResourceLabel("Labels", "Estado"):</span>
            <lt-rechazo-estado class="InputGroup__control" />
        </div>

    </div>

    <div class="InputContainer">


        <div class="InputGroup">
            <span class="InputGroup__label">@Html.ResourceLabel("Labels", "Supervisor Ruta"):</span>
            <div class="InputGroup__control">
                <input class="form-control" kendo-combo-box
                       k-data-source="supervisorRutaDS"
                       k-data-text-field="'Value'"
                       k-data-value-field="'Key'"
                       k-ng-model="supervisorRutaSelected" />

            </div>
        </div>
        <div class="InputGroup">
            <span class="InputGroup__label">@Html.ResourceLabel("Labels", "Codigo distribucion"):</span>
            <div class="InputGroup__control">

                <input class="form-control"
                       kendo-auto-complete
                       k-ng-model="distribucionSelected"
                       k-data-source="distribucionDS"
                       k-readonly="distribucionRO"
                       k-data-text-field="'Codigo'"
                       k-filter="'contains'"
                       k-min-length="3"
                       k-template="tDistribucion" />
            </div>
        </div>
        <div class="InputGroup">
            <span class="InputGroup__label">@Html.ResourceLabel("Labels", "Territorio"):</span>
            <div class="InputGroup__control">
                <input class="form-control input-sm" type="text" />
            </div>
        </div>

    </div>

    <div class="InputContainer">

        <div class="InputGroup">
            <span class="InputGroup__label">@Html.ResourceLabel("Labels", "Código Cliente"):</span>
            <div class="InputGroup__control">
                <input class="form-control"
                       kendo-auto-complete
                       k-ng-model="clienteSelected"
                       k-data-source="clienteDS"
                       k-readonly="clienteRO"
                       k-data-text-field="'Codigo'"
                       k-filter="'contains'"
                       k-min-length="3"
                       k-template="tCliente" />
            </div>
        </div>
        <div class="InputGroup" style="max-height: 5em">
            <span class="InputGroup__label">@Html.ResourceLabel("Labels", "En horario"):</span>
            <div class="InputGroup__control">
                <input class="form-control" kendo-combo-box />
            </div>
        </div>
        <div class="InputGroup">
            <span class="InputGroup__label">@Html.ResourceLabel("Labels", "Entrega"):</span>
            <div class="InputGroup__control">
                <input class="form-control"
                       kendo-auto-complete
                       k-data-source="puntoEntregaDS"
                       k-readonly="puntoEntregaRO"
                       k-data-text-field="'Codigo'"
                       k-filter="'contains'"
                       k-min-length="3"
                       k-ng-model="puntoEntregaSelected"
                       k-template="tPuntoEntrega" />
            </div>
        </div>

    </div>
    <div class="InputContainer">
        <div class="InputGroup">
            <span class="InputGroup__label">@Html.ResourceLabel("Labels", "Observaciones"):</span>
            <div class="InputGroup__control">
        <textarea class="form-control" kendo-editor></textarea>
    </div>
        </div>
    </div>
    <div class="form-group">
        <span>@Html.ResourceLabel("Labels", "Información del Ticket:")</span>
        <div kendo-grid k-options="gridDetalleOptions" k-data-source="detalleDS"></div>
    </div>

    <div class="from-grop">
        <button kendo-button ng-click="onClose()" style="float: right; margin-left: 3em; min-width: 10em;">@Html.ResourceLabel("Labels", "Cerrar")</button>
        <button kendo-button ng-click="onSave()" style="float: right; margin-left: 3em; min-width: 10em;">@Html.ResourceLabel("Labels", "Guardar")</button>
    </div>
</div>
