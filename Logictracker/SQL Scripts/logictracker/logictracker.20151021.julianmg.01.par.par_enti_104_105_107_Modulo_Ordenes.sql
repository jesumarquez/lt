/*
Deployment script for logictracker

This code was generated by a tool.
Changes to this file may cause incorrect behavior and will be lost if
the code is regenerated.
*/

GO
SET ANSI_NULLS, ANSI_PADDING, ANSI_WARNINGS, ARITHABORT, CONCAT_NULL_YIELDS_NULL, QUOTED_IDENTIFIER ON;

SET NUMERIC_ROUNDABORT OFF;


GO
:setvar DatabaseName "logictracker"
:setvar DefaultFilePrefix "logictracker"
:setvar DefaultDataPath "C:\Program Files\Microsoft SQL Server\MSSQL10_50.MSSQL2K8R2\MSSQL\DATA\"
:setvar DefaultLogPath "C:\Program Files\Microsoft SQL Server\MSSQL10_50.MSSQL2K8R2\MSSQL\DATA\"

GO
:on error exit
GO
/*
Detect SQLCMD mode and disable script execution if SQLCMD mode is not supported.
To re-enable the script after enabling SQLCMD mode, execute the following:
SET NOEXEC OFF; 
*/
:setvar __IsSqlCmdEnabled "True"
GO
IF N'$(__IsSqlCmdEnabled)' NOT LIKE N'True'
    BEGIN
        PRINT N'SQLCMD mode must be enabled to successfully execute this script.';
        SET NOEXEC ON;
    END


GO
USE [$(DatabaseName)];


GO
PRINT N'Altering [dbo].[par.par_enti_58_insumos]...';


GO
ALTER TABLE [dbo].[par.par_enti_58_insumos]
    ADD [rela_parenti59]    INT        NULL,
        [parenti58_volumen] FLOAT (53) DEFAULT ((0)) NULL,
        [parenti58_peso]    FLOAT (53) DEFAULT ((0)) NULL;


GO
PRINT N'Creating [dbo].[par.par_enti_104_cab_orden]...';


GO
CREATE TABLE [dbo].[par.par_enti_104_cab_orden] (
    [id_parenti104]                     INT          IDENTITY (1, 1) NOT NULL,
    [parenti104_fecha_alta]             DATETIME     NULL,
    [parenti104_fecha_pedido]           DATETIME     NULL,
    [parenti104_fecha_entrega]          DATETIME     NULL,
    [rela_parenti01]                    INT          NULL,
    [rela_parenti44]                    INT          NULL,
    [rela_parenti09]                    INT          NULL,
    [rela_parenti07]                    INT          NULL,
    [parenti104_fin_ventana_horaria]    VARCHAR (10) NULL,
    [parenti104_inicio_ventana_horaria] VARCHAR (10) NULL,
    [rela_parenti02]                    INT          NULL,
    [parenti104_codigo_pedido]          VARCHAR (50) NULL,
    CONSTRAINT [par.par_enti_104_cab_orden_PK] PRIMARY KEY CLUSTERED ([id_parenti104] ASC) WITH (FILLFACTOR = 90)
);


GO
PRINT N'Creating [dbo].[par.par_enti_105_det_orden]...';


GO
CREATE TABLE [dbo].[par.par_enti_105_det_orden] (
    [id_parenti105]              INT        IDENTITY (1, 1) NOT NULL,
    [rela_parenti104]            INT        NULL,
    [rela_parenti58]             INT        NULL,
    [parenti105_precio_unitario] FLOAT (53) NULL,
    [parenti105_descuento]       FLOAT (53) NULL,
    [parenti105_cantidad]        INT        NULL,
    CONSTRAINT [parpar_enti_105_det_orden_PK] PRIMARY KEY CLUSTERED ([id_parenti105] ASC) WITH (FILLFACTOR = 90)
);


GO
PRINT N'Creating [dbo].[par.par_enti_107_zona_empleado]...';


GO
CREATE TABLE [dbo].[par.par_enti_107_zona_empleado] (
    [rela_parenti09] INT NOT NULL,
    [rela_parenti89] INT NOT NULL
);


GO
PRINT N'Creating [dbo].[FK_par.par_enti_104_cab_orden.par_enti_01_cab_empresas]...';


GO
ALTER TABLE [dbo].[par.par_enti_104_cab_orden] WITH NOCHECK
    ADD CONSTRAINT [FK_par.par_enti_104_cab_orden.par_enti_01_cab_empresas] FOREIGN KEY ([rela_parenti01]) REFERENCES [dbo].[par.par_enti_01_cab_empresas] ([id_parenti01]);


GO
PRINT N'Creating [dbo].[FK_par.par_enti_104_cab_orden.par_enti_44_pto_entrega]...';


GO
ALTER TABLE [dbo].[par.par_enti_104_cab_orden] WITH NOCHECK
    ADD CONSTRAINT [FK_par.par_enti_104_cab_orden.par_enti_44_pto_entrega] FOREIGN KEY ([rela_parenti44]) REFERENCES [dbo].[par.par_enti_44_pto_entrega] ([id_parenti44]);


GO
PRINT N'Creating [dbo].[FK_par.par_enti_104_cab_orden.par_enti_09_cab_empleados]...';


GO
ALTER TABLE [dbo].[par.par_enti_104_cab_orden] WITH NOCHECK
    ADD CONSTRAINT [FK_par.par_enti_104_cab_orden.par_enti_09_cab_empleados] FOREIGN KEY ([rela_parenti09]) REFERENCES [dbo].[par.par_enti_09_cab_empleados] ([id_parenti09]);


GO
PRINT N'Creating [dbo].[FK_par.par_enti_104_cab_orden_par.par_enti_07_tbl_transportistas]...';


GO
ALTER TABLE [dbo].[par.par_enti_104_cab_orden] WITH NOCHECK
    ADD CONSTRAINT [FK_par.par_enti_104_cab_orden_par.par_enti_07_tbl_transportistas] FOREIGN KEY ([rela_parenti07]) REFERENCES [dbo].[par.par_enti_07_tbl_transportistas] ([id_parenti07]);


GO
PRINT N'Creating [dbo].[FK_par.par_enti_105_det_orden.par_enti_104_cab_orden]...';


GO
ALTER TABLE [dbo].[par.par_enti_105_det_orden] WITH NOCHECK
    ADD CONSTRAINT [FK_par.par_enti_105_det_orden.par_enti_104_cab_orden] FOREIGN KEY ([rela_parenti104]) REFERENCES [dbo].[par.par_enti_104_cab_orden] ([id_parenti104]);


GO
PRINT N'Creating [dbo].[FK_par.par_enti_105_det_orden.par_enti_58_insumos]...';


GO
ALTER TABLE [dbo].[par.par_enti_105_det_orden] WITH NOCHECK
    ADD CONSTRAINT [FK_par.par_enti_105_det_orden.par_enti_58_insumos] FOREIGN KEY ([rela_parenti58]) REFERENCES [dbo].[par.par_enti_58_insumos] ([id_parenti58]);


GO
PRINT N'Creating [dbo].[FK_par.par_enti_107_zona_empleado_par.par_enti_89_cab_zona]...';


GO
ALTER TABLE [dbo].[par.par_enti_107_zona_empleado] WITH NOCHECK
    ADD CONSTRAINT [FK_par.par_enti_107_zona_empleado_par.par_enti_89_cab_zona] FOREIGN KEY ([rela_parenti89]) REFERENCES [dbo].[par.par_enti_89_cab_zona] ([id_parenti89]);


GO
PRINT N'Creating [dbo].[FK_par.par_enti_107_zona_empleado_par.par_enti_09_cab_empleados]...';


GO
ALTER TABLE [dbo].[par.par_enti_107_zona_empleado] WITH NOCHECK
    ADD CONSTRAINT [FK_par.par_enti_107_zona_empleado_par.par_enti_09_cab_empleados] FOREIGN KEY ([rela_parenti09]) REFERENCES [dbo].[par.par_enti_09_cab_empleados] ([id_parenti09]);


GO
PRINT N'Checking existing data against newly created constraints';


GO
USE [$(DatabaseName)];


GO
ALTER TABLE [dbo].[par.par_enti_104_cab_orden] WITH CHECK CHECK CONSTRAINT [FK_par.par_enti_104_cab_orden.par_enti_01_cab_empresas];

ALTER TABLE [dbo].[par.par_enti_104_cab_orden] WITH CHECK CHECK CONSTRAINT [FK_par.par_enti_104_cab_orden.par_enti_44_pto_entrega];

ALTER TABLE [dbo].[par.par_enti_104_cab_orden] WITH CHECK CHECK CONSTRAINT [FK_par.par_enti_104_cab_orden.par_enti_09_cab_empleados];

ALTER TABLE [dbo].[par.par_enti_104_cab_orden] WITH CHECK CHECK CONSTRAINT [FK_par.par_enti_104_cab_orden_par.par_enti_07_tbl_transportistas];

ALTER TABLE [dbo].[par.par_enti_105_det_orden] WITH CHECK CHECK CONSTRAINT [FK_par.par_enti_105_det_orden.par_enti_104_cab_orden];

ALTER TABLE [dbo].[par.par_enti_105_det_orden] WITH CHECK CHECK CONSTRAINT [FK_par.par_enti_105_det_orden.par_enti_58_insumos];

ALTER TABLE [dbo].[par.par_enti_107_zona_empleado] WITH CHECK CHECK CONSTRAINT [FK_par.par_enti_107_zona_empleado_par.par_enti_89_cab_zona];

ALTER TABLE [dbo].[par.par_enti_107_zona_empleado] WITH CHECK CHECK CONSTRAINT [FK_par.par_enti_107_zona_empleado_par.par_enti_09_cab_empleados];


GO
PRINT N'Update complete.';


GO
