<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Garmin Fleet Management Controller: CFmiPcAppDlg.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.1 -->
<script type="text/javascript">
function hasClass(ele,cls) {
  return ele.className.match(new RegExp('(\\s|^)'+cls+'(\\s|$)'));
}

function addClass(ele,cls) {
  if (!this.hasClass(ele,cls)) ele.className += " "+cls;
}

function removeClass(ele,cls) {
  if (hasClass(ele,cls)) {
    var reg = new RegExp('(\\s|^)'+cls+'(\\s|$)');
    ele.className=ele.className.replace(reg,' ');
  }
}

function toggleVisibility(linkObj) {
 var base = linkObj.getAttribute('id');
 var summary = document.getElementById(base + '-summary');
 var content = document.getElementById(base + '-content');
 var trigger = document.getElementById(base + '-trigger');
 if ( hasClass(linkObj,'closed') ) {
   summary.style.display = 'none';
   content.style.display = 'block';
   trigger.src = 'open.png';
   removeClass(linkObj,'closed');
   addClass(linkObj,'opened');
 } else if ( hasClass(linkObj,'opened') ) {
   summary.style.display = 'block';
   content.style.display = 'none';
   trigger.src = 'closed.png';
   removeClass(linkObj,'opened');
   addClass(linkObj,'closed');
 }
 return false;
}
</script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<h1>CFmiPcAppDlg.cpp</h1>  </div>
</div>
<div class="contents">
<a href="CFmiPcAppDlg_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*********************************************************************</span>
<a name="l00002"></a>00002 <span class="comment">*</span>
<a name="l00003"></a>00003 <span class="comment">*   MODULE NAME:</span>
<a name="l00004"></a>00004 <span class="comment">*       CFmiPcAppDlg.cpp</span>
<a name="l00005"></a>00005 <span class="comment">*</span>
<a name="l00006"></a>00006 <span class="comment">*   Copyright 2008-2011 by Garmin Ltd. or its subsidiaries.</span>
<a name="l00007"></a>00007 <span class="comment">*---------------------------------------------------------------------</span>
<a name="l00008"></a>00008 <span class="comment">* $NoKeywords$</span>
<a name="l00009"></a>00009 <span class="comment">*********************************************************************/</span>
<a name="l00010"></a>00010 <span class="preprocessor">#include &quot;<a class="code" href="stdafx_8h.html">stdafx.h</a>&quot;</span>
<a name="l00011"></a>00011 <span class="preprocessor">#include &quot;<a class="code" href="CAboutDlg_8h.html">CAboutDlg.h</a>&quot;</span>
<a name="l00012"></a>00012 <span class="preprocessor">#include &quot;<a class="code" href="CFmiApplication_8h.html">CFmiApplication.h</a>&quot;</span>
<a name="l00013"></a>00013 <span class="preprocessor">#include &quot;<a class="code" href="CFmiPcAppDlg_8h.html">CFmiPcAppDlg.h</a>&quot;</span>
<a name="l00014"></a>00014 <span class="preprocessor">#include &quot;<a class="code" href="CCommErrorDlg_8h.html">CCommErrorDlg.h</a>&quot;</span>
<a name="l00015"></a>00015 <span class="preprocessor">#include &quot;<a class="code" href="CSelectCommPortDlg_8h.html">CSelectCommPortDlg.h</a>&quot;</span>
<a name="l00016"></a>00016 <span class="preprocessor">#include &quot;<a class="code" href="CStopListDlg_8h.html">CStopListDlg.h</a>&quot;</span>
<a name="l00017"></a>00017 <span class="preprocessor">#include &quot;<a class="code" href="CTxtMsgNewDlg_8h.html">CTxtMsgNewDlg.h</a>&quot;</span>
<a name="l00018"></a>00018 <span class="preprocessor">#include &quot;<a class="code" href="CLogViewerDlg_8h.html">CLogViewerDlg.h</a>&quot;</span>
<a name="l00019"></a>00019 <span class="preprocessor">#include &quot;<a class="code" href="FmiLogParser_8h.html">FmiLogParser.h</a>&quot;</span>
<a name="l00020"></a>00020 
<a name="l00021"></a>00021 <span class="preprocessor">#if( FMI_SUPPORT_A602 )</span>
<a name="l00022"></a>00022 <span class="preprocessor"></span><span class="preprocessor">#include &quot;<a class="code" href="CTxtMsgAckDlg_8h.html">CTxtMsgAckDlg.h</a>&quot;</span>
<a name="l00023"></a>00023 <span class="preprocessor">#endif</span>
<a name="l00024"></a>00024 <span class="preprocessor"></span>
<a name="l00025"></a>00025 <span class="preprocessor">#if( FMI_SUPPORT_A603 )</span>
<a name="l00026"></a>00026 <span class="preprocessor"></span><span class="preprocessor">#include &quot;<a class="code" href="CAutoArrivalDlg_8h.html">CAutoArrivalDlg.h</a>&quot;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &quot;<a class="code" href="CDeleteDataDlg_8h.html">CDeleteDataDlg.h</a>&quot;</span>
<a name="l00028"></a>00028 <span class="preprocessor">#include &quot;<a class="code" href="CTxtMsgFromClient_8h.html">CTxtMsgFromClient.h</a>&quot;</span>
<a name="l00029"></a>00029 <span class="preprocessor">#endif</span>
<a name="l00030"></a>00030 <span class="preprocessor"></span>
<a name="l00031"></a>00031 <span class="preprocessor">#if( FMI_SUPPORT_A604 )</span>
<a name="l00032"></a>00032 <span class="preprocessor"></span><span class="preprocessor">#include &quot;<a class="code" href="CManageCannedResponseDlg_8h.html">CManageCannedResponseDlg.h</a>&quot;</span>
<a name="l00033"></a>00033 <span class="preprocessor">#include &quot;<a class="code" href="CCannedTxtMsgDlg_8h.html">CCannedTxtMsgDlg.h</a>&quot;</span>
<a name="l00034"></a>00034 <span class="preprocessor">#include &quot;<a class="code" href="CDriverIdAndStatusDlg_8h.html">CDriverIdAndStatusDlg.h</a>&quot;</span>
<a name="l00035"></a>00035 <span class="preprocessor">#include &quot;<a class="code" href="CGpiQueryDlg_8h.html">CGpiQueryDlg.h</a>&quot;</span>
<a name="l00036"></a>00036 <span class="preprocessor">#include &quot;<a class="code" href="CGpiTransferDlg_8h.html">CGpiTransferDlg.h</a>&quot;</span>
<a name="l00037"></a>00037 <span class="preprocessor">#include &quot;<a class="code" href="CMsgThrottlingDlg_8h.html">CMsgThrottlingDlg.h</a>&quot;</span>
<a name="l00038"></a>00038 <span class="preprocessor">#include &quot;<a class="code" href="CPingStatusDlg_8h.html">CPingStatusDlg.h</a>&quot;</span>
<a name="l00039"></a>00039 <span class="preprocessor">#include &quot;<a class="code" href="CTxtMsgStatusDlg_8h.html">CTxtMsgStatusDlg.h</a>&quot;</span>
<a name="l00040"></a>00040 <span class="preprocessor">#include &quot;<a class="code" href="CTxtMsgStatusRequestDlg_8h.html">CTxtMsgStatusRequestDlg.h</a>&quot;</span>
<a name="l00041"></a>00041 <span class="preprocessor">#include &quot;<a class="code" href="CUITextChangeDlg_8h.html">CUITextChangeDlg.h</a>&quot;</span>
<a name="l00042"></a>00042 <span class="preprocessor">#endif</span>
<a name="l00043"></a>00043 <span class="preprocessor"></span>
<a name="l00044"></a>00044 <span class="preprocessor">#if( FMI_SUPPORT_A606 )</span>
<a name="l00045"></a>00045 <span class="preprocessor"></span><span class="preprocessor">#include &quot;<a class="code" href="CSafeModeDlg_8h.html">CSafeModeDlg.h</a>&quot;</span>
<a name="l00046"></a>00046 <span class="preprocessor">#endif</span>
<a name="l00047"></a>00047 <span class="preprocessor"></span>
<a name="l00048"></a>00048 <span class="preprocessor">#if( FMI_SUPPORT_A607 )</span>
<a name="l00049"></a>00049 <span class="preprocessor"></span><span class="preprocessor">#include &quot;<a class="code" href="CFeatureDlg_8h.html">CFeatureDlg.h</a>&quot;</span>
<a name="l00050"></a>00050 <span class="preprocessor">#include &quot;<a class="code" href="CTxtMsgDeleteRequestDlg_8h.html">CTxtMsgDeleteRequestDlg.h</a>&quot;</span>
<a name="l00051"></a>00051 <span class="preprocessor">#endif</span>
<a name="l00052"></a>00052 <span class="preprocessor"></span>
<a name="l00053"></a>00053 <span class="preprocessor">#if( FMI_SUPPORT_A608 )</span>
<a name="l00054"></a>00054 <span class="preprocessor"></span><span class="preprocessor">#include &quot;<a class="code" href="CSpeedLimitAlertsDlg_8h.html">CSpeedLimitAlertsDlg.h</a>&quot;</span>
<a name="l00055"></a>00055 <span class="preprocessor">#endif</span>
<a name="l00056"></a>00056 <span class="preprocessor"></span>
<a name="l00057"></a>00057 <span class="preprocessor">#include &quot;<a class="code" href="Event_8h.html">Event.h</a>&quot;</span>
<a name="l00058"></a>00058 <span class="preprocessor">#include &quot;<a class="code" href="Logger_8h.html">Logger.h</a>&quot;</span>
<a name="l00059"></a>00059 <span class="preprocessor">#include &quot;<a class="code" href="TimerManager_8h.html">TimerManager.h</a>&quot;</span>
<a name="l00060"></a>00060 
<a name="l00062"></a><a class="code" href="CFmiPcAppDlg_8cpp.html#a6283fe1131d09335ff08168b3020dc01">00062</a> <span class="preprocessor">#define MAIN_RX_TIMER_INTERVAL   ( 150 )</span>
<a name="l00063"></a>00063 <span class="preprocessor"></span>
<a name="l00065"></a><a class="code" href="CFmiPcAppDlg_8cpp.html#a003fb6279f55301fe65abc5dce6c266e">00065</a> <span class="preprocessor">#define MAIN_ETA_TIMER_INTERVAL  ( 60 * 1000 )</span>
<a name="l00066"></a>00066 <span class="preprocessor"></span>
<a name="l00071"></a><a class="code" href="CFmiPcAppDlg_8cpp.html#ab1607f7a01655d3cce2eaef4fbdac704">00071</a> <span class="keyword">enum</span> <a class="code" href="CFmiPcAppDlg_8cpp.html#ab1607f7a01655d3cce2eaef4fbdac704" title="Timer ID values used in the application. //!">TimerIdType</a>
<a name="l00072"></a>00072 {
<a name="l00073"></a><a class="code" href="CFmiPcAppDlg_8cpp.html#ab1607f7a01655d3cce2eaef4fbdac704ac4d257c076288704c27fd18ec9a5a199">00073</a>     MAIN_TIMER_ID,
<a name="l00074"></a>00074 <span class="preprocessor">#if FMI_SUPPORT_A603</span>
<a name="l00075"></a><a class="code" href="CFmiPcAppDlg_8cpp.html#ab1607f7a01655d3cce2eaef4fbdac704ad2be3b7cd9de6fb84059d6f4fe8a836a">00075</a> <span class="preprocessor"></span>    MAIN_ETA_TIMER_ID,
<a name="l00076"></a>00076 <span class="preprocessor">#endif</span>
<a name="l00077"></a>00077 <span class="preprocessor"></span>
<a name="l00078"></a><a class="code" href="CFmiPcAppDlg_8cpp.html#ab1607f7a01655d3cce2eaef4fbdac704a95ec4936fc2e82ff793ddf91a96c8e63">00078</a>     <a class="code" href="CFmiPcAppDlg_8cpp.html#ab1607f7a01655d3cce2eaef4fbdac704a95ec4936fc2e82ff793ddf91a96c8e63">TIMER_ID_COUNT</a>
<a name="l00079"></a>00079 };
<a name="l00080"></a>00080 
<a name="l00081"></a>00081 <span class="keyword">using namespace </span>std;
<a name="l00082"></a>00082 
<a name="l00083"></a>00083 BEGIN_MESSAGE_MAP( <a class="code" href="classCFmiPcAppDlg.html" title="Main application dialog //!">CFmiPcAppDlg</a>, CDialog )
<a name="l00084"></a>00084     ON_WM_SYSCOMMAND()
<a name="l00085"></a>00085     ON_WM_PAINT()
<a name="l00086"></a>00086     ON_WM_QUERYDRAGICON()
<a name="l00087"></a>00087     ON_WM_TIMER()
<a name="l00088"></a>00088     ON_BN_CLICKED( <a class="code" href="resource_8h.html#a83d624500f8bcf19adeccbc055170d54">IDC_MAIN_BTN_CHG_COM_PORT</a>, OnBnClickedChgComPort )
<a name="l00089"></a>00089     ON_BN_CLICKED( <a class="code" href="resource_8h.html#abaf39302f3a55d6953753a3b44d30637">IDC_MAIN_BTN_SEND_ENABLE</a>, OnBnClickedEnable )
<a name="l00090"></a>00090     ON_BN_CLICKED( <a class="code" href="resource_8h.html#af20411f63031078d4f3217767730bfdf">IDC_MAIN_BTN_SEND_TXT_MSG</a>, OnBnClickedTxt )
<a name="l00091"></a>00091     ON_BN_CLICKED( <a class="code" href="resource_8h.html#ae433cfa6d7da93eb89b2cb84b9c3fce9">IDC_MAIN_BTN_VIEW_LOG</a>, OnBnClickedViewlog )
<a name="l00092"></a>00092     ON_BN_CLICKED( <a class="code" href="resource_8h.html#aa524d33196c2b32bd2281fe8508c8528">IDC_MAIN_BTN_VIEW_STOPS</a>, OnBnClickedManageStops )
<a name="l00093"></a>00093     ON_BN_CLICKED( <a class="code" href="resource_8h.html#a925a379e7c74136a99c425240052dc3c">IDC_MAIN_CHK_PVT_ENABLE</a>, OnBnClickedCheckPVT )
<a name="l00094"></a>00094     ON_COMMAND( <a class="code" href="resource_8h.html#a4d9c03b639083b011f53f4b027c03e9c">ID_FILE_CLEARPACKETLOG</a>, OnFileClearPacketLog )
<a name="l00095"></a>00095     ON_COMMAND( ID_FILE_CLOSE, OnFileClose )
<a name="l00096"></a>00096     ON_COMMAND( <a class="code" href="resource_8h.html#aeb97ae065783af12782e6a4be2466af9">ID_FILE_VIEWLOG</a>, OnBnClickedViewlog )
<a name="l00097"></a>00097     ON_COMMAND( <a class="code" href="resource_8h.html#ae175225c71f50ea7932bf7704658f0af">ID_HELP_ABOUT</a>, OnHelpAbout )
<a name="l00098"></a>00098     ON_UPDATE_COMMAND_UI( ID_FILE_VIEWLOG, OnUpdateFileViewlog )
<a name="l00099"></a>00099     ON_MESSAGE( <a class="code" href="CWndEventListener_8h.html#a2ad6fb6553f143eeaef1c4afed2ac7cf" title="Translation from an application event to the corresponding Windows //! message.">WM_EVENT</a>( <a class="code" href="EventId_8h.html#a4cf8d4a4d56e9f795518b6541ddeb5bfab23df25d591b69856c16759fb795ec9f">EVENT_MAIN_DLG_INIT</a> ), OnEventMainDlgInit )
<a name="l00100"></a>00100     ON_MESSAGE( <a class="code" href="CWndEventListener_8h.html#a2ad6fb6553f143eeaef1c4afed2ac7cf" title="Translation from an application event to the corresponding Windows //! message.">WM_EVENT</a>( <a class="code" href="EventId_8h.html#a4cf8d4a4d56e9f795518b6541ddeb5bfabd17a4375b768c5cc3cc07ff85b29f63">EVENT_COMM_TIMEOUT</a> ), OnEventCommTimeout )
<a name="l00101"></a>00101     ON_MESSAGE( <a class="code" href="CWndEventListener_8h.html#a2ad6fb6553f143eeaef1c4afed2ac7cf" title="Translation from an application event to the corresponding Windows //! message.">WM_EVENT</a>( <a class="code" href="EventId_8h.html#a4cf8d4a4d56e9f795518b6541ddeb5bfa3033e2b47b37729c0aa971ed7caeb1f5">EVENT_COMM_ERROR_DLG_CLOSED</a> ), OnEventCommErrorDlgClosed )
<a name="l00102"></a>00102     ON_MESSAGE( <a class="code" href="CWndEventListener_8h.html#a2ad6fb6553f143eeaef1c4afed2ac7cf" title="Translation from an application event to the corresponding Windows //! message.">WM_EVENT</a>( <a class="code" href="EventId_8h.html#a4cf8d4a4d56e9f795518b6541ddeb5bfa742de5c823a31a9640c2a724a63afd11">EVENT_ESN_RECEIVED</a> ), OnEventEsnReceived )
<a name="l00103"></a>00103     ON_MESSAGE( <a class="code" href="CWndEventListener_8h.html#a2ad6fb6553f143eeaef1c4afed2ac7cf" title="Translation from an application event to the corresponding Windows //! message.">WM_EVENT</a>( <a class="code" href="EventId_8h.html#a4cf8d4a4d56e9f795518b6541ddeb5bfa67703cbfedae3ec38c181978d5c16178">EVENT_PRODUCT_ID_RECEIVED</a> ), OnEventProductIdReceived )
<a name="l00104"></a>00104     ON_MESSAGE( <a class="code" href="CWndEventListener_8h.html#a2ad6fb6553f143eeaef1c4afed2ac7cf" title="Translation from an application event to the corresponding Windows //! message.">WM_EVENT</a>( <a class="code" href="EventId_8h.html#a4cf8d4a4d56e9f795518b6541ddeb5bfa771b5e38a355f668c11fac90651119f0">EVENT_PROTOCOLS_RECEIVED</a> ), OnEventProtocolsReceived )
<a name="l00105"></a>00105     ON_MESSAGE( <a class="code" href="CWndEventListener_8h.html#a2ad6fb6553f143eeaef1c4afed2ac7cf" title="Translation from an application event to the corresponding Windows //! message.">WM_EVENT</a>( <a class="code" href="EventId_8h.html#a4cf8d4a4d56e9f795518b6541ddeb5bfa8ec7c9673f22e4244d524249a82963ab">EVENT_PVT_RECEIVED</a> ), OnEventPvtReceived )
<a name="l00106"></a>00106     ON_MESSAGE( <a class="code" href="CWndEventListener_8h.html#a2ad6fb6553f143eeaef1c4afed2ac7cf" title="Translation from an application event to the corresponding Windows //! message.">WM_EVENT</a>( <a class="code" href="EventId_8h.html#a4cf8d4a4d56e9f795518b6541ddeb5bfa7c7d286eb02615fc96bf431dff3ed8ee">EVENT_LOG_VIEWER_CLOSED</a> ), OnEventLogViewerClosed )
<a name="l00107"></a>00107     ON_MESSAGE( <a class="code" href="CWndEventListener_8h.html#a2ad6fb6553f143eeaef1c4afed2ac7cf" title="Translation from an application event to the corresponding Windows //! message.">WM_EVENT</a>( <a class="code" href="EventId_8h.html#a4cf8d4a4d56e9f795518b6541ddeb5bfafcee7bd5cdb07deb63c01f4979fa3f57">EVENT_STOP_LIST_DLG_CLOSED</a> ), OnEventStopListDlgClosed )
<a name="l00108"></a>00108 <span class="preprocessor">#if( FMI_SUPPORT_A602 )</span>
<a name="l00109"></a>00109 <span class="preprocessor"></span>    ON_MESSAGE( <a class="code" href="CWndEventListener_8h.html#a2ad6fb6553f143eeaef1c4afed2ac7cf" title="Translation from an application event to the corresponding Windows //! message.">WM_EVENT</a>( <a class="code" href="EventId_8h.html#a4cf8d4a4d56e9f795518b6541ddeb5bfa169d1ed76fabb42d58c987683c73c9fd">EVENT_FMI_TXT_MSG_ACK</a> ), OnEventTextMsgAck )
<a name="l00110"></a>00110     ON_BN_CLICKED( <a class="code" href="resource_8h.html#a7c18c7574e8d440220d25f9c56c39135">IDC_MAIN_BTN_FMI_SEND</a>, OnBnClickedSend )
<a name="l00111"></a>00111 <span class="preprocessor">#endif</span>
<a name="l00112"></a>00112 <span class="preprocessor"></span><span class="preprocessor">#if( FMI_SUPPORT_A603 )</span>
<a name="l00113"></a>00113 <span class="preprocessor"></span>    ON_MESSAGE( <a class="code" href="CWndEventListener_8h.html#a2ad6fb6553f143eeaef1c4afed2ac7cf" title="Translation from an application event to the corresponding Windows //! message.">WM_EVENT</a>( <a class="code" href="EventId_8h.html#a4cf8d4a4d56e9f795518b6541ddeb5bfa2a3e53bfdc29f17d9b0f229362738389">EVENT_FMI_TXT_MSG_FROM_CLIENT</a> ), OnEventTxtMsgFromClient )
<a name="l00114"></a>00114     ON_MESSAGE( <a class="code" href="CWndEventListener_8h.html#a2ad6fb6553f143eeaef1c4afed2ac7cf" title="Translation from an application event to the corresponding Windows //! message.">WM_EVENT</a>( <a class="code" href="EventId_8h.html#a4cf8d4a4d56e9f795518b6541ddeb5bfa81ebb9e8b1daaa662900945beea16a68">EVENT_FMI_ETA_RECEIVED</a> ), OnEventEtaReceived )
<a name="l00115"></a>00115     ON_MESSAGE( <a class="code" href="CWndEventListener_8h.html#a2ad6fb6553f143eeaef1c4afed2ac7cf" title="Translation from an application event to the corresponding Windows //! message.">WM_EVENT</a>( <a class="code" href="EventId_8h.html#a4cf8d4a4d56e9f795518b6541ddeb5bfad624082898235c07dd1c2eb0a7a2646d">EVENT_FMI_STOP_STATUS_CHANGED</a> ), OnEventStopDone )
<a name="l00116"></a>00116     ON_BN_CLICKED( <a class="code" href="resource_8h.html#a8b48be7a943ffaa352bdec79e156610b">IDC_MAIN_BTN_CHG_AUTO_ARVL</a>, OnBnClickedChgAutoArvl )
<a name="l00117"></a>00117     ON_BN_CLICKED( <a class="code" href="resource_8h.html#aa505140a4283aeba987a9ae530872f6d">IDC_MAIN_BTN_DEL_DATA</a>, OnBnClickedDelData )
<a name="l00118"></a>00118     ON_BN_CLICKED( <a class="code" href="resource_8h.html#a72da034b93335979e4bc4e52023ce4f7">IDC_MAIN_BTN_REQ_ETA</a>, OnBnClickedReqETA )
<a name="l00119"></a>00119     ON_BN_CLICKED( <a class="code" href="resource_8h.html#ad3c98158ba97e71fb2e32f360c918571">IDC_MAIN_CHK_ETA_AUTO_UPDATE</a>, OnBnClickedAutoETA )
<a name="l00120"></a>00120 <span class="preprocessor">#endif</span>
<a name="l00121"></a>00121 <span class="preprocessor"></span><span class="preprocessor">#if( FMI_SUPPORT_A604 )</span>
<a name="l00122"></a>00122 <span class="preprocessor"></span>    ON_MESSAGE( <a class="code" href="CWndEventListener_8h.html#a2ad6fb6553f143eeaef1c4afed2ac7cf" title="Translation from an application event to the corresponding Windows //! message.">WM_EVENT</a>( <a class="code" href="EventId_8h.html#a4cf8d4a4d56e9f795518b6541ddeb5bfac900913cdd7e8f3091d7ffb1c4d1e54f">EVENT_FMI_UI_UPDATE_ERROR</a> ), OnEventUserInterfaceTextChangeFailed )
<a name="l00123"></a>00123     ON_MESSAGE( <a class="code" href="CWndEventListener_8h.html#a2ad6fb6553f143eeaef1c4afed2ac7cf" title="Translation from an application event to the corresponding Windows //! message.">WM_EVENT</a>( <a class="code" href="EventId_8h.html#a4cf8d4a4d56e9f795518b6541ddeb5bfa3c87b542ca5223373b27c212afbda66f">EVENT_FMI_CANNED_RESP_LIST_RCPT_ERROR</a> ), OnEventCannedRespListReceiptError )
<a name="l00124"></a>00124     ON_MESSAGE( <a class="code" href="CWndEventListener_8h.html#a2ad6fb6553f143eeaef1c4afed2ac7cf" title="Translation from an application event to the corresponding Windows //! message.">WM_EVENT</a>( <a class="code" href="EventId_8h.html#a4cf8d4a4d56e9f795518b6541ddeb5bfa0a21d8656744916b35b2953d6c054357">EVENT_FMI_A604_TXT_MSG_ERROR</a> ), OnEventOpenTextMsgError )
<a name="l00125"></a>00125     ON_MESSAGE( <a class="code" href="CWndEventListener_8h.html#a2ad6fb6553f143eeaef1c4afed2ac7cf" title="Translation from an application event to the corresponding Windows //! message.">WM_EVENT</a>( <a class="code" href="EventId_8h.html#a4cf8d4a4d56e9f795518b6541ddeb5bfab03ec95dff4e00ae77db8a5ffabf6387">EVENT_FMI_TXT_MSG_STATUS_RECEIVED</a> ), OnEventTxtMsgStatus )
<a name="l00126"></a>00126     ON_MESSAGE( <a class="code" href="CWndEventListener_8h.html#a2ad6fb6553f143eeaef1c4afed2ac7cf" title="Translation from an application event to the corresponding Windows //! message.">WM_EVENT</a>( <a class="code" href="EventId_8h.html#a4cf8d4a4d56e9f795518b6541ddeb5bfa34a1b9628a0e66ee93f4d03d64a8aea9">EVENT_FMI_CANNED_MESSAGE_DLG_CLOSED</a> ), OnEventCannedMessageDlgClosed )
<a name="l00127"></a>00127     ON_MESSAGE( <a class="code" href="CWndEventListener_8h.html#a2ad6fb6553f143eeaef1c4afed2ac7cf" title="Translation from an application event to the corresponding Windows //! message.">WM_EVENT</a>( <a class="code" href="EventId_8h.html#a4cf8d4a4d56e9f795518b6541ddeb5bfa251468357d856252778efb5176a15d26">EVENT_FMI_DRIVER_ID_AND_STATUS_DLG_CLOSED</a> ), OnEventDriverIdAndStatusDlgClosed )
<a name="l00128"></a>00128     ON_MESSAGE( <a class="code" href="CWndEventListener_8h.html#a2ad6fb6553f143eeaef1c4afed2ac7cf" title="Translation from an application event to the corresponding Windows //! message.">WM_EVENT</a>( <a class="code" href="EventId_8h.html#a4cf8d4a4d56e9f795518b6541ddeb5bfaa32858b9ebc26554bc275f49d48b4ded">EVENT_FMI_DRIVER_STATUS_LIST_DELETE_FAILED</a> ), OnEventDriverStatusListDeleteFailed )
<a name="l00129"></a>00129     ON_MESSAGE( <a class="code" href="CWndEventListener_8h.html#a2ad6fb6553f143eeaef1c4afed2ac7cf" title="Translation from an application event to the corresponding Windows //! message.">WM_EVENT</a>( <a class="code" href="EventId_8h.html#a4cf8d4a4d56e9f795518b6541ddeb5bfad402e51eb9db56d9ee6b2ca3d267d5da">EVENT_FMI_CANNED_RESPONSE_DLG_CLOSED</a> ), OnEventCannedResponseDlgClosed )
<a name="l00130"></a>00130     ON_MESSAGE( <a class="code" href="CWndEventListener_8h.html#a2ad6fb6553f143eeaef1c4afed2ac7cf" title="Translation from an application event to the corresponding Windows //! message.">WM_EVENT</a>( <a class="code" href="EventId_8h.html#a4cf8d4a4d56e9f795518b6541ddeb5bfabe11c8b6311a7b95936567e8e1ba4a79">EVENT_FMI_DISABLE_COMPLETE</a> ), OnEventFmiDisabled )
<a name="l00131"></a>00131     ON_BN_CLICKED( <a class="code" href="resource_8h.html#afc0a5cbcd0fcc204ae120f2934e5cba2">IDC_MAIN_BTN_GPI_FILE_TRANS</a>, OnBnClickedGpiFileTrans )
<a name="l00132"></a>00132     ON_BN_CLICKED( <a class="code" href="resource_8h.html#a9745a0e50bafe36b23acdcac6a94c836">IDC_MAIN_BTN_CANNED_RESPONSES</a>, OnBnClickedCannedResponses )
<a name="l00133"></a>00133     ON_BN_CLICKED( <a class="code" href="resource_8h.html#ad7774bbb0a08d30555880eed4c9a7a9e">IDC_MAIN_BTN_PING</a>, OnBnClickedPing )
<a name="l00134"></a>00134     ON_BN_CLICKED( <a class="code" href="resource_8h.html#a60272d75d1454432d9aadf737a179d25">IDC_MAIN_BTN_GPI_QUERY</a>, OnBnClickedGpiQuery )
<a name="l00135"></a>00135     ON_BN_CLICKED( <a class="code" href="resource_8h.html#a51347f1ec193f108fa0712292de9d1f8">IDC_MAIN_BTN_DRIVER_INFO</a>, OnBnClickedIdStatus )
<a name="l00136"></a>00136     ON_BN_CLICKED( <a class="code" href="resource_8h.html#a8f519e029c858e6c71400e14f244148b">IDC_MAIN_BTN_CANNED_MESSAGES</a>, OnBnClickedManageCannedMsg )
<a name="l00137"></a>00137     ON_BN_CLICKED( <a class="code" href="resource_8h.html#afac64326d9a26551ae7ebdeeace44ecc">IDC_MAIN_BTN_MSG_STATUS</a>, OnBnClickedMsgStatus )
<a name="l00138"></a>00138     ON_BN_CLICKED( <a class="code" href="resource_8h.html#a1d905c0ac8a39fe01585183eb2be02d7">IDC_MAIN_BTN_UI_TXT_CHG</a>, OnBnClickedUiTxtChg )
<a name="l00139"></a>00139     ON_BN_CLICKED( <a class="code" href="resource_8h.html#afcd750052cf9dfc1bac741c07f256156">IDC_MAIN_BTN_MSG_THROTTLING</a>, OnBnClickedMsgThrottling )
<a name="l00140"></a>00140 <span class="preprocessor">#endif</span>
<a name="l00141"></a>00141 <span class="preprocessor"></span><span class="preprocessor">#if( FMI_SUPPORT_A606 )</span>
<a name="l00142"></a>00142 <span class="preprocessor"></span>    ON_MESSAGE( <a class="code" href="CWndEventListener_8h.html#a2ad6fb6553f143eeaef1c4afed2ac7cf" title="Translation from an application event to the corresponding Windows //! message.">WM_EVENT</a>( <a class="code" href="EventId_8h.html#a4cf8d4a4d56e9f795518b6541ddeb5bfa0d5032135c098e76fe0c03b8a0711a23">EVENT_FMI_SAFE_MODE_ERROR</a> ), OnEventFmiSafeModeError )
<a name="l00143"></a>00143     ON_BN_CLICKED(<a class="code" href="resource_8h.html#ad3b5654d87b40b20fb229ba6b30ac753">IDC_MAIN_BTN_SET_SAFE_MODE</a>, OnBnClickedSafeMode)
<a name="l00144"></a>00144 <span class="preprocessor">#endif</span>
<a name="l00145"></a>00145 <span class="preprocessor"></span><span class="preprocessor">#if FMI_SUPPORT_A607</span>
<a name="l00146"></a>00146 <span class="preprocessor"></span>    ON_BN_CLICKED( <a class="code" href="resource_8h.html#a0a65ce1e8663674e21e1767998e37e5c">IDC_MAIN_BTN_MSG_DELETE</a>, OnBnClickedMsgDelete )
<a name="l00147"></a>00147     ON_BN_CLICKED( <a class="code" href="resource_8h.html#a10ad3de1d0bac631bb74245d68be1252">IDC_MAIN_BTN_WAYPOINTS</a>, OnBnClickedWaypoints )
<a name="l00148"></a>00148     ON_MESSAGE( <a class="code" href="CWndEventListener_8h.html#a2ad6fb6553f143eeaef1c4afed2ac7cf" title="Translation from an application event to the corresponding Windows //! message.">WM_EVENT</a>( <a class="code" href="EventId_8h.html#a4cf8d4a4d56e9f795518b6541ddeb5bfaab6ac856976f23640a253b2095fbf81d">EVENT_FMI_WAYPOINT_DLG_CLOSED</a> ), OnEventWaypointDlgClosed )
<a name="l00149"></a>00149     ON_MESSAGE( <a class="code" href="CWndEventListener_8h.html#a2ad6fb6553f143eeaef1c4afed2ac7cf" title="Translation from an application event to the corresponding Windows //! message.">WM_EVENT</a>( <a class="code" href="EventId_8h.html#a4cf8d4a4d56e9f795518b6541ddeb5bfad480d40830033a2faf5ceb8b3fee13e8">EVENT_FMI_DELETE_TEXT_MESSAGE_STATUS</a> ), OnEventDeleteTextMessageStatus )
<a name="l00150"></a>00150 <span class="preprocessor">#endif</span>
<a name="l00151"></a>00151 <span class="preprocessor"></span><span class="preprocessor">#if( FMI_SUPPORT_A608 )</span>
<a name="l00152"></a>00152 <span class="preprocessor"></span>    ON_BN_CLICKED( <a class="code" href="resource_8h.html#acfaa90d07a60ac3624154303f7b21335">IDC_MAIN_BTN_SPEED_LIMIT_ALERTS</a>, OnBnClickedSpeedLimit )
<a name="l00153"></a>00153 <span class="preprocessor">#endif</span>
<a name="l00154"></a>00154 <span class="preprocessor"></span>
<a name="l00155"></a>00155 END_MESSAGE_MAP()
<a name="l00156"></a>00156 
<a name="l00157"></a>00157 <span class="comment">//----------------------------------------------------------------------</span>
<a name="l00160"></a>00160 <span class="comment"></span><span class="comment">//----------------------------------------------------------------------</span>
<a name="l00161"></a>00161 <a class="code" href="classCFmiPcAppDlg.html" title="Main application dialog //!">CFmiPcAppDlg</a>::<a class="code" href="classCFmiPcAppDlg.html" title="Main application dialog //!">CFmiPcAppDlg</a>
<a name="l00162"></a><a class="code" href="classCFmiPcAppDlg.html#a60bc4e256033f684e3c3e40d28115881">00162</a>     (
<a name="l00163"></a>00163     CWnd * aParent
<a name="l00164"></a>00164     )
<a name="l00165"></a>00165     : CDialog( <a class="code" href="resource_8h.html#a55505281458e17cddd48ec6af02ca2c6">IDD_FMI_PC_APP_DIALOG</a>, aParent )
<a name="l00166"></a>00166     , mPvtChecked( <a class="code" href="garmin__types_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a> )
<a name="l00167"></a>00167     , mUnitId( _T(&quot;&quot;) )
<a name="l00168"></a>00168     , mGpsFix( _T(&quot;&quot;) )
<a name="l00169"></a>00169     , mPvtDate( _T(&quot;&quot;) )
<a name="l00170"></a>00170     , mPvtTime( _T(&quot;&quot;) )
<a name="l00171"></a>00171     , mPvtLatitude( _T(&quot;&quot;) )
<a name="l00172"></a>00172     , mPvtLongitude( _T(&quot;&quot;) )
<a name="l00173"></a>00173     , mAltitude( _T(&quot;&quot;) )
<a name="l00174"></a>00174     , mEastWestVelocity( _T(&quot;&quot;) )
<a name="l00175"></a>00175     , mNorthSouthVelocity( _T(&quot;&quot;) )
<a name="l00176"></a>00176     , mUpDownVelocity( _T(&quot;&quot;) )
<a name="l00177"></a>00177     , m2DVelocity( _T(&quot;&quot;) )
<a name="l00178"></a>00178     , mCommErrorDlg( NULL )
<a name="l00179"></a>00179     , mLogViewerDlg( NULL )
<a name="l00180"></a>00180     , mSupportedProtocols( _T(&quot;&quot;) )
<a name="l00181"></a>00181     , mProductId( _T(&quot;&quot;) )
<a name="l00182"></a>00182     , mSoftwareVersion( _T(&quot;&quot;) )
<a name="l00183"></a>00183     , mStopListDlg( NULL )
<a name="l00184"></a>00184 <span class="preprocessor">#if FMI_SUPPORT_A602</span>
<a name="l00185"></a>00185 <span class="preprocessor"></span>    , mPacketId( _T(<span class="stringliteral">&quot;&quot;</span>) )
<a name="l00186"></a>00186     , mPacketData( _T(<span class="stringliteral">&quot;&quot;</span>) )
<a name="l00187"></a>00187 <span class="preprocessor">#endif</span>
<a name="l00188"></a>00188 <span class="preprocessor"></span><span class="preprocessor">#if FMI_SUPPORT_A603</span>
<a name="l00189"></a>00189 <span class="preprocessor"></span>    , mAutoEtaChecked( FALSE )
<a name="l00190"></a>00190     , mEtaTimerEnabled( FALSE )
<a name="l00191"></a>00191     , mEtaTime( _T(<span class="stringliteral">&quot;&quot;</span>) )
<a name="l00192"></a>00192     , mEtaDistance( _T(<span class="stringliteral">&quot;&quot;</span>) )
<a name="l00193"></a>00193     , mEtaLatitude( _T(<span class="stringliteral">&quot;&quot;</span>) )
<a name="l00194"></a>00194     , mEtaLongitude( _T(<span class="stringliteral">&quot;&quot;</span>) )
<a name="l00195"></a>00195 <span class="preprocessor">#endif</span>
<a name="l00196"></a>00196 <span class="preprocessor"></span><span class="preprocessor">#if FMI_SUPPORT_A604</span>
<a name="l00197"></a>00197 <span class="preprocessor"></span>    , mCannedResponseDlg( NULL )
<a name="l00198"></a>00198     , mCannedTxtMsgDlg( NULL )
<a name="l00199"></a>00199     , mDriverIdAndStatusDlg( NULL )
<a name="l00200"></a>00200     , mTxtMsgStatusDlg( NULL )
<a name="l00201"></a>00201 <span class="preprocessor">#endif</span>
<a name="l00202"></a>00202 <span class="preprocessor"></span><span class="preprocessor">#if FMI_SUPPORT_A607</span>
<a name="l00203"></a>00203 <span class="preprocessor"></span>    , mWaypointDlg( NULL )
<a name="l00204"></a>00204 <span class="preprocessor">#endif</span>
<a name="l00205"></a>00205 <span class="preprocessor"></span>{
<a name="l00206"></a>00206     mIconHandle = AfxGetApp()-&gt;LoadIcon( <a class="code" href="resource_8h.html#a9772c84d39896ad00b9aeb34b15d324d">IDR_MAINFRAME</a> );
<a name="l00207"></a>00207     mLogParser = <span class="keyword">new</span> <a class="code" href="classFmiLogParser.html" title="LogParser for packets sent/received by the //! FmiApplicationLayer //!">FmiLogParser</a>;
<a name="l00208"></a>00208 }
<a name="l00209"></a>00209 
<a name="l00210"></a>00210 <span class="comment">//----------------------------------------------------------------------</span>
<a name="l00212"></a>00212 <span class="comment"></span><span class="comment">//----------------------------------------------------------------------</span>
<a name="l00213"></a><a class="code" href="classCFmiPcAppDlg.html#aa5b73fed357340d96c85541f440eea24">00213</a> <a class="code" href="classCFmiPcAppDlg.html#aa5b73fed357340d96c85541f440eea24" title="Destructor.">CFmiPcAppDlg::~CFmiPcAppDlg</a>()
<a name="l00214"></a>00214 {
<a name="l00215"></a>00215     <span class="keyword">delete</span> <a class="code" href="classCFmiPcAppDlg.html#a6837f79634b38e6e2a6dcf906facb364" title="The log parser to use.">mLogParser</a>;
<a name="l00216"></a>00216     <span class="keyword">delete</span> <a class="code" href="classCFmiPcAppDlg.html#a5387d032a3bc016f1ae55ddb9384083d" title="Pointer to the comm error dialog, or NULL if the dialog is not open.">mCommErrorDlg</a>;
<a name="l00217"></a>00217     <span class="keyword">delete</span> <a class="code" href="classCFmiPcAppDlg.html#a21c2a4da64f680681ce133dff90b740b" title="Pointer to the log viewer dialog, or NULL if the dialog is not open.">mLogViewerDlg</a>;
<a name="l00218"></a>00218     <span class="keyword">delete</span> <a class="code" href="classCFmiPcAppDlg.html#a54fe5a3c803333ac0485b9e43f76bf2c" title="Pointer to the stop list dialog, or NULL if the dialog is not open.">mStopListDlg</a>;
<a name="l00219"></a>00219 
<a name="l00220"></a>00220 <span class="preprocessor">#if FMI_SUPPORT_A604</span>
<a name="l00221"></a>00221 <span class="preprocessor"></span>    <span class="keyword">delete</span> <a class="code" href="classCFmiPcAppDlg.html#a3bbd3a1621fdc2f8bf0957a0c61b9505" title="Pointer to the Canned Response dialog, or NULL if no such dialog //! is displayed //!...">mCannedResponseDlg</a>;
<a name="l00222"></a>00222     <span class="keyword">delete</span> <a class="code" href="classCFmiPcAppDlg.html#a2d806a631fe69eae982ae915bad250ed" title="Pointer to the Driver ID and Status dialog, or NULL if no such dialog //! is displayed //!...">mDriverIdAndStatusDlg</a>;
<a name="l00223"></a>00223     <span class="keyword">delete</span> <a class="code" href="classCFmiPcAppDlg.html#a3a1cc35a4f59d87f299ab5d8e2dd3142" title="Pointer to the Canned Text Message dialog, or NULL if no such dialog //! is displayed //!...">mCannedTxtMsgDlg</a>;
<a name="l00224"></a>00224 <span class="preprocessor">#endif</span>
<a name="l00225"></a>00225 <span class="preprocessor"></span>
<a name="l00226"></a>00226 <span class="preprocessor">#if FMI_SUPPORT_A607</span>
<a name="l00227"></a>00227 <span class="preprocessor"></span>    <span class="keyword">delete</span> <a class="code" href="classCFmiPcAppDlg.html#ac257a6d3ea54f27c49fe48bd750072e1" title="Pointer to the Waypoints dialog, or NULL if no such dialog is displayed //!">mWaypointDlg</a>;
<a name="l00228"></a>00228 <span class="preprocessor">#endif</span>
<a name="l00229"></a>00229 <span class="preprocessor"></span>}
<a name="l00230"></a>00230 
<a name="l00231"></a>00231 <span class="comment">//----------------------------------------------------------------------</span>
<a name="l00234"></a>00234 <span class="comment"></span><span class="comment">//----------------------------------------------------------------------</span>
<a name="l00235"></a>00235 <span class="keywordtype">void</span> <a class="code" href="classCFmiPcAppDlg.html#af0009169b1ee29ec5e280eca45e2fe7f" title="Perform dialog data exchange and validation //!">CFmiPcAppDlg::DoDataExchange</a>
<a name="l00236"></a><a class="code" href="classCFmiPcAppDlg.html#af0009169b1ee29ec5e280eca45e2fe7f">00236</a>     (
<a name="l00237"></a>00237     CDataExchange * aDataExchange
<a name="l00238"></a>00238     )
<a name="l00239"></a>00239 {
<a name="l00240"></a>00240     CDialog::DoDataExchange( aDataExchange );
<a name="l00241"></a>00241     DDX_Check( aDataExchange, IDC_MAIN_CHK_PVT_ENABLE, mPvtChecked );
<a name="l00242"></a>00242     DDX_Text( aDataExchange, <a class="code" href="resource_8h.html#a2c5b3aec82c74af17646c52ea0041f7f">IDC_MAIN_TXT_ESN</a>, mUnitId );
<a name="l00243"></a>00243     DDX_Text( aDataExchange, <a class="code" href="resource_8h.html#a9fbef7ec05d879fa55089c87176c4fed">IDC_MAIN_TXT_PVT_GPS_FIX</a>, mGpsFix );
<a name="l00244"></a>00244     DDX_Text( aDataExchange, <a class="code" href="resource_8h.html#a771d0eb47da9964c6376db2b5965c778">IDC_MAIN_TXT_PVT_DATE</a>, mPvtDate );
<a name="l00245"></a>00245     DDX_Text( aDataExchange, <a class="code" href="resource_8h.html#a11021bd8e50dd98d79907649e34994f6">IDC_MAIN_TXT_PVT_TIME</a>, mPvtTime );
<a name="l00246"></a>00246     DDX_Text( aDataExchange, <a class="code" href="resource_8h.html#a78bafb9a82eb1e60f711cb970ad01e83">IDC_MAIN_TXT_PVT_LAT</a>, mPvtLatitude );
<a name="l00247"></a>00247     DDX_Text( aDataExchange, <a class="code" href="resource_8h.html#a636f501e32b90a13db7e87074d749cb4">IDC_MAIN_TXT_PVT_LON</a>, mPvtLongitude );
<a name="l00248"></a>00248     DDX_Text( aDataExchange, <a class="code" href="resource_8h.html#ac45f25c787dfde43402676d0bca44f41">IDC_MAIN_TXT_PVT_ALTITUDE</a>, mAltitude );
<a name="l00249"></a>00249     DDX_Text( aDataExchange, <a class="code" href="resource_8h.html#ade80f691456a4a3a661463fda949bf90">IDC_MAIN_TXT_PVT_EW_VEL</a>, mEastWestVelocity );
<a name="l00250"></a>00250     DDX_Text( aDataExchange, <a class="code" href="resource_8h.html#a26657c57033961106da675ba08b348fe">IDC_MAIN_TXT_PVT_NS_VEL</a>, mNorthSouthVelocity );
<a name="l00251"></a>00251     DDX_Text( aDataExchange, <a class="code" href="resource_8h.html#acf5ec91ac0020b0a084da3ca739000a1">IDC_MAIN_TXT_PVT_UD_VEL</a>, mUpDownVelocity );
<a name="l00252"></a>00252     DDX_Text( aDataExchange, <a class="code" href="resource_8h.html#a0a7a112d102c18213f8566d80192506d">IDC_MAIN_TXT_PVT_2D_VEL</a>, m2DVelocity );
<a name="l00253"></a>00253     DDX_Text( aDataExchange, <a class="code" href="resource_8h.html#aebd2de62a9d59c65a7d44b1aa0a85784">IDC_MAIN_TXT_PRODUCT_ID</a>, mProductId );
<a name="l00254"></a>00254     DDX_Text( aDataExchange, <a class="code" href="resource_8h.html#a05f248636735bdfe8f8e05d9dcb03102">IDC_MAIN_TXT_SW_VERSION</a>, mSoftwareVersion );
<a name="l00255"></a>00255 <span class="preprocessor">#if( FMI_SUPPORT_A602 )</span>
<a name="l00256"></a>00256 <span class="preprocessor"></span>    DDX_Text( aDataExchange, <a class="code" href="resource_8h.html#a19feebf800588a9bac975cdcfd6260e2">IDC_MAIN_EDIT_FMI_ID</a>, mPacketId );
<a name="l00257"></a>00257     DDX_Text( aDataExchange, <a class="code" href="resource_8h.html#a4f869c7e337e012724ef64dac74c46f5">IDC_MAIN_EDIT_FMI_DATA</a>, mPacketData );
<a name="l00258"></a>00258 <span class="preprocessor">#endif</span>
<a name="l00259"></a>00259 <span class="preprocessor"></span><span class="preprocessor">#if( FMI_SUPPORT_A603 )</span>
<a name="l00260"></a>00260 <span class="preprocessor"></span>    DDX_Check( aDataExchange, IDC_MAIN_CHK_ETA_AUTO_UPDATE, mAutoEtaChecked );
<a name="l00261"></a>00261     DDX_Text( aDataExchange, <a class="code" href="resource_8h.html#a60bd64705cf34664eda6debee0d90c4e">IDC_MAIN_TXT_ETA_TIME</a>, mEtaTime );
<a name="l00262"></a>00262     DDX_Text( aDataExchange, <a class="code" href="resource_8h.html#a1ff2b34a52cbf707642cb7cdf4c0152e">IDC_MAIN_TXT_ETA_DISTANCE</a>, mEtaDistance );
<a name="l00263"></a>00263     DDX_Text( aDataExchange, <a class="code" href="resource_8h.html#aa3f662ee4c715bfec3e37063549502f9">IDC_MAIN_TXT_ETA_LAT</a>, mEtaLatitude );
<a name="l00264"></a>00264     DDX_Text( aDataExchange, <a class="code" href="resource_8h.html#aeefeccd7b0e066ef217fffccdac07eb1">IDC_MAIN_TXT_ETA_LON</a>, mEtaLongitude );
<a name="l00265"></a>00265 <span class="preprocessor">#endif</span>
<a name="l00266"></a>00266 <span class="preprocessor"></span>}
<a name="l00267"></a>00267 
<a name="l00268"></a>00268 <span class="comment">//----------------------------------------------------------------------</span>
<a name="l00282"></a>00282 <span class="comment"></span><span class="comment">//----------------------------------------------------------------------</span>
<a name="l00283"></a><a class="code" href="classCFmiPcAppDlg.html#a14f0bf63c06fe1a7b0c533b63bc244ad">00283</a> BOOL <a class="code" href="classCFmiPcAppDlg.html#a14f0bf63c06fe1a7b0c533b63bc244ad" title="Initialize the dialog //!">CFmiPcAppDlg::OnInitDialog</a>()
<a name="l00284"></a>00284 {
<a name="l00285"></a>00285     <a class="code" href="classCFmiPcAppDlg.html#a14f0bf63c06fe1a7b0c533b63bc244ad" title="Initialize the dialog //!">CDialog::OnInitDialog</a>();
<a name="l00286"></a>00286 
<a name="l00287"></a>00287     <span class="comment">// Add &quot;About...&quot; menu item to system menu.</span>
<a name="l00288"></a>00288     <span class="comment">// IDM_ABOUTBOX must be in the system command range.</span>
<a name="l00289"></a>00289     ASSERT( ( <a class="code" href="resource_8h.html#a74b41adc6435c09e5393739d1ebeace4">IDM_ABOUTBOX</a> &amp; 0xFFF0 ) == <a class="code" href="resource_8h.html#a74b41adc6435c09e5393739d1ebeace4">IDM_ABOUTBOX</a> );
<a name="l00290"></a>00290     ASSERT( <a class="code" href="resource_8h.html#a74b41adc6435c09e5393739d1ebeace4">IDM_ABOUTBOX</a> &lt; 0xF000 );
<a name="l00291"></a>00291 
<a name="l00292"></a>00292     CMenu * pSysMenu = GetSystemMenu( FALSE );
<a name="l00293"></a>00293     <span class="keywordflow">if</span>( pSysMenu != NULL )
<a name="l00294"></a>00294     {
<a name="l00295"></a>00295         CString strAboutMenu;
<a name="l00296"></a>00296         strAboutMenu.LoadString( <a class="code" href="resource_8h.html#a912ee15244eed3e0f75c2fc1ef9719eb">IDS_ABOUTBOX</a> );
<a name="l00297"></a>00297         <span class="keywordflow">if</span>( !strAboutMenu.IsEmpty() )
<a name="l00298"></a>00298         {
<a name="l00299"></a>00299             pSysMenu-&gt;AppendMenu( MF_SEPARATOR );
<a name="l00300"></a>00300             pSysMenu-&gt;AppendMenu( MF_STRING, <a class="code" href="resource_8h.html#a74b41adc6435c09e5393739d1ebeace4">IDM_ABOUTBOX</a>, strAboutMenu );
<a name="l00301"></a>00301         }
<a name="l00302"></a>00302     }
<a name="l00303"></a>00303 
<a name="l00304"></a>00304     <span class="comment">// Set the icon for this dialog.  The framework does this automatically</span>
<a name="l00305"></a>00305     <span class="comment">//  when the application&#39;s main window is not a dialog</span>
<a name="l00306"></a>00306     SetIcon( <a class="code" href="classCFmiPcAppDlg.html#ab4dd30d1f38391be48139a547ab12299" title="Handle to the dialog&amp;#39;s icon.">mIconHandle</a>, <a class="code" href="garmin__types_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a> );            <span class="comment">// Set big icon</span>
<a name="l00307"></a>00307     SetIcon( <a class="code" href="classCFmiPcAppDlg.html#ab4dd30d1f38391be48139a547ab12299" title="Handle to the dialog&amp;#39;s icon.">mIconHandle</a>, FALSE );           <span class="comment">// Set small icon</span>
<a name="l00308"></a>00308 
<a name="l00309"></a>00309     <span class="comment">//used on the first timer cycle to send an enable to device</span>
<a name="l00310"></a>00310     <span class="comment">//this is done so the app pops up before stalling if there</span>
<a name="l00311"></a>00311     <span class="comment">//is no device to enable</span>
<a name="l00312"></a>00312     <a class="code" href="classCFmiPcAppDlg.html#a6fc1891112d5ecbc0338735f45bb4560" title="If TRUE, the user has selected a FmiApplicationLayer port.">mComPortSelected</a> = FALSE;
<a name="l00313"></a>00313 
<a name="l00314"></a>00314     <a class="code" href="classCFmiPcAppDlg.html#a1e13b88616fde95adac0cafacd990029" title="If TRUE, all timers should be ignored.">mIgnoreTimer</a> = FALSE;
<a name="l00315"></a>00315 
<a name="l00316"></a>00316     <a class="code" href="classCFmiPcAppDlg.html#a7d942bdbefdfbd295c117959a7ec3ba6" title="Initialize the list of product names.">initProductNames</a>();
<a name="l00317"></a>00317 
<a name="l00318"></a>00318     SetTimer( <a class="code" href="CFmiPcAppDlg_8cpp.html#ab1607f7a01655d3cce2eaef4fbdac704ac4d257c076288704c27fd18ec9a5a199">MAIN_TIMER_ID</a>, <a class="code" href="CFmiPcAppDlg_8cpp.html#a6283fe1131d09335ff08168b3020dc01" title="RX polling interval, in milliseconds.">MAIN_RX_TIMER_INTERVAL</a>, NULL );
<a name="l00319"></a>00319 
<a name="l00320"></a>00320     SetWindowPos( NULL, 120, 175, 0, 0, SWP_NOSIZE | SWP_NOZORDER );
<a name="l00321"></a>00321 
<a name="l00322"></a>00322 <span class="preprocessor">#if( !FMI_SUPPORT_A602 )</span>
<a name="l00323"></a>00323 <span class="preprocessor"></span>    CButton * enableButton = (CButton *)GetDlgItem( IDC_MAIN_BTN_SEND_ENABLE );
<a name="l00324"></a>00324     enableButton-&gt;SetWindowText( _T(<span class="stringliteral">&quot;Request PID/ESN&quot;</span>) );
<a name="l00325"></a>00325     GetDlgItem( <a class="code" href="resource_8h.html#a4a0c26f34ef3dc3d0bdf4b5997799c28">IDC_MAIN_GRP_FMI_PACKET</a> )-&gt;EnableWindow( FALSE );
<a name="l00326"></a>00326     GetDlgItem( <a class="code" href="resource_8h.html#a09eeae7232e31629d83d6b82aa0a344b">IDC_MAIN_LBL_FMI_ID</a> )-&gt;EnableWindow( FALSE );
<a name="l00327"></a>00327     GetDlgItem( <a class="code" href="resource_8h.html#a4c127542c01aa0b35c0da7235e7b7bbd">IDC_MAIN_LBL_FMI_DATA</a> )-&gt;EnableWindow( FALSE );
<a name="l00328"></a>00328     GetDlgItem( <a class="code" href="resource_8h.html#a19feebf800588a9bac975cdcfd6260e2">IDC_MAIN_EDIT_FMI_ID</a> )-&gt;EnableWindow( FALSE );
<a name="l00329"></a>00329     GetDlgItem( <a class="code" href="resource_8h.html#a4f869c7e337e012724ef64dac74c46f5">IDC_MAIN_EDIT_FMI_DATA</a> )-&gt;EnableWindow( FALSE );
<a name="l00330"></a>00330     GetDlgItem( IDC_MAIN_BTN_FMI_SEND )-&gt;EnableWindow( FALSE );
<a name="l00331"></a>00331 <span class="preprocessor">#endif</span>
<a name="l00332"></a>00332 <span class="preprocessor"></span>
<a name="l00333"></a>00333 <span class="preprocessor">#if( !FMI_SUPPORT_A603 )</span>
<a name="l00334"></a>00334 <span class="preprocessor"></span>    GetDlgItem( IDC_MAIN_BTN_DEL_DATA )-&gt;EnableWindow( FALSE );
<a name="l00335"></a>00335     GetDlgItem( IDC_MAIN_BTN_REQ_ETA )-&gt;EnableWindow( FALSE );
<a name="l00336"></a>00336     GetDlgItem( IDC_MAIN_BTN_CHG_AUTO_ARVL )-&gt;EnableWindow( FALSE );
<a name="l00337"></a>00337     GetDlgItem( IDC_MAIN_CHK_ETA_AUTO_UPDATE )-&gt;EnableWindow( FALSE );
<a name="l00338"></a>00338     GetDlgItem( <a class="code" href="resource_8h.html#a2ba80fba5f896e781a0d255da8ec3879">IDC_MAIN_GRP_ETA_DATA</a> )-&gt;EnableWindow( FALSE );
<a name="l00339"></a>00339     GetDlgItem( <a class="code" href="resource_8h.html#ae90b79e466e6a5d25b23cbf0b5dcdeb5">IDC_MAIN_LBL_ETA_TIME</a> )-&gt;EnableWindow( FALSE );
<a name="l00340"></a>00340     GetDlgItem( <a class="code" href="resource_8h.html#af474c09345a743d7292034240463e51e">IDC_MAIN_LBL_ETA_DISTANCE</a> )-&gt;EnableWindow( FALSE );
<a name="l00341"></a>00341     GetDlgItem( <a class="code" href="resource_8h.html#a130b0425846300f78d9bffa02c15d671">IDC_MAIN_LBL_ETA_LAT</a> )-&gt;EnableWindow( FALSE );
<a name="l00342"></a>00342     GetDlgItem( <a class="code" href="resource_8h.html#af6da5abb30bc2df29013b89dc276ba98">IDC_MAIN_LBL_ETA_LON</a> )-&gt;EnableWindow( FALSE );
<a name="l00343"></a>00343 <span class="preprocessor">#endif</span>
<a name="l00344"></a>00344 <span class="preprocessor"></span>
<a name="l00345"></a>00345 <span class="preprocessor">#if( !FMI_SUPPORT_A604 )</span>
<a name="l00346"></a>00346 <span class="preprocessor"></span>    <span class="comment">// Disable the controls specific to A604 support</span>
<a name="l00347"></a>00347     GetDlgItem( IDC_MAIN_BTN_GPI_FILE_TRANS )-&gt;EnableWindow( FALSE );
<a name="l00348"></a>00348     GetDlgItem( IDC_MAIN_BTN_CANNED_RESPONSES )-&gt;EnableWindow( FALSE );
<a name="l00349"></a>00349     GetDlgItem( IDC_MAIN_BTN_PING )-&gt;EnableWindow( FALSE );
<a name="l00350"></a>00350     GetDlgItem( IDC_MAIN_BTN_GPI_QUERY )-&gt;EnableWindow( FALSE );
<a name="l00351"></a>00351     GetDlgItem( IDC_MAIN_BTN_DRIVER_INFO )-&gt;EnableWindow( FALSE );
<a name="l00352"></a>00352     GetDlgItem( IDC_MAIN_BTN_CANNED_MESSAGES )-&gt;EnableWindow( FALSE );
<a name="l00353"></a>00353     GetDlgItem( IDC_MAIN_BTN_MSG_STATUS )-&gt;EnableWindow( FALSE );
<a name="l00354"></a>00354     GetDlgItem( IDC_MAIN_BTN_UI_TXT_CHG )-&gt;EnableWindow( FALSE );
<a name="l00355"></a>00355     GetDlgItem( IDC_MAIN_BTN_MSG_THROTTLING )-&gt;EnableWindow( FALSE );
<a name="l00356"></a>00356 <span class="preprocessor">#endif</span>
<a name="l00357"></a>00357 <span class="preprocessor"></span>
<a name="l00358"></a>00358 <span class="preprocessor">#if( !FMI_SUPPORT_A606 )</span>
<a name="l00359"></a>00359 <span class="preprocessor"></span>    <span class="comment">// Disable the controls specific to A606 support</span>
<a name="l00360"></a>00360     GetDlgItem( IDC_MAIN_BTN_SET_SAFE_MODE )-&gt;EnableWindow( FALSE );
<a name="l00361"></a>00361 <span class="preprocessor">#endif</span>
<a name="l00362"></a>00362 <span class="preprocessor"></span>
<a name="l00363"></a>00363 <span class="preprocessor">#if( !FMI_SUPPORT_A607 )</span>
<a name="l00364"></a>00364 <span class="preprocessor"></span>    GetDlgItem( <a class="code" href="resource_8h.html#a0a65ce1e8663674e21e1767998e37e5c">IDC_MAIN_BTN_MSG_DELETE</a> )-&gt;EnableWindow( FALSE );
<a name="l00365"></a>00365     GetDlgItem( IDC_MAIN_BTN_WAYPOINTS )-&gt;EnableWindow( FALSE );
<a name="l00366"></a>00366 <span class="preprocessor">#endif</span>
<a name="l00367"></a>00367 <span class="preprocessor"></span>
<a name="l00368"></a>00368     <span class="keywordflow">switch</span>( <a class="code" href="fmi_8h.html#a3bfdce0aa23d7fe3cf68dd987a4d0de1">FMI_PROTOCOL_LEVEL</a> )
<a name="l00369"></a>00369     {
<a name="l00370"></a>00370     <span class="keywordflow">case</span> 0:
<a name="l00371"></a>00371         this-&gt;SetWindowText( _T(<span class="stringliteral">&quot;Fleet Management Controller - Legacy Support Mode&quot;</span>) );
<a name="l00372"></a>00372         <span class="keywordflow">break</span>;
<a name="l00373"></a>00373     <span class="keywordflow">case</span> 602:
<a name="l00374"></a>00374         this-&gt;SetWindowText( _T(<span class="stringliteral">&quot;Fleet Management Controller - A602 Support Mode&quot;</span>) );
<a name="l00375"></a>00375         <span class="keywordflow">break</span>;
<a name="l00376"></a>00376     <span class="keywordflow">case</span> 603:
<a name="l00377"></a>00377         this-&gt;SetWindowText( _T(<span class="stringliteral">&quot;Fleet Management Controller - A603 Support Mode&quot;</span>) );
<a name="l00378"></a>00378         <span class="keywordflow">break</span>;
<a name="l00379"></a>00379     <span class="keywordflow">case</span> 604:
<a name="l00380"></a>00380         this-&gt;SetWindowText( _T(<span class="stringliteral">&quot;Fleet Management Controller - A604 Support Mode&quot;</span>) );
<a name="l00381"></a>00381         <span class="keywordflow">break</span>;
<a name="l00382"></a>00382     <span class="keywordflow">case</span> 605:
<a name="l00383"></a>00383         this-&gt;SetWindowText( _T(<span class="stringliteral">&quot;Fleet Management Controller - A605 Support Mode&quot;</span>) );
<a name="l00384"></a>00384         <span class="keywordflow">break</span>;
<a name="l00385"></a>00385     <span class="keywordflow">case</span> 607:
<a name="l00386"></a>00386         this-&gt;SetWindowText( _T(<span class="stringliteral">&quot;Fleet Management Controller - A607 Support Mode&quot;</span>) );
<a name="l00387"></a>00387         <span class="keywordflow">break</span>;
<a name="l00388"></a>00388     <span class="keywordflow">case</span> 608:
<a name="l00389"></a>00389         this-&gt;SetWindowText( _T(<span class="stringliteral">&quot;Fleet Management Controller&quot;</span>) );
<a name="l00390"></a>00390         <span class="keywordflow">break</span>;
<a name="l00391"></a>00391     <span class="keywordflow">default</span>:
<a name="l00392"></a>00392         this-&gt;SetWindowText( _T(<span class="stringliteral">&quot;Fleet Management Controller - Unknown Protocol Support Level&quot;</span>) );
<a name="l00393"></a>00393         <span class="keywordflow">break</span>;
<a name="l00394"></a>00394     }
<a name="l00395"></a>00395 
<a name="l00396"></a>00396     <a class="code" href="classEvent.html#a3671f7a77ec1bbdb6c6e0681431c5816" title="Posts a message to all windows that have registered to //! get events //!">Event::post</a>( EVENT_MAIN_DLG_INIT );
<a name="l00397"></a>00397     <span class="keywordflow">return</span> TRUE;  <span class="comment">// return TRUE  unless you set the focus to a control</span>
<a name="l00398"></a>00398 }
<a name="l00399"></a>00399 
<a name="l00400"></a>00400 <span class="comment">//----------------------------------------------------------------------</span>
<a name="l00405"></a>00405 <span class="comment"></span><span class="comment">//----------------------------------------------------------------------</span>
<a name="l00406"></a><a class="code" href="classCFmiPcAppDlg.html#ac13c1a659af6f39c2f0713de54203a4b">00406</a> <span class="keywordtype">void</span> <a class="code" href="classCFmiPcAppDlg.html#ac13c1a659af6f39c2f0713de54203a4b" title="Click handler for the Enable PVT check box //!">CFmiPcAppDlg::OnBnClickedCheckPVT</a>()
<a name="l00407"></a>00407 {
<a name="l00408"></a>00408     UpdateData( <a class="code" href="garmin__types_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a> );
<a name="l00409"></a>00409     <span class="keywordflow">if</span>( <a class="code" href="classCFmiPcAppDlg.html#abd59a923e1784e61c26a71bdd7d49168" title="If true, the Enable PVT check box is selected.">mPvtChecked</a> )
<a name="l00410"></a>00410     {
<a name="l00411"></a>00411         <a class="code" href="classCFmiPcAppDlg.html#aead4f57d93a41526b3614d153752ae44" title="The FmiApplicationLayer object used to communicate with the client.">mCom</a>.<a class="code" href="classFmiApplicationLayer.html#aa4f1f84860dfa9b32d43997564341522" title="Send an Enable PVT or Disable PVT command. //!">sendEnablePvtCommand</a>( <a class="code" href="garmin__types_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a> );
<a name="l00412"></a>00412     }
<a name="l00413"></a>00413     <span class="keywordflow">else</span>
<a name="l00414"></a>00414     {
<a name="l00415"></a>00415         <a class="code" href="classCFmiPcAppDlg.html#aead4f57d93a41526b3614d153752ae44" title="The FmiApplicationLayer object used to communicate with the client.">mCom</a>.<a class="code" href="classFmiApplicationLayer.html#aa4f1f84860dfa9b32d43997564341522" title="Send an Enable PVT or Disable PVT command. //!">sendEnablePvtCommand</a>( FALSE );
<a name="l00416"></a>00416 
<a name="l00417"></a>00417         <a class="code" href="classCFmiPcAppDlg.html#a1c1c0dabf45aa5324224df3a2b0a23e6" title="Contents of PVT text box: GPS fix.">mGpsFix</a>.Format( _T(<span class="stringliteral">&quot;&quot;</span>) );
<a name="l00418"></a>00418         <a class="code" href="classCFmiPcAppDlg.html#ad0f594a8f886b1358c89b9bbcabce7b7" title="Contents of PVT text box: Date.">mPvtDate</a>.Format( _T(<span class="stringliteral">&quot;&quot;</span>) );
<a name="l00419"></a>00419         <a class="code" href="classCFmiPcAppDlg.html#a40e3677dbfa1dfd7d56a3661929a212a" title="Contents of PVT text box: Time.">mPvtTime</a>.Format( _T(<span class="stringliteral">&quot;&quot;</span>) );
<a name="l00420"></a>00420         <a class="code" href="classCFmiPcAppDlg.html#a931ea9240867fc3881fcdd683c19d1f0" title="Contents of PVT text box: Latitude.">mPvtLatitude</a>.Format( _T(<span class="stringliteral">&quot;&quot;</span>) );
<a name="l00421"></a>00421         <a class="code" href="classCFmiPcAppDlg.html#a6a349e238a90c7b0129a2bf24e0abb12" title="Contents of PVT text box: Longitude.">mPvtLongitude</a>.Format( _T(<span class="stringliteral">&quot;&quot;</span>) );
<a name="l00422"></a>00422         <a class="code" href="classCFmiPcAppDlg.html#a7ec385ee46a81932267dae9d3805ca11" title="Contents of PVT text box: Altitude.">mAltitude</a>.Format( _T(<span class="stringliteral">&quot;&quot;</span>) );
<a name="l00423"></a>00423         <a class="code" href="classCFmiPcAppDlg.html#a7f68966d365fe20e82847ee94f9d1899" title="Contents of PVT text box: North-South velocity.">mNorthSouthVelocity</a>.Format( _T(<span class="stringliteral">&quot;&quot;</span>) );
<a name="l00424"></a>00424         <a class="code" href="classCFmiPcAppDlg.html#aeaa2830853f74167141384e55277f181" title="Contents of PVT text box: East-West velocity.">mEastWestVelocity</a>.Format( _T(<span class="stringliteral">&quot;&quot;</span>) );
<a name="l00425"></a>00425         <a class="code" href="classCFmiPcAppDlg.html#af623db169439f79f78da1ecbc7cc867a" title="Contents of PVT text box: Up-Down velocity.">mUpDownVelocity</a>.Format( _T(<span class="stringliteral">&quot;&quot;</span>) );
<a name="l00426"></a>00426         <a class="code" href="classCFmiPcAppDlg.html#a450d5b399cdf4206672ca91aa281d5d9" title="Contents of PVT text box: 2-D velocity.">m2DVelocity</a>.Format( _T(<span class="stringliteral">&quot;&quot;</span>) );
<a name="l00427"></a>00427         UpdateData( FALSE );
<a name="l00428"></a>00428     }
<a name="l00429"></a>00429 }
<a name="l00430"></a>00430 
<a name="l00431"></a>00431 <span class="comment">//----------------------------------------------------------------------</span>
<a name="l00435"></a>00435 <span class="comment"></span><span class="comment">//----------------------------------------------------------------------</span>
<a name="l00436"></a><a class="code" href="classCFmiPcAppDlg.html#ae2c4cae23aa3edc575dbbae7d8d758a2">00436</a> <span class="keywordtype">void</span> <a class="code" href="classCFmiPcAppDlg.html#ae2c4cae23aa3edc575dbbae7d8d758a2" title="Click handler for the Change Com Port button //!">CFmiPcAppDlg::OnBnClickedChgComPort</a>()
<a name="l00437"></a>00437 {
<a name="l00438"></a>00438     <span class="keywordflow">if</span>( <a class="code" href="classCFmiPcAppDlg.html#a18cfe697feb03f6ae8f9f80f61b0b555" title="Show the Select Comm Port dialog. //!">selectComPort</a>() )
<a name="l00439"></a>00439     {
<a name="l00440"></a>00440         <a class="code" href="classCFmiPcAppDlg.html#abe24a8da234922d273f48f6185205637" title="Click handler for the Send Enable button. //!">OnBnClickedEnable</a>();
<a name="l00441"></a>00441     }
<a name="l00442"></a>00442 }
<a name="l00443"></a>00443 
<a name="l00444"></a>00444 <span class="comment">//----------------------------------------------------------------------</span>
<a name="l00456"></a>00456 <span class="comment"></span><span class="comment">//----------------------------------------------------------------------</span>
<a name="l00457"></a><a class="code" href="classCFmiPcAppDlg.html#abe24a8da234922d273f48f6185205637">00457</a> <span class="keywordtype">void</span> <a class="code" href="classCFmiPcAppDlg.html#abe24a8da234922d273f48f6185205637" title="Click handler for the Send Enable button. //!">CFmiPcAppDlg::OnBnClickedEnable</a>()
<a name="l00458"></a>00458 {
<a name="l00459"></a>00459 <span class="preprocessor">#if( FMI_SUPPORT_A607 )</span>
<a name="l00460"></a>00460 <span class="preprocessor"></span>    <a class="code" href="classCFeatureDlg.html" title="FMI Feature (enable) modal dialog //!">CFeatureDlg</a> featureDlg( <span class="keyword">this</span>, <a class="code" href="classCFmiPcAppDlg.html#aead4f57d93a41526b3614d153752ae44" title="The FmiApplicationLayer object used to communicate with the client.">mCom</a> );
<a name="l00461"></a>00461     <span class="keywordflow">if</span>( IDOK != featureDlg.DoModal() )
<a name="l00462"></a>00462         {
<a name="l00463"></a>00463         <span class="keywordflow">return</span>;
<a name="l00464"></a>00464         }
<a name="l00465"></a>00465 <span class="preprocessor">#elif( FMI_SUPPORT_A602 )</span>
<a name="l00466"></a>00466 <span class="preprocessor"></span>    <a class="code" href="classCFmiPcAppDlg.html#aead4f57d93a41526b3614d153752ae44" title="The FmiApplicationLayer object used to communicate with the client.">mCom</a>.<a class="code" href="classFmiApplicationLayer.html#a70985213d38278b36ceb67d772c6ed36" title="Transmit an FMI Enable packet, and clear any error state. //!">sendEnable</a>();
<a name="l00467"></a>00467 <span class="preprocessor">#endif</span>
<a name="l00468"></a>00468 <span class="preprocessor"></span>
<a name="l00469"></a>00469 <span class="preprocessor">#if( !( MINIMAL_ENABLE ) )</span>
<a name="l00470"></a>00470 <span class="preprocessor"></span>
<a name="l00471"></a>00471 <span class="preprocessor">#if( FMI_SUPPORT_A602 )</span>
<a name="l00472"></a>00472 <span class="preprocessor"></span>    <a class="code" href="classCFmiPcAppDlg.html#aead4f57d93a41526b3614d153752ae44" title="The FmiApplicationLayer object used to communicate with the client.">mCom</a>.<a class="code" href="classFmiApplicationLayer.html#ab740b092d6e1aaa994a649d76a069253" title="Send an FMI Product ID request. //!">sendProductRequest</a>();
<a name="l00473"></a>00473 <span class="preprocessor">#else</span>
<a name="l00474"></a>00474 <span class="preprocessor"></span>    <a class="code" href="classCFmiPcAppDlg.html#aead4f57d93a41526b3614d153752ae44" title="The FmiApplicationLayer object used to communicate with the client.">mCom</a>.sendLegacyProductRequest();
<a name="l00475"></a>00475 <span class="preprocessor">#endif</span>
<a name="l00476"></a>00476 <span class="preprocessor"></span>
<a name="l00477"></a>00477     <a class="code" href="classCFmiPcAppDlg.html#aead4f57d93a41526b3614d153752ae44" title="The FmiApplicationLayer object used to communicate with the client.">mCom</a>.<a class="code" href="classFmiApplicationLayer.html#a9bfe897cd504ff28bf1fea9c45e6111c" title="Request the Unit ID (ESN) from the client.">sendUnitIdRequest</a>();
<a name="l00478"></a>00478 
<a name="l00479"></a>00479 <span class="preprocessor">#if( FMI_SUPPORT_A603 )</span>
<a name="l00480"></a>00480 <span class="preprocessor"></span>    <span class="comment">//every time we enable the client, we must refresh all stops</span>
<a name="l00481"></a>00481     <span class="comment">//since the client can delete stops and change status without</span>
<a name="l00482"></a>00482     <span class="comment">//the servers knowledge</span>
<a name="l00483"></a>00483     <a class="code" href="classFileBackedMap.html" title="Map whose contents are also saved to a file. //!">FileBackedMap&lt;StopListItem&gt;::const_iterator</a> iter = <a class="code" href="classCFmiPcAppDlg.html#aead4f57d93a41526b3614d153752ae44" title="The FmiApplicationLayer object used to communicate with the client.">mCom</a>.<a class="code" href="classFmiApplicationLayer.html#a16cff1b5e13bf0ef80c4f36cc7153289" title="Map of unique ID to stop details for all A603 stops on the client //!">mA603Stops</a>.<a class="code" href="classFileBackedMap.html#a420dcfaec5bb80d2e8e23062616debdb" title="Iterator positioned at the first element in the map.">begin</a>();
<a name="l00484"></a>00484     <span class="keywordflow">for</span>( ; iter != <a class="code" href="classCFmiPcAppDlg.html#aead4f57d93a41526b3614d153752ae44" title="The FmiApplicationLayer object used to communicate with the client.">mCom</a>.<a class="code" href="classFmiApplicationLayer.html#a16cff1b5e13bf0ef80c4f36cc7153289" title="Map of unique ID to stop details for all A603 stops on the client //!">mA603Stops</a>.<a class="code" href="classFileBackedMap.html#a9eb9904a7bdd65c02dd0886f4fb30ccd" title="Iterator positioned after the last element in the map.">end</a>(); iter++ )
<a name="l00485"></a>00485     {
<a name="l00486"></a>00486         <a class="code" href="classCFmiPcAppDlg.html#aead4f57d93a41526b3614d153752ae44" title="The FmiApplicationLayer object used to communicate with the client.">mCom</a>.<a class="code" href="classFmiApplicationLayer.html#a5f229176e433355455da37071c04dfe4" title="Initiate the Stop Status protocol to update an A603 stop. //!">sendStopStatusRequest</a>( iter-&gt;first, <a class="code" href="fmi_8h.html#a6d34b6f06b323cebd607b6adfe874b3fa5eb78ffcfc40677e52ce9089d8c83772">REQUEST_STOP_STATUS</a> );
<a name="l00487"></a>00487     }
<a name="l00488"></a>00488     <a class="code" href="classCFmiPcAppDlg.html#ae331fc9540d7e9efd02c82728c5fbeeb" title="If TRUE, the Auto ETA Request text box is checked //!">mAutoEtaChecked</a> = TRUE;
<a name="l00489"></a>00489     <a class="code" href="classCFmiPcAppDlg.html#aa23c5d80ed397d94f1e9466543089681" title="Event handler for Auto ETA Request check box. //!">OnBnClickedAutoETA</a>();
<a name="l00490"></a>00490 <span class="preprocessor">#endif // FMI_SUPPORT_A603</span>
<a name="l00491"></a>00491 <span class="preprocessor"></span>
<a name="l00492"></a>00492     <a class="code" href="classCFmiPcAppDlg.html#abd59a923e1784e61c26a71bdd7d49168" title="If true, the Enable PVT check box is selected.">mPvtChecked</a> = TRUE;
<a name="l00493"></a>00493     UpdateData( FALSE );
<a name="l00494"></a>00494     <a class="code" href="classCFmiPcAppDlg.html#ac13c1a659af6f39c2f0713de54203a4b" title="Click handler for the Enable PVT check box //!">OnBnClickedCheckPVT</a>();
<a name="l00495"></a>00495 
<a name="l00496"></a>00496 <span class="preprocessor">#endif // !( MINIMAL_ENABLE )</span>
<a name="l00497"></a>00497 <span class="preprocessor"></span>}
<a name="l00498"></a>00498 
<a name="l00499"></a>00499 <span class="comment">//----------------------------------------------------------------------</span>
<a name="l00503"></a>00503 <span class="comment"></span><span class="comment">//----------------------------------------------------------------------</span>
<a name="l00504"></a><a class="code" href="classCFmiPcAppDlg.html#aa2077a5535ee659b7f18bff4e881ea40">00504</a> <span class="keywordtype">void</span> <a class="code" href="classCFmiPcAppDlg.html#aa2077a5535ee659b7f18bff4e881ea40" title="Click handler for the Manage Stops button. //!">CFmiPcAppDlg::OnBnClickedManageStops</a>()
<a name="l00505"></a>00505 {
<a name="l00506"></a>00506     <span class="comment">//we use a save file to keep track of stops when the client gets disconnected</span>
<a name="l00507"></a>00507     <span class="comment">//from the server--everything works fine if no stops are deleted; however, we</span>
<a name="l00508"></a>00508     <span class="comment">//have to assume some are.  This requires 2 waves of updates.  The first wave</span>
<a name="l00509"></a>00509     <span class="comment">//is sent when FMI is enabled.  All updates are ignored except deleted stop updates.</span>
<a name="l00510"></a>00510     <span class="comment">//Once all delete stops are removed, we can continue as normal and send a second</span>
<a name="l00511"></a>00511     <span class="comment">//wave of updates when the user wants to view stops (now)</span>
<a name="l00512"></a>00512     <span class="keywordflow">if</span>( !<a class="code" href="classCFmiPcAppDlg.html#aead4f57d93a41526b3614d153752ae44" title="The FmiApplicationLayer object used to communicate with the client.">mCom</a>.<a class="code" href="classFmiApplicationLayer.html#af5689631eaffb347c3397e49ed9939f1" title="If TRUE, the stop list has been initialized.">mStopListInitialized</a> )
<a name="l00513"></a>00513         <a class="code" href="classCFmiPcAppDlg.html#a330175486e6ca485e8dc2028accc84f7" title="Initialize the stop list. //!">initStopList</a>();
<a name="l00514"></a>00514 
<a name="l00515"></a>00515     <span class="keyword">delete</span> <a class="code" href="classCFmiPcAppDlg.html#a54fe5a3c803333ac0485b9e43f76bf2c" title="Pointer to the stop list dialog, or NULL if the dialog is not open.">mStopListDlg</a>;
<a name="l00516"></a>00516     <a class="code" href="classCFmiPcAppDlg.html#a54fe5a3c803333ac0485b9e43f76bf2c" title="Pointer to the stop list dialog, or NULL if the dialog is not open.">mStopListDlg</a> = <span class="keyword">new</span> <a class="code" href="classCStopListDlg.html" title="Modeless dialog allowing the user to manage the A603 stops //! on the client device. //!">CStopListDlg</a>( <span class="keyword">this</span>, <a class="code" href="classCFmiPcAppDlg.html#aead4f57d93a41526b3614d153752ae44" title="The FmiApplicationLayer object used to communicate with the client.">mCom</a> );
<a name="l00517"></a>00517     <a class="code" href="classCFmiPcAppDlg.html#a54fe5a3c803333ac0485b9e43f76bf2c" title="Pointer to the stop list dialog, or NULL if the dialog is not open.">mStopListDlg</a>-&gt;Create( <a class="code" href="resource_8h.html#a8b4e8a74dd05d234c1fae067f65525cc">IDD_STOP_LIST</a> );
<a name="l00518"></a>00518     <a class="code" href="classCFmiPcAppDlg.html#a54fe5a3c803333ac0485b9e43f76bf2c" title="Pointer to the stop list dialog, or NULL if the dialog is not open.">mStopListDlg</a>-&gt;ShowWindow( SW_SHOW );
<a name="l00519"></a>00519     GetDlgItem( IDC_MAIN_BTN_VIEW_STOPS )-&gt;EnableWindow( FALSE );
<a name="l00520"></a>00520 }
<a name="l00521"></a>00521 
<a name="l00522"></a>00522 <span class="preprocessor">#if FMI_SUPPORT_A607</span>
<a name="l00523"></a>00523 <span class="preprocessor"></span><span class="comment">//----------------------------------------------------------------------</span>
<a name="l00529"></a>00529 <span class="comment"></span><span class="comment">//----------------------------------------------------------------------</span>
<a name="l00530"></a><a class="code" href="classCFmiPcAppDlg.html#a00223fc6a57bdbcc613c9f7bc165f1a7">00530</a> afx_msg <span class="keywordtype">void</span> <a class="code" href="classCFmiPcAppDlg.html#a00223fc6a57bdbcc613c9f7bc165f1a7" title="Click handler for the Waypoints button. //!">CFmiPcAppDlg::OnBnClickedWaypoints</a>()
<a name="l00531"></a>00531 {
<a name="l00532"></a>00532     <span class="keyword">delete</span> <a class="code" href="classCFmiPcAppDlg.html#ac257a6d3ea54f27c49fe48bd750072e1" title="Pointer to the Waypoints dialog, or NULL if no such dialog is displayed //!">mWaypointDlg</a>;
<a name="l00533"></a>00533     <a class="code" href="classCFmiPcAppDlg.html#ac257a6d3ea54f27c49fe48bd750072e1" title="Pointer to the Waypoints dialog, or NULL if no such dialog is displayed //!">mWaypointDlg</a> = <span class="keyword">new</span> <a class="code" href="classCWaypointDlg.html" title="Modeless dialog allowing the user to manage waypoints. //!">CWaypointDlg</a>( <span class="keyword">this</span>, <a class="code" href="classCFmiPcAppDlg.html#aead4f57d93a41526b3614d153752ae44" title="The FmiApplicationLayer object used to communicate with the client.">mCom</a> );
<a name="l00534"></a>00534     <a class="code" href="classCFmiPcAppDlg.html#ac257a6d3ea54f27c49fe48bd750072e1" title="Pointer to the Waypoints dialog, or NULL if no such dialog is displayed //!">mWaypointDlg</a>-&gt;Create( <a class="code" href="resource_8h.html#a1af73b15fffd767c8a190b124586b92d">IDD_WAYPOINT</a> );
<a name="l00535"></a>00535     <a class="code" href="classCFmiPcAppDlg.html#ac257a6d3ea54f27c49fe48bd750072e1" title="Pointer to the Waypoints dialog, or NULL if no such dialog is displayed //!">mWaypointDlg</a>-&gt;ShowWindow( SW_SHOW );
<a name="l00536"></a>00536     GetDlgItem( IDC_MAIN_BTN_WAYPOINTS )-&gt;EnableWindow( FALSE );
<a name="l00537"></a>00537 }
<a name="l00538"></a>00538 <span class="preprocessor">#endif</span>
<a name="l00539"></a>00539 <span class="preprocessor"></span>
<a name="l00540"></a>00540 <span class="comment">//----------------------------------------------------------------------</span>
<a name="l00542"></a>00542 <span class="comment"></span><span class="comment">//----------------------------------------------------------------------</span>
<a name="l00543"></a><a class="code" href="classCFmiPcAppDlg.html#ae8248a8a6bfad4077e9cf9c33eb6d560">00543</a> <span class="keywordtype">void</span> <a class="code" href="classCFmiPcAppDlg.html#ae8248a8a6bfad4077e9cf9c33eb6d560" title="Click handler for the OK button. Close the app.">CFmiPcAppDlg::OnBnClickedOk</a>()
<a name="l00544"></a>00544 {
<a name="l00545"></a>00545     OnOK();
<a name="l00546"></a>00546 }
<a name="l00547"></a>00547 
<a name="l00548"></a>00548 <span class="comment">//----------------------------------------------------------------------</span>
<a name="l00552"></a>00552 <span class="comment"></span><span class="comment">//----------------------------------------------------------------------</span>
<a name="l00553"></a><a class="code" href="classCFmiPcAppDlg.html#ae3fd0ad0f4e1616dbec3ee8d3235e19e">00553</a> <span class="keywordtype">void</span> <a class="code" href="classCFmiPcAppDlg.html#ae3fd0ad0f4e1616dbec3ee8d3235e19e" title="Click handler for the Send Text Message button //!">CFmiPcAppDlg::OnBnClickedTxt</a>()
<a name="l00554"></a>00554 {
<a name="l00555"></a>00555     <a class="code" href="classCTxtMsgNewDlg.html" title="Modal dialog allowing the user to send a text message to the //! client. //!">CTxtMsgNewDlg</a> dlg( <span class="keyword">this</span>, <a class="code" href="classCFmiPcAppDlg.html#aead4f57d93a41526b3614d153752ae44" title="The FmiApplicationLayer object used to communicate with the client.">mCom</a> );
<a name="l00556"></a>00556     dlg.DoModal();
<a name="l00557"></a>00557 }
<a name="l00558"></a>00558 
<a name="l00559"></a>00559 <span class="comment">//----------------------------------------------------------------------</span>
<a name="l00564"></a>00564 <span class="comment"></span><span class="comment">//----------------------------------------------------------------------</span>
<a name="l00565"></a><a class="code" href="classCFmiPcAppDlg.html#a826db34ae08a131a151b64ba54455560">00565</a> <span class="keywordtype">void</span> <a class="code" href="classCFmiPcAppDlg.html#a826db34ae08a131a151b64ba54455560" title="Click handler for the View Packet Log button. //!">CFmiPcAppDlg::OnBnClickedViewlog</a>()
<a name="l00566"></a>00566 {
<a name="l00567"></a>00567     <a class="code" href="classCFmiPcAppDlg.html#ac03ee4ee9c5d4d9793439f6e1f3b0153" title="Display the log viewer. //!">OnViewlog</a>();
<a name="l00568"></a>00568 }
<a name="l00569"></a>00569 
<a name="l00570"></a>00570 <span class="comment">//----------------------------------------------------------------------</span>
<a name="l00577"></a>00577 <span class="comment"></span><span class="comment">//----------------------------------------------------------------------</span>
<a name="l00578"></a><a class="code" href="classCFmiPcAppDlg.html#a9162368318a41d934be71531b79b7e79">00578</a> afx_msg LRESULT <a class="code" href="classCFmiPcAppDlg.html#a9162368318a41d934be71531b79b7e79" title="Display the Com Time Out error dialog. //!">CFmiPcAppDlg::OnEventCommTimeout</a>( WPARAM, LPARAM )
<a name="l00579"></a>00579 {
<a name="l00580"></a>00580     <span class="keyword">delete</span> <a class="code" href="classCFmiPcAppDlg.html#a5387d032a3bc016f1ae55ddb9384083d" title="Pointer to the comm error dialog, or NULL if the dialog is not open.">mCommErrorDlg</a>;
<a name="l00581"></a>00581     <a class="code" href="classCFmiPcAppDlg.html#a5387d032a3bc016f1ae55ddb9384083d" title="Pointer to the comm error dialog, or NULL if the dialog is not open.">mCommErrorDlg</a> = <span class="keyword">new</span> <a class="code" href="classCCommErrorDlg.html" title="Modal dialog displaying a communication error. //!">CCommErrorDlg</a>( _T(<span class="stringliteral">&quot;Communication Time Out!  Please check all connections.&quot;</span>), <a class="code" href="garmin__types_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>, <span class="keyword">this</span>, <a class="code" href="classCFmiPcAppDlg.html#aead4f57d93a41526b3614d153752ae44" title="The FmiApplicationLayer object used to communicate with the client.">mCom</a> );
<a name="l00582"></a>00582     <a class="code" href="classCFmiPcAppDlg.html#a5387d032a3bc016f1ae55ddb9384083d" title="Pointer to the comm error dialog, or NULL if the dialog is not open.">mCommErrorDlg</a>-&gt;Create( <a class="code" href="resource_8h.html#a38ce9d00c4e25ba8cf9507eda5a54d40">IDD_ERROR</a> );
<a name="l00583"></a>00583     <a class="code" href="classCFmiPcAppDlg.html#a5387d032a3bc016f1ae55ddb9384083d" title="Pointer to the comm error dialog, or NULL if the dialog is not open.">mCommErrorDlg</a>-&gt;ShowWindow( SW_SHOW );
<a name="l00584"></a>00584 
<a name="l00585"></a>00585     <span class="keywordflow">return</span> 0;
<a name="l00586"></a>00586 }
<a name="l00587"></a>00587 
<a name="l00588"></a>00588 <span class="comment">//----------------------------------------------------------------------</span>
<a name="l00591"></a>00591 <span class="comment"></span><span class="comment">//----------------------------------------------------------------------</span>
<a name="l00592"></a><a class="code" href="classCFmiPcAppDlg.html#a88e9bcf0c2c375aca623031e214ebc44">00592</a> afx_msg LRESULT <a class="code" href="classCFmiPcAppDlg.html#a88e9bcf0c2c375aca623031e214ebc44" title="Handle the Comm Error Dlg Closed event. //!">CFmiPcAppDlg::OnEventCommErrorDlgClosed</a>( WPARAM, LPARAM )
<a name="l00593"></a>00593 {
<a name="l00594"></a>00594     <span class="keyword">delete</span> <a class="code" href="classCFmiPcAppDlg.html#a5387d032a3bc016f1ae55ddb9384083d" title="Pointer to the comm error dialog, or NULL if the dialog is not open.">mCommErrorDlg</a>;
<a name="l00595"></a>00595     <a class="code" href="classCFmiPcAppDlg.html#a5387d032a3bc016f1ae55ddb9384083d" title="Pointer to the comm error dialog, or NULL if the dialog is not open.">mCommErrorDlg</a> = NULL;
<a name="l00596"></a>00596 
<a name="l00597"></a>00597     <span class="keywordflow">return</span> 0;
<a name="l00598"></a>00598 }
<a name="l00599"></a>00599 
<a name="l00600"></a>00600 <span class="comment">//----------------------------------------------------------------------</span>
<a name="l00604"></a>00604 <span class="comment"></span><span class="comment">//----------------------------------------------------------------------</span>
<a name="l00605"></a><a class="code" href="classCFmiPcAppDlg.html#a9b1e66d9f29a780c1642f634f6381aa8">00605</a> afx_msg LRESULT <a class="code" href="classCFmiPcAppDlg.html#a9b1e66d9f29a780c1642f634f6381aa8" title="Handler for the Unit ID (ESN) Received event from Com. //!">CFmiPcAppDlg::OnEventEsnReceived</a>( WPARAM, LPARAM )
<a name="l00606"></a>00606 {
<a name="l00607"></a>00607     TCHAR unitId[11];
<a name="l00608"></a>00608 
<a name="l00609"></a>00609     UpdateData( <a class="code" href="garmin__types_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a> );
<a name="l00610"></a>00610     MultiByteToWideChar( <a class="code" href="classCFmiPcAppDlg.html#aead4f57d93a41526b3614d153752ae44" title="The FmiApplicationLayer object used to communicate with the client.">mCom</a>.<a class="code" href="classFmiApplicationLayer.html#aa8bda2692621f9603e6a2b927a944e56" title="Code page used for encoding of text fields when communicating //! with the client.">mClientCodepage</a>, 0, <a class="code" href="classCFmiPcAppDlg.html#aead4f57d93a41526b3614d153752ae44" title="The FmiApplicationLayer object used to communicate with the client.">mCom</a>.<a class="code" href="classFmiApplicationLayer.html#ab9486bab50f74c138fe5cadcb73c93e1" title="Null-terminated ASCII string containing the Unit ID (ESN) of the //! client.">mClientUnitId</a>, -1, unitId, 11 );
<a name="l00611"></a>00611     unitId[10] = <span class="charliteral">&#39;\0&#39;</span>;
<a name="l00612"></a>00612     <a class="code" href="classCFmiPcAppDlg.html#a5e2980deaa15e06013cf9727b7ee0361" title="Contents of the Unit ID (ESN) text box.">mUnitId</a>.Format( _T(<span class="stringliteral">&quot; %s&quot;</span>), unitId );
<a name="l00613"></a>00613     UpdateData( FALSE );
<a name="l00614"></a>00614 
<a name="l00615"></a>00615     <span class="keywordflow">return</span> 0;
<a name="l00616"></a>00616 }
<a name="l00617"></a>00617 
<a name="l00618"></a>00618 <span class="comment">//----------------------------------------------------------------------</span>
<a name="l00623"></a>00623 <span class="comment"></span><span class="comment">//----------------------------------------------------------------------</span>
<a name="l00624"></a><a class="code" href="classCFmiPcAppDlg.html#a14cfc2ce3a3ac64f8ef7ad782df6ad88">00624</a> afx_msg LRESULT <a class="code" href="classCFmiPcAppDlg.html#a14cfc2ce3a3ac64f8ef7ad782df6ad88" title="Handler for Log Viewer Closed event //!">CFmiPcAppDlg::OnEventLogViewerClosed</a>( WPARAM, LPARAM )
<a name="l00625"></a>00625 {
<a name="l00626"></a>00626     GetDlgItem( IDC_MAIN_BTN_VIEW_LOG )-&gt;EnableWindow( <a class="code" href="garmin__types_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a> );
<a name="l00627"></a>00627     <span class="keyword">delete</span> <a class="code" href="classCFmiPcAppDlg.html#a21c2a4da64f680681ce133dff90b740b" title="Pointer to the log viewer dialog, or NULL if the dialog is not open.">mLogViewerDlg</a>;
<a name="l00628"></a>00628     <a class="code" href="classCFmiPcAppDlg.html#a21c2a4da64f680681ce133dff90b740b" title="Pointer to the log viewer dialog, or NULL if the dialog is not open.">mLogViewerDlg</a> = NULL;
<a name="l00629"></a>00629 
<a name="l00630"></a>00630     <span class="comment">// If a mCom port has not been selected, we are not initialized yet.</span>
<a name="l00631"></a>00631     <span class="keywordflow">if</span>( !<a class="code" href="classCFmiPcAppDlg.html#a6fc1891112d5ecbc0338735f45bb4560" title="If TRUE, the user has selected a FmiApplicationLayer port.">mComPortSelected</a> )
<a name="l00632"></a>00632     {
<a name="l00633"></a>00633         <a class="code" href="classCFmiPcAppDlg.html#a08ac17f0ba32be897b9e17be56bec533" title="Ask the user to select a mCom port. //!">doComPortQuestion</a>();
<a name="l00634"></a>00634     }
<a name="l00635"></a>00635     <span class="keywordflow">return</span> 0;
<a name="l00636"></a>00636 }
<a name="l00637"></a>00637 
<a name="l00638"></a>00638 <span class="comment">//----------------------------------------------------------------------</span>
<a name="l00643"></a>00643 <span class="comment"></span><span class="comment">//----------------------------------------------------------------------</span>
<a name="l00644"></a><a class="code" href="classCFmiPcAppDlg.html#ad639ca5ae2e9ddeeb529d5a47970de6b">00644</a> afx_msg LRESULT <a class="code" href="classCFmiPcAppDlg.html#ad639ca5ae2e9ddeeb529d5a47970de6b" title="Handler for Main Dialog Init question //!">CFmiPcAppDlg::OnEventMainDlgInit</a>( WPARAM, LPARAM )
<a name="l00645"></a>00645 {
<a name="l00646"></a>00646     <a class="code" href="classCFmiPcAppDlg.html#a2ccc72f622001989fff0856d01cc5fa1" title="Ask the user whether to open a log file. //!">doOpenLogFileQuestion</a>();
<a name="l00647"></a>00647 
<a name="l00648"></a>00648     <span class="keywordflow">return</span> 0;
<a name="l00649"></a>00649 }
<a name="l00650"></a>00650 
<a name="l00651"></a>00651 <span class="comment">//----------------------------------------------------------------------</span>
<a name="l00655"></a>00655 <span class="comment"></span><span class="comment">//----------------------------------------------------------------------</span>
<a name="l00656"></a><a class="code" href="classCFmiPcAppDlg.html#a6999bcc311002398ea11611e048701e9">00656</a> afx_msg LRESULT <a class="code" href="classCFmiPcAppDlg.html#a6999bcc311002398ea11611e048701e9" title="Handler for the Product ID Received event from Com.">CFmiPcAppDlg::OnEventProductIdReceived</a>( WPARAM, LPARAM )
<a name="l00657"></a>00657 {
<a name="l00658"></a>00658     UpdateData( <a class="code" href="garmin__types_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a> );
<a name="l00659"></a>00659     <a class="code" href="classCFmiPcAppDlg.html#a6620c854217621bedc329f69908dda4d" title="Contents of Product ID text box.">mProductId</a> = <a class="code" href="classCFmiPcAppDlg.html#a62c9216547d4f311e37bf4041a12e52c" title="Translate a product ID into a display name. //!">getProductName</a>( <a class="code" href="classCFmiPcAppDlg.html#aead4f57d93a41526b3614d153752ae44" title="The FmiApplicationLayer object used to communicate with the client.">mCom</a>.<a class="code" href="classFmiApplicationLayer.html#ae191d4611ba5fd2f8c947f4315481ee1" title="Numeric product ID reported by the client. //!">mClientProductId</a> );
<a name="l00660"></a>00660     <a class="code" href="classCFmiPcAppDlg.html#a6345fc55bd17e01f2ffc0e9381c8fcdc" title="Contents of Software Version text box.">mSoftwareVersion</a>.Format( _T(<span class="stringliteral">&quot;%1.2f&quot;</span>), (<span class="keywordtype">float</span>)<a class="code" href="classCFmiPcAppDlg.html#aead4f57d93a41526b3614d153752ae44" title="The FmiApplicationLayer object used to communicate with the client.">mCom</a>.<a class="code" href="classFmiApplicationLayer.html#a4f8a7b8e1e222e9786f69c941068ff42" title="Raw software version reported by the client. //!">mClientSoftwareVersion</a> / 100 );
<a name="l00661"></a>00661     UpdateData( FALSE );
<a name="l00662"></a>00662     <span class="keywordflow">return</span> 0;
<a name="l00663"></a>00663 }
<a name="l00664"></a>00664 
<a name="l00665"></a>00665 <span class="comment">//----------------------------------------------------------------------</span>
<a name="l00669"></a>00669 <span class="comment"></span><span class="comment">//----------------------------------------------------------------------</span>
<a name="l00670"></a><a class="code" href="classCFmiPcAppDlg.html#abab174b7de31da2af92019af58c628a1">00670</a> afx_msg LRESULT <a class="code" href="classCFmiPcAppDlg.html#abab174b7de31da2af92019af58c628a1" title="Handler for the Protocols Received event from Com. /.">CFmiPcAppDlg::OnEventProtocolsReceived</a>( WPARAM, LPARAM )
<a name="l00671"></a>00671 {
<a name="l00672"></a>00672     TCHAR protocols[PROTOCOL_SIZE];
<a name="l00673"></a>00673     MultiByteToWideChar( <a class="code" href="classCFmiPcAppDlg.html#aead4f57d93a41526b3614d153752ae44" title="The FmiApplicationLayer object used to communicate with the client.">mCom</a>.<a class="code" href="classFmiApplicationLayer.html#aa8bda2692621f9603e6a2b927a944e56" title="Code page used for encoding of text fields when communicating //! with the client.">mClientCodepage</a>, 0, <a class="code" href="classCFmiPcAppDlg.html#aead4f57d93a41526b3614d153752ae44" title="The FmiApplicationLayer object used to communicate with the client.">mCom</a>.<a class="code" href="classFmiApplicationLayer.html#a20cc2e352cbfd1f1e0c4ea2da86560d3" title="Null-terminated ASCII string containing the protocols supported //! by the client. //!">mProtocols</a>, -1, protocols, <a class="code" href="fmi_8h.html#ad649636bb53707ca7a4001164f6ef5dc" title="Size of the formatted &amp;quot;supported protocols&amp;quot; string /.">PROTOCOL_SIZE</a> );
<a name="l00674"></a>00674     protocols[<a class="code" href="fmi_8h.html#ad649636bb53707ca7a4001164f6ef5dc" title="Size of the formatted &amp;quot;supported protocols&amp;quot; string /.">PROTOCOL_SIZE</a> - 1] = <span class="charliteral">&#39;\0&#39;</span>;
<a name="l00675"></a>00675     <a class="code" href="classCFmiPcAppDlg.html#a728a439df078cabe6fca85620c2c636b" title="Contents of Protocols text box.">mSupportedProtocols</a>.Format( _T(<span class="stringliteral">&quot;%s&quot;</span>), protocols );
<a name="l00676"></a>00676     GetDlgItem( <a class="code" href="resource_8h.html#a14908a838734aaf6337858226ccb164c">IDC_MAIN_TXT_PROTOCOLS</a> )-&gt;SetWindowText( <a class="code" href="classCFmiPcAppDlg.html#a728a439df078cabe6fca85620c2c636b" title="Contents of Protocols text box.">mSupportedProtocols</a> );
<a name="l00677"></a>00677 
<a name="l00678"></a>00678     <span class="keywordflow">return</span> 0;
<a name="l00679"></a>00679 }
<a name="l00680"></a>00680 
<a name="l00681"></a>00681 <span class="comment">//----------------------------------------------------------------------</span>
<a name="l00685"></a>00685 <span class="comment"></span><span class="comment">//----------------------------------------------------------------------</span>
<a name="l00686"></a><a class="code" href="classCFmiPcAppDlg.html#a60355bb22157e30c970958cb3d873c99">00686</a> afx_msg LRESULT <a class="code" href="classCFmiPcAppDlg.html#a60355bb22157e30c970958cb3d873c99" title="Handler for the PVT Data Received event from Com. //.">CFmiPcAppDlg::OnEventPvtReceived</a>( WPARAM, LPARAM )
<a name="l00687"></a>00687 {
<a name="l00688"></a>00688     TCHAR str[15];
<a name="l00689"></a>00689 
<a name="l00690"></a>00690     UpdateData( <a class="code" href="garmin__types_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a> );
<a name="l00691"></a>00691     memset( str, 0, <span class="keyword">sizeof</span>( str ) );
<a name="l00692"></a>00692     MultiByteToWideChar( <a class="code" href="classCFmiPcAppDlg.html#aead4f57d93a41526b3614d153752ae44" title="The FmiApplicationLayer object used to communicate with the client.">mCom</a>.<a class="code" href="classFmiApplicationLayer.html#aa8bda2692621f9603e6a2b927a944e56" title="Code page used for encoding of text fields when communicating //! with the client.">mClientCodepage</a>, 0, <a class="code" href="classCFmiPcAppDlg.html#aead4f57d93a41526b3614d153752ae44" title="The FmiApplicationLayer object used to communicate with the client.">mCom</a>.<a class="code" href="classFmiApplicationLayer.html#a7ed8e6b8f23e418f7de47923adf7659d" title="GPS fix type from the last PVT packet, interpreted as an //! null-terminated ASCII string...">mPVTFixType</a>, -1, str, 9 );
<a name="l00693"></a>00693     <a class="code" href="classCFmiPcAppDlg.html#a1c1c0dabf45aa5324224df3a2b0a23e6" title="Contents of PVT text box: GPS fix.">mGpsFix</a>.Format( _T(<span class="stringliteral">&quot; %s&quot;</span>), str );
<a name="l00694"></a>00694     MultiByteToWideChar( <a class="code" href="classCFmiPcAppDlg.html#aead4f57d93a41526b3614d153752ae44" title="The FmiApplicationLayer object used to communicate with the client.">mCom</a>.<a class="code" href="classFmiApplicationLayer.html#aa8bda2692621f9603e6a2b927a944e56" title="Code page used for encoding of text fields when communicating //! with the client.">mClientCodepage</a>, 0, <a class="code" href="classCFmiPcAppDlg.html#aead4f57d93a41526b3614d153752ae44" title="The FmiApplicationLayer object used to communicate with the client.">mCom</a>.<a class="code" href="classFmiApplicationLayer.html#a747c355b0fb45829064da3402a7664da" title="Date from the last PVT packet, as an ASCII null-terminated //! string of the form MM/DD/YYYY...">mPvtDate</a>, -1, str, 11 );
<a name="l00695"></a>00695     <a class="code" href="classCFmiPcAppDlg.html#ad0f594a8f886b1358c89b9bbcabce7b7" title="Contents of PVT text box: Date.">mPvtDate</a>.Format( _T(<span class="stringliteral">&quot; %s&quot;</span>), str );
<a name="l00696"></a>00696     MultiByteToWideChar( <a class="code" href="classCFmiPcAppDlg.html#aead4f57d93a41526b3614d153752ae44" title="The FmiApplicationLayer object used to communicate with the client.">mCom</a>.<a class="code" href="classFmiApplicationLayer.html#aa8bda2692621f9603e6a2b927a944e56" title="Code page used for encoding of text fields when communicating //! with the client.">mClientCodepage</a>, 0, <a class="code" href="classCFmiPcAppDlg.html#aead4f57d93a41526b3614d153752ae44" title="The FmiApplicationLayer object used to communicate with the client.">mCom</a>.<a class="code" href="classFmiApplicationLayer.html#a88a8083fb85ec51607013da106ab7e3c" title="Time from the last PVT packet //!">mPvtTime</a>, -1, str, 13 );
<a name="l00697"></a>00697     <a class="code" href="classCFmiPcAppDlg.html#a40e3677dbfa1dfd7d56a3661929a212a" title="Contents of PVT text box: Time.">mPvtTime</a>.Format( _T(<span class="stringliteral">&quot; %s&quot;</span>), str );
<a name="l00698"></a>00698     MultiByteToWideChar( <a class="code" href="classCFmiPcAppDlg.html#aead4f57d93a41526b3614d153752ae44" title="The FmiApplicationLayer object used to communicate with the client.">mCom</a>.<a class="code" href="classFmiApplicationLayer.html#aa8bda2692621f9603e6a2b927a944e56" title="Code page used for encoding of text fields when communicating //! with the client.">mClientCodepage</a>, 0, <a class="code" href="classCFmiPcAppDlg.html#aead4f57d93a41526b3614d153752ae44" title="The FmiApplicationLayer object used to communicate with the client.">mCom</a>.<a class="code" href="classFmiApplicationLayer.html#aa287475c1563d0ee4191ab1a32d4e044" title="Latitude in degrees from the last PVT packet, as an ASCII //! null-terminated string. //!">mPvtLatitude</a>, -1, str, 14 );
<a name="l00699"></a>00699     <a class="code" href="classCFmiPcAppDlg.html#a931ea9240867fc3881fcdd683c19d1f0" title="Contents of PVT text box: Latitude.">mPvtLatitude</a>.Format( _T(<span class="stringliteral">&quot; %s&quot;</span>), str );
<a name="l00700"></a>00700     MultiByteToWideChar( <a class="code" href="classCFmiPcAppDlg.html#aead4f57d93a41526b3614d153752ae44" title="The FmiApplicationLayer object used to communicate with the client.">mCom</a>.<a class="code" href="classFmiApplicationLayer.html#aa8bda2692621f9603e6a2b927a944e56" title="Code page used for encoding of text fields when communicating //! with the client.">mClientCodepage</a>, 0, <a class="code" href="classCFmiPcAppDlg.html#aead4f57d93a41526b3614d153752ae44" title="The FmiApplicationLayer object used to communicate with the client.">mCom</a>.<a class="code" href="classFmiApplicationLayer.html#adc99b7ba406136c8f82a92038defa766" title="Longitude in degrees from the last PVT packet, as an ASCII //! null-terminated string. //!">mPvtLongitude</a>, -1, str, 14 );
<a name="l00701"></a>00701     <a class="code" href="classCFmiPcAppDlg.html#a6a349e238a90c7b0129a2bf24e0abb12" title="Contents of PVT text box: Longitude.">mPvtLongitude</a>.Format( _T(<span class="stringliteral">&quot; %s&quot;</span>), str );
<a name="l00702"></a>00702     MultiByteToWideChar( <a class="code" href="classCFmiPcAppDlg.html#aead4f57d93a41526b3614d153752ae44" title="The FmiApplicationLayer object used to communicate with the client.">mCom</a>.<a class="code" href="classFmiApplicationLayer.html#aa8bda2692621f9603e6a2b927a944e56" title="Code page used for encoding of text fields when communicating //! with the client.">mClientCodepage</a>, 0, <a class="code" href="classCFmiPcAppDlg.html#aead4f57d93a41526b3614d153752ae44" title="The FmiApplicationLayer object used to communicate with the client.">mCom</a>.<a class="code" href="classFmiApplicationLayer.html#adb0f074b4b4985ad40f556194979189f" title="Altitude in meters from the last PVT packet, as an ASCII //! null-terminated string //!...">mPvtAltitude</a>, -1, str, 13 );
<a name="l00703"></a>00703     <a class="code" href="classCFmiPcAppDlg.html#a7ec385ee46a81932267dae9d3805ca11" title="Contents of PVT text box: Altitude.">mAltitude</a>.Format( _T(<span class="stringliteral">&quot; %s&quot;</span>), str );
<a name="l00704"></a>00704     MultiByteToWideChar( <a class="code" href="classCFmiPcAppDlg.html#aead4f57d93a41526b3614d153752ae44" title="The FmiApplicationLayer object used to communicate with the client.">mCom</a>.<a class="code" href="classFmiApplicationLayer.html#aa8bda2692621f9603e6a2b927a944e56" title="Code page used for encoding of text fields when communicating //! with the client.">mClientCodepage</a>, 0, <a class="code" href="classCFmiPcAppDlg.html#aead4f57d93a41526b3614d153752ae44" title="The FmiApplicationLayer object used to communicate with the client.">mCom</a>.<a class="code" href="classFmiApplicationLayer.html#a17ec4823d8b5d1eba2d6245639ae1d42" title="North-south velocity in meters per second from the last PVT //! packet, as an ASCII null-terminated s...">mPvtNorthSouthVelocity</a>, -1, str, 15 );
<a name="l00705"></a>00705     <a class="code" href="classCFmiPcAppDlg.html#a7f68966d365fe20e82847ee94f9d1899" title="Contents of PVT text box: North-South velocity.">mNorthSouthVelocity</a>.Format( _T(<span class="stringliteral">&quot; %s&quot;</span>), str );
<a name="l00706"></a>00706     MultiByteToWideChar( <a class="code" href="classCFmiPcAppDlg.html#aead4f57d93a41526b3614d153752ae44" title="The FmiApplicationLayer object used to communicate with the client.">mCom</a>.<a class="code" href="classFmiApplicationLayer.html#aa8bda2692621f9603e6a2b927a944e56" title="Code page used for encoding of text fields when communicating //! with the client.">mClientCodepage</a>, 0, <a class="code" href="classCFmiPcAppDlg.html#aead4f57d93a41526b3614d153752ae44" title="The FmiApplicationLayer object used to communicate with the client.">mCom</a>.<a class="code" href="classFmiApplicationLayer.html#a4d2c612e08de3fb42b375835fb2d923e" title="East-west velocity in meters per second from the last PVT //! packet, as an ASCII null-terminated str...">mPvtEastWestVelocity</a>, -1, str, 15 );
<a name="l00707"></a>00707     <a class="code" href="classCFmiPcAppDlg.html#aeaa2830853f74167141384e55277f181" title="Contents of PVT text box: East-West velocity.">mEastWestVelocity</a>.Format( _T(<span class="stringliteral">&quot; %s&quot;</span>), str );
<a name="l00708"></a>00708     MultiByteToWideChar( <a class="code" href="classCFmiPcAppDlg.html#aead4f57d93a41526b3614d153752ae44" title="The FmiApplicationLayer object used to communicate with the client.">mCom</a>.<a class="code" href="classFmiApplicationLayer.html#aa8bda2692621f9603e6a2b927a944e56" title="Code page used for encoding of text fields when communicating //! with the client.">mClientCodepage</a>, 0, <a class="code" href="classCFmiPcAppDlg.html#aead4f57d93a41526b3614d153752ae44" title="The FmiApplicationLayer object used to communicate with the client.">mCom</a>.<a class="code" href="classFmiApplicationLayer.html#aa26849c76bc40cfee9433a87e174ad4a" title="Up-down velocity in meters per second from the last PVT //! packet, as an ASCII null-terminated strin...">mPvtUpDownVelocity</a>, -1, str, 15 );
<a name="l00709"></a>00709     <a class="code" href="classCFmiPcAppDlg.html#af623db169439f79f78da1ecbc7cc867a" title="Contents of PVT text box: Up-Down velocity.">mUpDownVelocity</a>.Format( _T(<span class="stringliteral">&quot; %s&quot;</span>), str );
<a name="l00710"></a>00710     MultiByteToWideChar( <a class="code" href="classCFmiPcAppDlg.html#aead4f57d93a41526b3614d153752ae44" title="The FmiApplicationLayer object used to communicate with the client.">mCom</a>.<a class="code" href="classFmiApplicationLayer.html#aa8bda2692621f9603e6a2b927a944e56" title="Code page used for encoding of text fields when communicating //! with the client.">mClientCodepage</a>, 0, <a class="code" href="classCFmiPcAppDlg.html#aead4f57d93a41526b3614d153752ae44" title="The FmiApplicationLayer object used to communicate with the client.">mCom</a>.<a class="code" href="classFmiApplicationLayer.html#a6ad083a1f3673f164814cdc8d2672ef2" title="2-D velocity in the horizontal plane in meters per second from //! the last PVT packet, as an ASCII null-terminated string //!">mHorizontalVelocity</a>, -1, str, 15 );
<a name="l00711"></a>00711     <a class="code" href="classCFmiPcAppDlg.html#a450d5b399cdf4206672ca91aa281d5d9" title="Contents of PVT text box: 2-D velocity.">m2DVelocity</a>.Format( _T(<span class="stringliteral">&quot; %s&quot;</span>), str );
<a name="l00712"></a>00712     UpdateData( FALSE );
<a name="l00713"></a>00713 
<a name="l00714"></a>00714     <span class="keywordflow">return</span> 0;
<a name="l00715"></a>00715 }
<a name="l00716"></a>00716 
<a name="l00717"></a>00717 <span class="comment">//----------------------------------------------------------------------</span>
<a name="l00722"></a>00722 <span class="comment"></span><span class="comment">//----------------------------------------------------------------------</span>
<a name="l00723"></a><a class="code" href="classCFmiPcAppDlg.html#a86effdf1af2cddf97fcc9daed28895c7">00723</a> afx_msg LRESULT <a class="code" href="classCFmiPcAppDlg.html#a86effdf1af2cddf97fcc9daed28895c7" title="Handler for Stop List Dialog Closed event //!">CFmiPcAppDlg::OnEventStopListDlgClosed</a>( WPARAM, LPARAM )
<a name="l00724"></a>00724 {
<a name="l00725"></a>00725     GetDlgItem( IDC_MAIN_BTN_VIEW_STOPS )-&gt;EnableWindow( <a class="code" href="garmin__types_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a> );
<a name="l00726"></a>00726     <span class="keyword">delete</span> <a class="code" href="classCFmiPcAppDlg.html#a54fe5a3c803333ac0485b9e43f76bf2c" title="Pointer to the stop list dialog, or NULL if the dialog is not open.">mStopListDlg</a>;
<a name="l00727"></a>00727     <a class="code" href="classCFmiPcAppDlg.html#a54fe5a3c803333ac0485b9e43f76bf2c" title="Pointer to the stop list dialog, or NULL if the dialog is not open.">mStopListDlg</a> = NULL;
<a name="l00728"></a>00728 
<a name="l00729"></a>00729     <span class="keywordflow">return</span> 0;
<a name="l00730"></a>00730 }
<a name="l00731"></a>00731 
<a name="l00732"></a>00732 <span class="preprocessor">#if FMI_SUPPORT_A607</span>
<a name="l00733"></a>00733 <span class="preprocessor"></span><span class="comment">//----------------------------------------------------------------------</span>
<a name="l00738"></a>00738 <span class="comment"></span><span class="comment">//----------------------------------------------------------------------</span>
<a name="l00739"></a><a class="code" href="classCFmiPcAppDlg.html#a4755aaba1d745e3addfe44e9aabf53d1">00739</a> afx_msg LRESULT <a class="code" href="classCFmiPcAppDlg.html#a4755aaba1d745e3addfe44e9aabf53d1" title="Handler for Stop List Dialog Closed event //!">CFmiPcAppDlg::OnEventWaypointDlgClosed</a>( WPARAM, LPARAM )
<a name="l00740"></a>00740 {
<a name="l00741"></a>00741     GetDlgItem( IDC_MAIN_BTN_WAYPOINTS )-&gt;EnableWindow( <a class="code" href="garmin__types_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a> );
<a name="l00742"></a>00742     <span class="keyword">delete</span> <a class="code" href="classCFmiPcAppDlg.html#ac257a6d3ea54f27c49fe48bd750072e1" title="Pointer to the Waypoints dialog, or NULL if no such dialog is displayed //!">mWaypointDlg</a>;
<a name="l00743"></a>00743     <a class="code" href="classCFmiPcAppDlg.html#ac257a6d3ea54f27c49fe48bd750072e1" title="Pointer to the Waypoints dialog, or NULL if no such dialog is displayed //!">mWaypointDlg</a> = NULL;
<a name="l00744"></a>00744 
<a name="l00745"></a>00745     <span class="keywordflow">return</span> 0;
<a name="l00746"></a>00746 }
<a name="l00747"></a>00747 <span class="preprocessor">#endif</span>
<a name="l00748"></a>00748 <span class="preprocessor"></span>
<a name="l00749"></a>00749 <span class="comment">//----------------------------------------------------------------------</span>
<a name="l00751"></a>00751 <span class="comment"></span><span class="comment">//----------------------------------------------------------------------</span>
<a name="l00752"></a><a class="code" href="classCFmiPcAppDlg.html#adedfe90b8d63dac0cbc459accd0fec4c">00752</a> <span class="keywordtype">void</span> <a class="code" href="classCFmiPcAppDlg.html#adedfe90b8d63dac0cbc459accd0fec4c" title="Handler for the File &amp;gt; Close action. Close the app.">CFmiPcAppDlg::OnFileClose</a>()
<a name="l00753"></a>00753 {
<a name="l00754"></a>00754     OnOK();
<a name="l00755"></a>00755 }
<a name="l00756"></a>00756 
<a name="l00757"></a>00757 <span class="comment">//----------------------------------------------------------------------</span>
<a name="l00761"></a>00761 <span class="comment"></span><span class="comment">//----------------------------------------------------------------------</span>
<a name="l00762"></a><a class="code" href="classCFmiPcAppDlg.html#a3294aeb5c343c8778a2e04665efb8378">00762</a> <span class="keywordtype">void</span> <a class="code" href="classCFmiPcAppDlg.html#a3294aeb5c343c8778a2e04665efb8378" title="Handler for the File &amp;gt; Clear Packet Log action. //!">CFmiPcAppDlg::OnFileClearPacketLog</a>()
<a name="l00763"></a>00763 {
<a name="l00764"></a>00764     <span class="keywordtype">bool</span> logWasOpen = <span class="keyword">false</span>;
<a name="l00765"></a>00765 
<a name="l00766"></a>00766     <span class="keywordflow">if</span>( <a class="code" href="classCFmiPcAppDlg.html#a21c2a4da64f680681ce133dff90b740b" title="Pointer to the log viewer dialog, or NULL if the dialog is not open.">mLogViewerDlg</a> != NULL )
<a name="l00767"></a>00767     {
<a name="l00768"></a>00768         logWasOpen = <span class="keyword">true</span>;
<a name="l00769"></a>00769         <a class="code" href="classCFmiPcAppDlg.html#a21c2a4da64f680681ce133dff90b740b" title="Pointer to the log viewer dialog, or NULL if the dialog is not open.">mLogViewerDlg</a>-&gt;DestroyWindow();
<a name="l00770"></a>00770     }
<a name="l00771"></a>00771 
<a name="l00772"></a>00772     <a class="code" href="classLogger.html#a96bb0f911dcad3fcd755a2aae9205f44" title="Empties the packet log //!">Logger::clearLog</a>();
<a name="l00773"></a>00773 
<a name="l00774"></a>00774     <span class="keywordflow">if</span>( logWasOpen )
<a name="l00775"></a>00775     {
<a name="l00776"></a>00776         <a class="code" href="classCFmiPcAppDlg.html#ac03ee4ee9c5d4d9793439f6e1f3b0153" title="Display the log viewer. //!">OnViewlog</a>();
<a name="l00777"></a>00777     }
<a name="l00778"></a>00778 }
<a name="l00779"></a>00779 
<a name="l00780"></a>00780 <span class="comment">//----------------------------------------------------------------------</span>
<a name="l00782"></a>00782 <span class="comment"></span><span class="comment">//----------------------------------------------------------------------</span>
<a name="l00783"></a><a class="code" href="classCFmiPcAppDlg.html#a5f186969607b8afdb870917074b70c6c">00783</a> <span class="keywordtype">void</span> <a class="code" href="classCFmiPcAppDlg.html#a5f186969607b8afdb870917074b70c6c" title="Opens the About Dialog box.">CFmiPcAppDlg::OnHelpAbout</a>()
<a name="l00784"></a>00784 {
<a name="l00785"></a>00785     <a class="code" href="classCAboutDlg.html" title="About box for this application //!">CAboutDlg</a> dlg( <span class="keyword">this</span> );
<a name="l00786"></a>00786     dlg.DoModal();
<a name="l00787"></a>00787 }
<a name="l00788"></a>00788 
<a name="l00789"></a>00789 <span class="comment">//----------------------------------------------------------------------</span>
<a name="l00793"></a>00793 <span class="comment"></span><span class="comment">//----------------------------------------------------------------------</span>
<a name="l00794"></a><a class="code" href="classCFmiPcAppDlg.html#a6ce736533474c5e14bf2e0640354c2fb">00794</a> <span class="keywordtype">void</span> <a class="code" href="classCFmiPcAppDlg.html#a6ce736533474c5e14bf2e0640354c2fb" title="Handler for WM_PAINT message. If the dialog is minimized, //! draw the icon centered in the client re...">CFmiPcAppDlg::OnPaint</a>()
<a name="l00795"></a>00795 {
<a name="l00796"></a>00796     <span class="keywordflow">if</span>( IsIconic() )
<a name="l00797"></a>00797     {
<a name="l00798"></a>00798         CPaintDC dc( <span class="keyword">this</span> ); <span class="comment">// device context for painting</span>
<a name="l00799"></a>00799 
<a name="l00800"></a>00800         SendMessage( WM_ICONERASEBKGND, reinterpret_cast&lt;WPARAM&gt;( dc.GetSafeHdc() ), 0 );
<a name="l00801"></a>00801 
<a name="l00802"></a>00802         <span class="comment">// Center icon in client rectangle</span>
<a name="l00803"></a>00803         <span class="keywordtype">int</span> cxIcon = GetSystemMetrics( SM_CXICON );
<a name="l00804"></a>00804         <span class="keywordtype">int</span> cyIcon = GetSystemMetrics( SM_CYICON );
<a name="l00805"></a>00805         CRect rect;
<a name="l00806"></a>00806         GetClientRect( &amp;rect );
<a name="l00807"></a>00807         <span class="keywordtype">int</span> x = ( rect.Width() - cxIcon + 1 ) / 2;
<a name="l00808"></a>00808         <span class="keywordtype">int</span> y = ( rect.Height() - cyIcon + 1 ) / 2;
<a name="l00809"></a>00809 
<a name="l00810"></a>00810         <span class="comment">// Draw the icon</span>
<a name="l00811"></a>00811         dc.DrawIcon( x, y, <a class="code" href="classCFmiPcAppDlg.html#ab4dd30d1f38391be48139a547ab12299" title="Handle to the dialog&amp;#39;s icon.">mIconHandle</a> );
<a name="l00812"></a>00812     }
<a name="l00813"></a>00813     <span class="keywordflow">else</span>
<a name="l00814"></a>00814     {
<a name="l00815"></a>00815         <a class="code" href="classCFmiPcAppDlg.html#a6ce736533474c5e14bf2e0640354c2fb" title="Handler for WM_PAINT message. If the dialog is minimized, //! draw the icon centered in the client re...">CDialog::OnPaint</a>();
<a name="l00816"></a>00816     }
<a name="l00817"></a>00817 }
<a name="l00818"></a>00818 
<a name="l00819"></a>00819 <span class="comment">//----------------------------------------------------------------------</span>
<a name="l00823"></a>00823 <span class="comment"></span><span class="comment">//----------------------------------------------------------------------</span>
<a name="l00824"></a><a class="code" href="classCFmiPcAppDlg.html#a4e93fc5c82f6be379e2fed4080ce2eac">00824</a> HCURSOR <a class="code" href="classCFmiPcAppDlg.html#a4e93fc5c82f6be379e2fed4080ce2eac" title="The system calls this function to obtain the cursor to //! display while the user drags the minimized...">CFmiPcAppDlg::OnQueryDragIcon</a>()
<a name="l00825"></a>00825 {
<a name="l00826"></a>00826     <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span>HCURSOR<span class="keyword">&gt;</span>( <a class="code" href="classCFmiPcAppDlg.html#ab4dd30d1f38391be48139a547ab12299" title="Handle to the dialog&amp;#39;s icon.">mIconHandle</a> );
<a name="l00827"></a>00827 }
<a name="l00828"></a>00828 
<a name="l00829"></a>00829 <span class="comment">//----------------------------------------------------------------------</span>
<a name="l00837"></a>00837 <span class="comment"></span><span class="comment">//----------------------------------------------------------------------</span>
<a name="l00838"></a>00838 <span class="keywordtype">void</span> <a class="code" href="classCFmiPcAppDlg.html#a9787109620df74136ae2abe8a1692392" title="Called when the user selects a command from the Control //! menu, or when the user selects the Maximi...">CFmiPcAppDlg::OnSysCommand</a>
<a name="l00839"></a><a class="code" href="classCFmiPcAppDlg.html#a9787109620df74136ae2abe8a1692392">00839</a>     (
<a name="l00840"></a>00840     UINT   aSystemCommandId,
<a name="l00841"></a>00841     LPARAM aParam
<a name="l00842"></a>00842     )
<a name="l00843"></a>00843 {
<a name="l00844"></a>00844     <span class="keywordflow">if</span>( ( aSystemCommandId &amp; 0xFFF0 ) == <a class="code" href="resource_8h.html#a74b41adc6435c09e5393739d1ebeace4">IDM_ABOUTBOX</a> )
<a name="l00845"></a>00845     {
<a name="l00846"></a>00846         <a class="code" href="classCAboutDlg.html" title="About box for this application //!">CAboutDlg</a> dlgAbout( <span class="keyword">this</span> );
<a name="l00847"></a>00847         dlgAbout.DoModal();
<a name="l00848"></a>00848     }
<a name="l00849"></a>00849     <span class="keywordflow">else</span>
<a name="l00850"></a>00850     {
<a name="l00851"></a>00851         CDialog::OnSysCommand( aSystemCommandId, aParam );
<a name="l00852"></a>00852     }
<a name="l00853"></a>00853 }
<a name="l00854"></a>00854 
<a name="l00855"></a>00855 <span class="comment">//----------------------------------------------------------------------</span>
<a name="l00864"></a>00864 <span class="comment"></span><span class="comment">//----------------------------------------------------------------------</span>
<a name="l00865"></a>00865 <span class="keywordtype">void</span> <a class="code" href="classCFmiPcAppDlg.html#a15421eb10b8463dfd4b6d35a9d70133f" title="WM_TIMER event handler. //!">CFmiPcAppDlg::OnTimer</a>
<a name="l00866"></a><a class="code" href="classCFmiPcAppDlg.html#a15421eb10b8463dfd4b6d35a9d70133f">00866</a>     (
<a name="l00867"></a>00867     UINT aTimerId
<a name="l00868"></a>00868     )
<a name="l00869"></a>00869 {
<a name="l00870"></a>00870     <span class="keywordflow">if</span>( !mIgnoreTimer )
<a name="l00871"></a>00871     {
<a name="l00872"></a>00872         <span class="keywordflow">switch</span>( aTimerId )
<a name="l00873"></a>00873         {
<a name="l00874"></a>00874         <span class="keywordflow">case</span> <a class="code" href="CFmiPcAppDlg_8cpp.html#ab1607f7a01655d3cce2eaef4fbdac704ac4d257c076288704c27fd18ec9a5a199">MAIN_TIMER_ID</a>:
<a name="l00875"></a>00875             {
<a name="l00876"></a>00876                 <a class="code" href="classTimerManager.html#a200e148daab71c1e7d136107767483c3" title="Timer tick //!">TimerManager::tick</a>();
<a name="l00877"></a>00877             } <span class="comment">// end of case MAIN_COMM_TIMER</span>
<a name="l00878"></a>00878             <span class="keywordflow">break</span>;
<a name="l00879"></a>00879 <span class="preprocessor">#if FMI_SUPPORT_A603</span>
<a name="l00880"></a>00880 <span class="preprocessor"></span>        <span class="keywordflow">case</span> <a class="code" href="CFmiPcAppDlg_8cpp.html#ab1607f7a01655d3cce2eaef4fbdac704ad2be3b7cd9de6fb84059d6f4fe8a836a">MAIN_ETA_TIMER_ID</a>:
<a name="l00881"></a>00881             {
<a name="l00882"></a>00882                 mCom.sendEtaRequest();
<a name="l00883"></a>00883             }
<a name="l00884"></a>00884             <span class="keywordflow">break</span>;
<a name="l00885"></a>00885 <span class="preprocessor">#endif</span>
<a name="l00886"></a>00886 <span class="preprocessor"></span>        } <span class="comment">//end of switch( nIdEvent )</span>
<a name="l00887"></a>00887     } <span class="comment">// end of if(!mIgnoreTimer...)</span>
<a name="l00888"></a>00888 } <span class="comment">// end of CFmiPcAppDlg::OnTimer()</span>
<a name="l00889"></a>00889 
<a name="l00890"></a>00890 <span class="comment">//----------------------------------------------------------------------</span>
<a name="l00899"></a>00899 <span class="comment"></span><span class="comment">//----------------------------------------------------------------------</span>
<a name="l00900"></a>00900 <span class="keywordtype">void</span> <a class="code" href="classCFmiPcAppDlg.html#a0e0fa26401b0eb0ecee397a30caf3b57" title="ON_UPDATE_COMMAND_UI handler for File &amp;gt; View Log menu item. //!">CFmiPcAppDlg::OnUpdateFileViewlog</a>
<a name="l00901"></a><a class="code" href="classCFmiPcAppDlg.html#a0e0fa26401b0eb0ecee397a30caf3b57">00901</a>     (
<a name="l00902"></a>00902     CCmdUI * aCmdUI
<a name="l00903"></a>00903     )
<a name="l00904"></a>00904 {
<a name="l00905"></a>00905     <span class="keywordflow">if</span>( mLogViewerDlg != NULL )
<a name="l00906"></a>00906     {
<a name="l00907"></a>00907         aCmdUI-&gt;Enable( FALSE );
<a name="l00908"></a>00908     }
<a name="l00909"></a>00909     <span class="keywordflow">else</span>
<a name="l00910"></a>00910     {
<a name="l00911"></a>00911         aCmdUI-&gt;Enable( <a class="code" href="garmin__types_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a> );
<a name="l00912"></a>00912     }
<a name="l00913"></a>00913 }
<a name="l00914"></a>00914 
<a name="l00915"></a>00915 <span class="comment">//----------------------------------------------------------------------</span>
<a name="l00921"></a>00921 <span class="comment"></span><span class="comment">//----------------------------------------------------------------------</span>
<a name="l00922"></a>00922 <span class="keywordtype">void</span> <a class="code" href="classCFmiPcAppDlg.html#ac03ee4ee9c5d4d9793439f6e1f3b0153" title="Display the log viewer. //!">CFmiPcAppDlg::OnViewlog</a>
<a name="l00923"></a><a class="code" href="classCFmiPcAppDlg.html#ac03ee4ee9c5d4d9793439f6e1f3b0153">00923</a>     (
<a name="l00924"></a>00924     BOOL aOpenOther
<a name="l00925"></a>00925     )
<a name="l00926"></a>00926 {
<a name="l00927"></a>00927     <span class="keyword">delete</span> mLogViewerDlg;
<a name="l00928"></a>00928 
<a name="l00929"></a>00929     mLogViewerDlg = <span class="keyword">new</span> <a class="code" href="classCLogViewerDlg.html" title="Modeless log viewer dialog //!">CLogViewerDlg</a>( mLogParser, <span class="keyword">this</span>, aOpenOther );
<a name="l00930"></a>00930     mLogViewerDlg-&gt;Create( <a class="code" href="resource_8h.html#ab79389b83277cab6653414cbedbf7de6">IDD_LOG</a> );
<a name="l00931"></a>00931     mLogViewerDlg-&gt;ShowWindow( SW_SHOW );
<a name="l00932"></a>00932 
<a name="l00933"></a>00933     <span class="comment">//disable button so multiple dialogs cannot be opened</span>
<a name="l00934"></a>00934     GetDlgItem( IDC_MAIN_BTN_VIEW_LOG )-&gt;EnableWindow( FALSE );
<a name="l00935"></a>00935 }
<a name="l00936"></a>00936 
<a name="l00937"></a>00937 <span class="comment">//----------------------------------------------------------------------</span>
<a name="l00949"></a>00949 <span class="comment"></span><span class="comment">//----------------------------------------------------------------------</span>
<a name="l00950"></a>00950 CString <a class="code" href="classCFmiPcAppDlg.html#a62c9216547d4f311e37bf4041a12e52c" title="Translate a product ID into a display name. //!">CFmiPcAppDlg::getProductName</a>
<a name="l00951"></a><a class="code" href="classCFmiPcAppDlg.html#a62c9216547d4f311e37bf4041a12e52c">00951</a>     (
<a name="l00952"></a>00952     <a class="code" href="garmin__types_8h.html#a2e00abb078d312d1d8c4fbcd6be343d8" title="16-bit unsigned integer">uint16</a> aProductId
<a name="l00953"></a>00953     )
<a name="l00954"></a>00954 {
<a name="l00955"></a>00955     CString result;
<a name="l00956"></a>00956     map&lt;uint16, CString&gt;::iterator iter = mProductNames.find( aProductId );
<a name="l00957"></a>00957     <span class="keywordflow">if</span>( iter == mProductNames.end() )
<a name="l00958"></a>00958     {
<a name="l00959"></a>00959         result.Format( _T(<span class="stringliteral">&quot;Unknown (%u)&quot;</span>), aProductId );
<a name="l00960"></a>00960     }
<a name="l00961"></a>00961     <span class="keywordflow">else</span>
<a name="l00962"></a>00962     {
<a name="l00963"></a>00963         result = iter-&gt;second;
<a name="l00964"></a>00964     }
<a name="l00965"></a>00965 
<a name="l00966"></a>00966     <span class="keywordflow">return</span> result;
<a name="l00967"></a>00967 }
<a name="l00968"></a>00968 
<a name="l00969"></a>00969 <span class="comment">//----------------------------------------------------------------------</span>
<a name="l00971"></a>00971 <span class="comment"></span><span class="comment">//----------------------------------------------------------------------</span>
<a name="l00972"></a><a class="code" href="classCFmiPcAppDlg.html#a7d942bdbefdfbd295c117959a7ec3ba6">00972</a> <span class="keywordtype">void</span> <a class="code" href="classCFmiPcAppDlg.html#a7d942bdbefdfbd295c117959a7ec3ba6" title="Initialize the list of product names.">CFmiPcAppDlg::initProductNames</a>()
<a name="l00973"></a>00973 {
<a name="l00974"></a>00974     <a class="code" href="classCFmiPcAppDlg.html#ab2d8176d4cfa5379c6d2a46c2f438f38" title="Map of numeric product IDs to displayable names.">mProductNames</a>.clear();
<a name="l00975"></a>00975     <a class="code" href="classCFmiPcAppDlg.html#ab2d8176d4cfa5379c6d2a46c2f438f38" title="Map of numeric product IDs to displayable names.">mProductNames</a>[ 404 ] = CString(<span class="stringliteral">&quot;StreetPilot 2720&quot;</span>);
<a name="l00976"></a>00976     <a class="code" href="classCFmiPcAppDlg.html#ab2d8176d4cfa5379c6d2a46c2f438f38" title="Map of numeric product IDs to displayable names.">mProductNames</a>[ 412 ] = CString(<span class="stringliteral">&quot;StreetPilot 7000 Series&quot;</span>);
<a name="l00977"></a>00977     <a class="code" href="classCFmiPcAppDlg.html#ab2d8176d4cfa5379c6d2a46c2f438f38" title="Map of numeric product IDs to displayable names.">mProductNames</a>[ 481 ] = CString(<span class="stringliteral">&quot;StreetPilot c340&quot;</span>);
<a name="l00978"></a>00978     <a class="code" href="classCFmiPcAppDlg.html#ab2d8176d4cfa5379c6d2a46c2f438f38" title="Map of numeric product IDs to displayable names.">mProductNames</a>[ 520 ] = CString(<span class="stringliteral">&quot;StreetPilot 2820&quot;</span>);
<a name="l00979"></a>00979     <a class="code" href="classCFmiPcAppDlg.html#ab2d8176d4cfa5379c6d2a46c2f438f38" title="Map of numeric product IDs to displayable names.">mProductNames</a>[ 539 ] = CString(<span class="stringliteral">&quot;StreetPilot c500 Series&quot;</span>);
<a name="l00980"></a>00980     <a class="code" href="classCFmiPcAppDlg.html#ab2d8176d4cfa5379c6d2a46c2f438f38" title="Map of numeric product IDs to displayable names.">mProductNames</a>[ 566 ] = CString(<span class="stringliteral">&quot;nuvi 310/360/370&quot;</span>);
<a name="l00981"></a>00981     <a class="code" href="classCFmiPcAppDlg.html#ab2d8176d4cfa5379c6d2a46c2f438f38" title="Map of numeric product IDs to displayable names.">mProductNames</a>[ 580 ] = CString(<span class="stringliteral">&quot;zumo 500 Series&quot;</span>);
<a name="l00982"></a>00982     <a class="code" href="classCFmiPcAppDlg.html#ab2d8176d4cfa5379c6d2a46c2f438f38" title="Map of numeric product IDs to displayable names.">mProductNames</a>[ 596 ] = CString(<span class="stringliteral">&quot;nuvi 600 Series&quot;</span>);
<a name="l00983"></a>00983     <a class="code" href="classCFmiPcAppDlg.html#ab2d8176d4cfa5379c6d2a46c2f438f38" title="Map of numeric product IDs to displayable names.">mProductNames</a>[ 640 ] = CString(<span class="stringliteral">&quot;nuvi 300/350 Chinese&quot;</span>);
<a name="l00984"></a>00984     <a class="code" href="classCFmiPcAppDlg.html#ab2d8176d4cfa5379c6d2a46c2f438f38" title="Map of numeric product IDs to displayable names.">mProductNames</a>[ 641 ] = CString(<span class="stringliteral">&quot;nuvi 300/350 Japanese&quot;</span>);
<a name="l00985"></a>00985     <a class="code" href="classCFmiPcAppDlg.html#ab2d8176d4cfa5379c6d2a46c2f438f38" title="Map of numeric product IDs to displayable names.">mProductNames</a>[ 642 ] = CString(<span class="stringliteral">&quot;nuvi 300/350 Thai&quot;</span>);
<a name="l00986"></a>00986     <a class="code" href="classCFmiPcAppDlg.html#ab2d8176d4cfa5379c6d2a46c2f438f38" title="Map of numeric product IDs to displayable names.">mProductNames</a>[ 643 ] = CString(<span class="stringliteral">&quot;nuvi 310/360 Chinese&quot;</span>);
<a name="l00987"></a>00987     <a class="code" href="classCFmiPcAppDlg.html#ab2d8176d4cfa5379c6d2a46c2f438f38" title="Map of numeric product IDs to displayable names.">mProductNames</a>[ 644 ] = CString(<span class="stringliteral">&quot;nuvi 310/360 Japanese&quot;</span>);
<a name="l00988"></a>00988     <a class="code" href="classCFmiPcAppDlg.html#ab2d8176d4cfa5379c6d2a46c2f438f38" title="Map of numeric product IDs to displayable names.">mProductNames</a>[ 645 ] = CString(<span class="stringliteral">&quot;nuvi 310/360 Thai&quot;</span>);
<a name="l00989"></a>00989     <a class="code" href="classCFmiPcAppDlg.html#ab2d8176d4cfa5379c6d2a46c2f438f38" title="Map of numeric product IDs to displayable names.">mProductNames</a>[ 655 ] = CString(<span class="stringliteral">&quot;nuvi 310/360 Taiwanese&quot;</span>);
<a name="l00990"></a>00990     <a class="code" href="classCFmiPcAppDlg.html#ab2d8176d4cfa5379c6d2a46c2f438f38" title="Map of numeric product IDs to displayable names.">mProductNames</a>[ 656 ] = CString(<span class="stringliteral">&quot;nuvi 310/360 Russian&quot;</span>);
<a name="l00991"></a>00991     <a class="code" href="classCFmiPcAppDlg.html#ab2d8176d4cfa5379c6d2a46c2f438f38" title="Map of numeric product IDs to displayable names.">mProductNames</a>[ 657 ] = CString(<span class="stringliteral">&quot;nuvi 310/360 Arabic&quot;</span>);
<a name="l00992"></a>00992     <a class="code" href="classCFmiPcAppDlg.html#ab2d8176d4cfa5379c6d2a46c2f438f38" title="Map of numeric product IDs to displayable names.">mProductNames</a>[ 706 ] = CString(<span class="stringliteral">&quot;zumo 500 Series Taiwanese&quot;</span>);
<a name="l00993"></a>00993     <a class="code" href="classCFmiPcAppDlg.html#ab2d8176d4cfa5379c6d2a46c2f438f38" title="Map of numeric product IDs to displayable names.">mProductNames</a>[ 722 ] = CString(<span class="stringliteral">&quot;zumo 500 Series Japanese&quot;</span>);
<a name="l00994"></a>00994     <a class="code" href="classCFmiPcAppDlg.html#ab2d8176d4cfa5379c6d2a46c2f438f38" title="Map of numeric product IDs to displayable names.">mProductNames</a>[ 723 ] = CString(<span class="stringliteral">&quot;nuvi 500 Series&quot;</span>);
<a name="l00995"></a>00995     <a class="code" href="classCFmiPcAppDlg.html#ab2d8176d4cfa5379c6d2a46c2f438f38" title="Map of numeric product IDs to displayable names.">mProductNames</a>[ 726 ] = CString(<span class="stringliteral">&quot;nuvi 800 Series&quot;</span>);
<a name="l00996"></a>00996     <a class="code" href="classCFmiPcAppDlg.html#ab2d8176d4cfa5379c6d2a46c2f438f38" title="Map of numeric product IDs to displayable names.">mProductNames</a>[ 743 ] = CString(<span class="stringliteral">&quot;nuvi 5000 Series&quot;</span>);
<a name="l00997"></a>00997     <a class="code" href="classCFmiPcAppDlg.html#ab2d8176d4cfa5379c6d2a46c2f438f38" title="Map of numeric product IDs to displayable names.">mProductNames</a>[ 754 ] = CString(<span class="stringliteral">&quot;nuvi 700 Series&quot;</span>);
<a name="l00998"></a>00998     <a class="code" href="classCFmiPcAppDlg.html#ab2d8176d4cfa5379c6d2a46c2f438f38" title="Map of numeric product IDs to displayable names.">mProductNames</a>[ 827 ] = CString(<span class="stringliteral">&quot;nuvi 205W Series&quot;</span>);
<a name="l00999"></a>00999     <a class="code" href="classCFmiPcAppDlg.html#ab2d8176d4cfa5379c6d2a46c2f438f38" title="Map of numeric product IDs to displayable names.">mProductNames</a>[ 836 ] = CString(<span class="stringliteral">&quot;nuvi 700 Series Taiwanese&quot;</span>);
<a name="l01000"></a>01000     <a class="code" href="classCFmiPcAppDlg.html#ab2d8176d4cfa5379c6d2a46c2f438f38" title="Map of numeric product IDs to displayable names.">mProductNames</a>[ 844 ] = CString(<span class="stringliteral">&quot;nuvi 700 Series Chinese&quot;</span>);
<a name="l01001"></a>01001     <a class="code" href="classCFmiPcAppDlg.html#ab2d8176d4cfa5379c6d2a46c2f438f38" title="Map of numeric product IDs to displayable names.">mProductNames</a>[ 851 ] = CString(<span class="stringliteral">&quot;nuvi 205 Series&quot;</span>);
<a name="l01002"></a>01002     <a class="code" href="classCFmiPcAppDlg.html#ab2d8176d4cfa5379c6d2a46c2f438f38" title="Map of numeric product IDs to displayable names.">mProductNames</a>[ 855 ] = CString(<span class="stringliteral">&quot;nuvi 300/350&quot;</span>);
<a name="l01003"></a>01003     <a class="code" href="classCFmiPcAppDlg.html#ab2d8176d4cfa5379c6d2a46c2f438f38" title="Map of numeric product IDs to displayable names.">mProductNames</a>[ 856 ] = CString(<span class="stringliteral">&quot;nuvi 310/360/370&quot;</span>);
<a name="l01004"></a>01004     <a class="code" href="classCFmiPcAppDlg.html#ab2d8176d4cfa5379c6d2a46c2f438f38" title="Map of numeric product IDs to displayable names.">mProductNames</a>[ 870 ] = CString(<span class="stringliteral">&quot;nuvi 705 Series&quot;</span>);
<a name="l01005"></a>01005     <a class="code" href="classCFmiPcAppDlg.html#ab2d8176d4cfa5379c6d2a46c2f438f38" title="Map of numeric product IDs to displayable names.">mProductNames</a>[ 905 ] = CString(<span class="stringliteral">&quot;nuvi 700 Series Sing/Malay&quot;</span>);
<a name="l01006"></a>01006     <a class="code" href="classCFmiPcAppDlg.html#ab2d8176d4cfa5379c6d2a46c2f438f38" title="Map of numeric product IDs to displayable names.">mProductNames</a>[ 906 ] = CString(<span class="stringliteral">&quot;nuvi 700 Series Thai&quot;</span>);
<a name="l01007"></a>01007     <a class="code" href="classCFmiPcAppDlg.html#ab2d8176d4cfa5379c6d2a46c2f438f38" title="Map of numeric product IDs to displayable names.">mProductNames</a>[ 925 ] = CString(<span class="stringliteral">&quot;nuvi 700 Series Indonesian&quot;</span>);
<a name="l01008"></a>01008     <a class="code" href="classCFmiPcAppDlg.html#ab2d8176d4cfa5379c6d2a46c2f438f38" title="Map of numeric product IDs to displayable names.">mProductNames</a>[ 926 ] = CString(<span class="stringliteral">&quot;nuvi 205 Series Indonesian&quot;</span>);
<a name="l01009"></a>01009     <a class="code" href="classCFmiPcAppDlg.html#ab2d8176d4cfa5379c6d2a46c2f438f38" title="Map of numeric product IDs to displayable names.">mProductNames</a>[ 927 ] = CString(<span class="stringliteral">&quot;nuvi 205 Series Sing/Malay&quot;</span>);
<a name="l01010"></a>01010     <a class="code" href="classCFmiPcAppDlg.html#ab2d8176d4cfa5379c6d2a46c2f438f38" title="Map of numeric product IDs to displayable names.">mProductNames</a>[ 928 ] = CString(<span class="stringliteral">&quot;nuvi 205 Series Chinese&quot;</span>);
<a name="l01011"></a>01011     <a class="code" href="classCFmiPcAppDlg.html#ab2d8176d4cfa5379c6d2a46c2f438f38" title="Map of numeric product IDs to displayable names.">mProductNames</a>[ 929 ] = CString(<span class="stringliteral">&quot;nuvi 205W Series Indonesian&quot;</span>);
<a name="l01012"></a>01012     <a class="code" href="classCFmiPcAppDlg.html#ab2d8176d4cfa5379c6d2a46c2f438f38" title="Map of numeric product IDs to displayable names.">mProductNames</a>[ 930 ] = CString(<span class="stringliteral">&quot;nuvi 205W Series Sing/Malay&quot;</span>);
<a name="l01013"></a>01013     <a class="code" href="classCFmiPcAppDlg.html#ab2d8176d4cfa5379c6d2a46c2f438f38" title="Map of numeric product IDs to displayable names.">mProductNames</a>[ 931 ] = CString(<span class="stringliteral">&quot;nuvi 205W Series Chinese&quot;</span>);
<a name="l01014"></a>01014     <a class="code" href="classCFmiPcAppDlg.html#ab2d8176d4cfa5379c6d2a46c2f438f38" title="Map of numeric product IDs to displayable names.">mProductNames</a>[ 932 ] = CString(<span class="stringliteral">&quot;nuvi 205W Series Taiwanese&quot;</span>);
<a name="l01015"></a>01015     <a class="code" href="classCFmiPcAppDlg.html#ab2d8176d4cfa5379c6d2a46c2f438f38" title="Map of numeric product IDs to displayable names.">mProductNames</a>[ 933 ] = CString(<span class="stringliteral">&quot;nuvi 205W Series Japanese&quot;</span>);
<a name="l01016"></a>01016     <a class="code" href="classCFmiPcAppDlg.html#ab2d8176d4cfa5379c6d2a46c2f438f38" title="Map of numeric product IDs to displayable names.">mProductNames</a>[ 943 ] = CString(<span class="stringliteral">&quot;nuvi 465T&quot;</span>);
<a name="l01017"></a>01017     <a class="code" href="classCFmiPcAppDlg.html#ab2d8176d4cfa5379c6d2a46c2f438f38" title="Map of numeric product IDs to displayable names.">mProductNames</a>[ 958 ] = CString(<span class="stringliteral">&quot;nuvi 5000 Taiwanese&quot;</span>);
<a name="l01018"></a>01018     <a class="code" href="classCFmiPcAppDlg.html#ab2d8176d4cfa5379c6d2a46c2f438f38" title="Map of numeric product IDs to displayable names.">mProductNames</a>[ 959 ] = CString(<span class="stringliteral">&quot;nuvi 5000 Chinese&quot;</span>);
<a name="l01019"></a>01019     <a class="code" href="classCFmiPcAppDlg.html#ab2d8176d4cfa5379c6d2a46c2f438f38" title="Map of numeric product IDs to displayable names.">mProductNames</a>[ 971 ] = CString(<span class="stringliteral">&quot;nuvi 1200 Series&quot;</span>);
<a name="l01020"></a>01020     <a class="code" href="classCFmiPcAppDlg.html#ab2d8176d4cfa5379c6d2a46c2f438f38" title="Map of numeric product IDs to displayable names.">mProductNames</a>[ 972 ] = CString(<span class="stringliteral">&quot;nuvi 1300/1400 Series&quot;</span>);
<a name="l01021"></a>01021     <a class="code" href="classCFmiPcAppDlg.html#ab2d8176d4cfa5379c6d2a46c2f438f38" title="Map of numeric product IDs to displayable names.">mProductNames</a>[ 1001 ] = CString(<span class="stringliteral">&quot;nuvi 205W Series Thai&quot;</span>);
<a name="l01022"></a>01022     <a class="code" href="classCFmiPcAppDlg.html#ab2d8176d4cfa5379c6d2a46c2f438f38" title="Map of numeric product IDs to displayable names.">mProductNames</a>[ 1002 ] = CString(<span class="stringliteral">&quot;nuvi 205 Series India&quot;</span>);
<a name="l01023"></a>01023     <a class="code" href="classCFmiPcAppDlg.html#ab2d8176d4cfa5379c6d2a46c2f438f38" title="Map of numeric product IDs to displayable names.">mProductNames</a>[ 1007 ] = CString(<span class="stringliteral">&quot;nuvi 705 Series Taiwanese&quot;</span>);
<a name="l01024"></a>01024     <a class="code" href="classCFmiPcAppDlg.html#ab2d8176d4cfa5379c6d2a46c2f438f38" title="Map of numeric product IDs to displayable names.">mProductNames</a>[ 1074 ] = CString(<span class="stringliteral">&quot;nuvi 205 Series MT&quot;</span>);
<a name="l01025"></a>01025     <a class="code" href="classCFmiPcAppDlg.html#ab2d8176d4cfa5379c6d2a46c2f438f38" title="Map of numeric product IDs to displayable names.">mProductNames</a>[ 1077 ] = CString(<span class="stringliteral">&quot;nuvi 1480 Series Japanese&quot;</span>);
<a name="l01026"></a>01026     <a class="code" href="classCFmiPcAppDlg.html#ab2d8176d4cfa5379c6d2a46c2f438f38" title="Map of numeric product IDs to displayable names.">mProductNames</a>[ 1091 ] = CString(<span class="stringliteral">&quot;nuvi 205W Series MT&quot;</span>);
<a name="l01027"></a>01027     <a class="code" href="classCFmiPcAppDlg.html#ab2d8176d4cfa5379c6d2a46c2f438f38" title="Map of numeric product IDs to displayable names.">mProductNames</a>[ 1104 ] = CString(<span class="stringliteral">&quot;nuvi 1300 Series MT&quot;</span>);
<a name="l01028"></a>01028     <a class="code" href="classCFmiPcAppDlg.html#ab2d8176d4cfa5379c6d2a46c2f438f38" title="Map of numeric product IDs to displayable names.">mProductNames</a>[ 1106 ] = CString(<span class="stringliteral">&quot;nuvi 1100/1200 Series MT&quot;</span>);
<a name="l01029"></a>01029     <a class="code" href="classCFmiPcAppDlg.html#ab2d8176d4cfa5379c6d2a46c2f438f38" title="Map of numeric product IDs to displayable names.">mProductNames</a>[ 1186 ] = CString(<span class="stringliteral">&quot;nuvi 2200 Series&quot;</span>);
<a name="l01030"></a>01030     <a class="code" href="classCFmiPcAppDlg.html#ab2d8176d4cfa5379c6d2a46c2f438f38" title="Map of numeric product IDs to displayable names.">mProductNames</a>[ 1187 ] = CString(<span class="stringliteral">&quot;nuvi 2300 Series&quot;</span>);
<a name="l01031"></a>01031     <a class="code" href="classCFmiPcAppDlg.html#ab2d8176d4cfa5379c6d2a46c2f438f38" title="Map of numeric product IDs to displayable names.">mProductNames</a>[ 1269 ] = CString(<span class="stringliteral">&quot;dezl 560 Series&quot;</span>);
<a name="l01032"></a>01032     <a class="code" href="classCFmiPcAppDlg.html#ab2d8176d4cfa5379c6d2a46c2f438f38" title="Map of numeric product IDs to displayable names.">mProductNames</a>[ 1273 ] = CString(<span class="stringliteral">&quot;nuvi 2400 Series&quot;</span>);
<a name="l01033"></a>01033 }
<a name="l01034"></a>01034 
<a name="l01035"></a>01035 <span class="comment">//----------------------------------------------------------------------</span>
<a name="l01040"></a>01040 <span class="comment"></span><span class="comment">//----------------------------------------------------------------------</span>
<a name="l01041"></a><a class="code" href="classCFmiPcAppDlg.html#a330175486e6ca485e8dc2028accc84f7">01041</a> <span class="keywordtype">void</span> <a class="code" href="classCFmiPcAppDlg.html#a330175486e6ca485e8dc2028accc84f7" title="Initialize the stop list. //!">CFmiPcAppDlg::initStopList</a>()
<a name="l01042"></a>01042 {
<a name="l01043"></a>01043     <a class="code" href="classCFmiPcAppDlg.html#aead4f57d93a41526b3614d153752ae44" title="The FmiApplicationLayer object used to communicate with the client.">mCom</a>.<a class="code" href="classFmiApplicationLayer.html#af5689631eaffb347c3397e49ed9939f1" title="If TRUE, the stop list has been initialized.">mStopListInitialized</a> = TRUE;
<a name="l01044"></a>01044 
<a name="l01045"></a>01045 <span class="preprocessor">#if( FMI_SUPPORT_A603 )</span>
<a name="l01046"></a>01046 <span class="preprocessor"></span>    <a class="code" href="classFileBackedMap.html" title="Map whose contents are also saved to a file. //!">FileBackedMap&lt;StopListItem&gt;::const_iterator</a> iter;
<a name="l01047"></a>01047     <span class="keywordflow">for</span>( iter = <a class="code" href="classCFmiPcAppDlg.html#aead4f57d93a41526b3614d153752ae44" title="The FmiApplicationLayer object used to communicate with the client.">mCom</a>.<a class="code" href="classFmiApplicationLayer.html#a16cff1b5e13bf0ef80c4f36cc7153289" title="Map of unique ID to stop details for all A603 stops on the client //!">mA603Stops</a>.<a class="code" href="classFileBackedMap.html#a420dcfaec5bb80d2e8e23062616debdb" title="Iterator positioned at the first element in the map.">begin</a>(); iter != <a class="code" href="classCFmiPcAppDlg.html#aead4f57d93a41526b3614d153752ae44" title="The FmiApplicationLayer object used to communicate with the client.">mCom</a>.<a class="code" href="classFmiApplicationLayer.html#a16cff1b5e13bf0ef80c4f36cc7153289" title="Map of unique ID to stop details for all A603 stops on the client //!">mA603Stops</a>.<a class="code" href="classFileBackedMap.html#a9eb9904a7bdd65c02dd0886f4fb30ccd" title="Iterator positioned after the last element in the map.">end</a>(); iter++ )
<a name="l01048"></a>01048     {
<a name="l01049"></a>01049         <a class="code" href="classCFmiPcAppDlg.html#aead4f57d93a41526b3614d153752ae44" title="The FmiApplicationLayer object used to communicate with the client.">mCom</a>.<a class="code" href="classFmiApplicationLayer.html#a5f229176e433355455da37071c04dfe4" title="Initiate the Stop Status protocol to update an A603 stop. //!">sendStopStatusRequest</a>( iter-&gt;first, <a class="code" href="fmi_8h.html#a6d34b6f06b323cebd607b6adfe874b3fa5eb78ffcfc40677e52ce9089d8c83772">REQUEST_STOP_STATUS</a> );
<a name="l01050"></a>01050     }
<a name="l01051"></a>01051 <span class="preprocessor">#endif</span>
<a name="l01052"></a>01052 <span class="preprocessor"></span>}
<a name="l01053"></a>01053 
<a name="l01054"></a>01054 <span class="comment">//----------------------------------------------------------------------</span>
<a name="l01057"></a>01057 <span class="comment"></span><span class="comment">//----------------------------------------------------------------------</span>
<a name="l01058"></a><a class="code" href="classCFmiPcAppDlg.html#a18cfe697feb03f6ae8f9f80f61b0b555">01058</a> BOOL <a class="code" href="classCFmiPcAppDlg.html#a18cfe697feb03f6ae8f9f80f61b0b555" title="Show the Select Comm Port dialog. //!">CFmiPcAppDlg::selectComPort</a>()
<a name="l01059"></a>01059 {
<a name="l01060"></a>01060     <a class="code" href="classCSelectCommPortDlg.html" title="Modal dialog allowing the user to select the port to use to //! communicate with the client...">CSelectCommPortDlg</a> dlg( <span class="keyword">this</span> );
<a name="l01061"></a>01061     <span class="keywordflow">if</span>( dlg.DoModal() == IDOK )
<a name="l01062"></a>01062         <span class="keywordflow">return</span> <a class="code" href="garmin__types_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l01063"></a>01063     <span class="keywordflow">else</span>
<a name="l01064"></a>01064         <span class="keywordflow">return</span> FALSE;
<a name="l01065"></a>01065 }
<a name="l01066"></a>01066 
<a name="l01067"></a>01067 <span class="comment">//----------------------------------------------------------------------</span>
<a name="l01072"></a>01072 <span class="comment"></span><span class="comment">//----------------------------------------------------------------------</span>
<a name="l01073"></a><a class="code" href="classCFmiPcAppDlg.html#a2ccc72f622001989fff0856d01cc5fa1">01073</a> <span class="keywordtype">void</span> <a class="code" href="classCFmiPcAppDlg.html#a2ccc72f622001989fff0856d01cc5fa1" title="Ask the user whether to open a log file. //!">CFmiPcAppDlg::doOpenLogFileQuestion</a>()
<a name="l01074"></a>01074 {
<a name="l01075"></a>01075     <span class="keywordflow">if</span>( MessageBox( _T(<span class="stringliteral">&quot;Would you like to open a log file without connecting to a unit first?&quot;</span>), _T(<span class="stringliteral">&quot;Question?&quot;</span>), MB_YESNO ) == IDYES )
<a name="l01076"></a>01076     {
<a name="l01077"></a>01077         <a class="code" href="classCFmiPcAppDlg.html#ac03ee4ee9c5d4d9793439f6e1f3b0153" title="Display the log viewer. //!">OnViewlog</a>( <a class="code" href="garmin__types_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a> );
<a name="l01078"></a>01078         <a class="code" href="classCFmiPcAppDlg.html#a1e13b88616fde95adac0cafacd990029" title="If TRUE, all timers should be ignored.">mIgnoreTimer</a> = FALSE;
<a name="l01079"></a>01079     }
<a name="l01080"></a>01080     <span class="keywordflow">else</span>
<a name="l01081"></a>01081     {
<a name="l01082"></a>01082         <a class="code" href="classCFmiPcAppDlg.html#a08ac17f0ba32be897b9e17be56bec533" title="Ask the user to select a mCom port. //!">doComPortQuestion</a>();
<a name="l01083"></a>01083     }
<a name="l01084"></a>01084 }
<a name="l01085"></a>01085 
<a name="l01086"></a>01086 <span class="comment">//----------------------------------------------------------------------</span>
<a name="l01091"></a>01091 <span class="comment"></span><span class="comment">//----------------------------------------------------------------------</span>
<a name="l01092"></a><a class="code" href="classCFmiPcAppDlg.html#a08ac17f0ba32be897b9e17be56bec533">01092</a> <span class="keywordtype">void</span> <a class="code" href="classCFmiPcAppDlg.html#a08ac17f0ba32be897b9e17be56bec533" title="Ask the user to select a mCom port. //!">CFmiPcAppDlg::doComPortQuestion</a>()
<a name="l01093"></a>01093 {
<a name="l01094"></a>01094     <a class="code" href="classCFmiPcAppDlg.html#a1e13b88616fde95adac0cafacd990029" title="If TRUE, all timers should be ignored.">mIgnoreTimer</a> = TRUE;
<a name="l01095"></a>01095     <span class="keywordflow">if</span>( <a class="code" href="classCFmiPcAppDlg.html#a18cfe697feb03f6ae8f9f80f61b0b555" title="Show the Select Comm Port dialog. //!">selectComPort</a>() )
<a name="l01096"></a>01096     {
<a name="l01097"></a>01097         <a class="code" href="classCFmiPcAppDlg.html#abe24a8da234922d273f48f6185205637" title="Click handler for the Send Enable button. //!">OnBnClickedEnable</a>();
<a name="l01098"></a>01098         <a class="code" href="classCFmiPcAppDlg.html#a6fc1891112d5ecbc0338735f45bb4560" title="If TRUE, the user has selected a FmiApplicationLayer port.">mComPortSelected</a> = TRUE;
<a name="l01099"></a>01099         <a class="code" href="classCFmiPcAppDlg.html#a1e13b88616fde95adac0cafacd990029" title="If TRUE, all timers should be ignored.">mIgnoreTimer</a> = FALSE;
<a name="l01100"></a>01100     }
<a name="l01101"></a>01101     <span class="keywordflow">else</span>
<a name="l01102"></a>01102     {
<a name="l01103"></a>01103         AfxGetMainWnd()-&gt;SendMessage( WM_CLOSE );
<a name="l01104"></a>01104     }
<a name="l01105"></a>01105 }
<a name="l01106"></a>01106 
<a name="l01107"></a>01107 <span class="preprocessor">#if( FMI_SUPPORT_A602 )</span>
<a name="l01108"></a>01108 <span class="preprocessor"></span><span class="comment">//----------------------------------------------------------------------</span>
<a name="l01116"></a>01116 <span class="comment"></span><span class="comment">//----------------------------------------------------------------------</span>
<a name="l01117"></a><a class="code" href="classCFmiPcAppDlg.html#a974d839ddf1fbd07a229c0bf472a47c8">01117</a> <span class="keywordtype">void</span> <a class="code" href="classCFmiPcAppDlg.html#a974d839ddf1fbd07a229c0bf472a47c8" title="Click handler for the Send (FMI Packet) button //!">CFmiPcAppDlg::OnBnClickedSend</a>()
<a name="l01118"></a>01118 {
<a name="l01119"></a>01119     <span class="keywordtype">char</span>   fmiPayloadHex[<a class="code" href="garmin__types_8h.html#a6303f7392a2d06be5a121c54278d561b" title="Maximum payload size, before DLE stuffing.">MAX_PAYLOAD_SIZE</a> * 2];
<a name="l01120"></a>01120     <a class="code" href="garmin__types_8h.html#adde6aaee8457bee49c2a92621fe22b79" title="8-bit unsigned integer">uint8</a>  fmiPayload[MAX_PAYLOAD_SIZE];
<a name="l01121"></a>01121     <a class="code" href="garmin__types_8h.html#adde6aaee8457bee49c2a92621fe22b79" title="8-bit unsigned integer">uint8</a>  fmiPayloadSize = 0;
<a name="l01122"></a>01122     <span class="keywordtype">char</span>   fmiPacketIdHex[6];
<a name="l01123"></a>01123     <a class="code" href="garmin__types_8h.html#a2e00abb078d312d1d8c4fbcd6be343d8" title="16-bit unsigned integer">uint16</a> fmiPacketId = 0;
<a name="l01124"></a>01124 
<a name="l01125"></a>01125     <span class="comment">//get data</span>
<a name="l01126"></a>01126     UpdateData( <a class="code" href="garmin__types_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a> );
<a name="l01127"></a>01127     WideCharToMultiByte( <a class="code" href="classCFmiPcAppDlg.html#aead4f57d93a41526b3614d153752ae44" title="The FmiApplicationLayer object used to communicate with the client.">mCom</a>.<a class="code" href="classFmiApplicationLayer.html#aa8bda2692621f9603e6a2b927a944e56" title="Code page used for encoding of text fields when communicating //! with the client.">mClientCodepage</a>, 0, <a class="code" href="classCFmiPcAppDlg.html#a7912818e88c5d99a6383574a1f73a3a0" title="Contents of the FMI Packet (payload) edit box //!">mPacketData</a>, -1, fmiPayloadHex, <span class="keyword">sizeof</span>( fmiPayloadHex ), NULL, NULL );
<a name="l01128"></a>01128     WideCharToMultiByte( <a class="code" href="classCFmiPcAppDlg.html#aead4f57d93a41526b3614d153752ae44" title="The FmiApplicationLayer object used to communicate with the client.">mCom</a>.<a class="code" href="classFmiApplicationLayer.html#aa8bda2692621f9603e6a2b927a944e56" title="Code page used for encoding of text fields when communicating //! with the client.">mClientCodepage</a>, 0, <a class="code" href="classCFmiPcAppDlg.html#a7b4c017e8361789aa9193b3878da5cbd" title="Contents of the FMI Packet ID edit box //!">mPacketId</a>, -1, fmiPacketIdHex, <span class="keyword">sizeof</span>( fmiPacketIdHex ), NULL, NULL );
<a name="l01129"></a>01129     fmiPayloadHex[<a class="code" href="garmin__types_8h.html#a6303f7392a2d06be5a121c54278d561b" title="Maximum payload size, before DLE stuffing.">MAX_PAYLOAD_SIZE</a> * 2 - 1] = <span class="charliteral">&#39;\0&#39;</span>;
<a name="l01130"></a>01130     fmiPayload[0] = <span class="charliteral">&#39;\0&#39;</span>;
<a name="l01131"></a>01131 
<a name="l01132"></a>01132     <span class="keywordflow">if</span>( !strncmp( fmiPacketIdHex, <span class="stringliteral">&quot;0x&quot;</span>, 2 ) )
<a name="l01133"></a>01133         fmiPayloadSize = <a class="code" href="util_8cpp.html#a183f777bc512858c85987b31a3a89a94" title="Converts a null-terminated string in hexadecimal format to //! an array of uint16 numbers...">UTIL_hex_to_uint16</a>( fmiPacketIdHex + 2, &amp;fmiPacketId, 1 );
<a name="l01134"></a>01134     <span class="keywordflow">else</span>
<a name="l01135"></a>01135         fmiPayloadSize = <a class="code" href="util_8cpp.html#a183f777bc512858c85987b31a3a89a94" title="Converts a null-terminated string in hexadecimal format to //! an array of uint16 numbers...">UTIL_hex_to_uint16</a>( fmiPacketIdHex, &amp;fmiPacketId, 1 );
<a name="l01136"></a>01136     <span class="keywordflow">if</span>( fmiPayloadSize == 0 )
<a name="l01137"></a>01137     {
<a name="l01138"></a>01138         MessageBox( _T(<span class="stringliteral">&quot; Invalid Hex String in ID field!&quot;</span>), _T(<span class="stringliteral">&quot;Error!&quot;</span>) );
<a name="l01139"></a>01139         <span class="keywordflow">return</span>;
<a name="l01140"></a>01140     }
<a name="l01141"></a>01141 
<a name="l01142"></a>01142     fmiPayloadSize = 0;
<a name="l01143"></a>01143     <span class="keywordflow">if</span>( <a class="code" href="classCFmiPcAppDlg.html#a7912818e88c5d99a6383574a1f73a3a0" title="Contents of the FMI Packet (payload) edit box //!">mPacketData</a> != <span class="stringliteral">&quot;&quot;</span> )
<a name="l01144"></a>01144     {
<a name="l01145"></a>01145         <span class="keywordflow">if</span>( !strncmp( fmiPayloadHex, <span class="stringliteral">&quot;0x&quot;</span>, 2 ) )
<a name="l01146"></a>01146         {
<a name="l01147"></a>01147             fmiPayloadSize = (uint8)<a class="code" href="util_8cpp.html#a09f9609dfb923e0dcb06dd08233dcf0a" title="Convert a hexadecimal ASCII string to an array of uint8 //!">UTIL_hex_to_uint8</a>( fmiPayloadHex + 2, (<a class="code" href="garmin__types_8h.html#adde6aaee8457bee49c2a92621fe22b79" title="8-bit unsigned integer">uint8</a>*)fmiPayload, MAX_PAYLOAD_SIZE );
<a name="l01148"></a>01148         }
<a name="l01149"></a>01149         <span class="keywordflow">else</span>
<a name="l01150"></a>01150         {
<a name="l01151"></a>01151             fmiPayloadSize = (uint8)<a class="code" href="util_8cpp.html#a09f9609dfb923e0dcb06dd08233dcf0a" title="Convert a hexadecimal ASCII string to an array of uint8 //!">UTIL_hex_to_uint8</a>( fmiPayloadHex, (<a class="code" href="garmin__types_8h.html#adde6aaee8457bee49c2a92621fe22b79" title="8-bit unsigned integer">uint8</a>*)fmiPayload, MAX_PAYLOAD_SIZE );
<a name="l01152"></a>01152         }
<a name="l01153"></a>01153         <span class="keywordflow">if</span>( fmiPayloadSize == 0 )
<a name="l01154"></a>01154         {
<a name="l01155"></a>01155             MessageBox( _T(<span class="stringliteral">&quot; Invalid Hex String in Data Field!&quot;</span>), _T(<span class="stringliteral">&quot;Error!&quot;</span>) );
<a name="l01156"></a>01156             <span class="keywordflow">return</span>;
<a name="l01157"></a>01157         }
<a name="l01158"></a>01158     }
<a name="l01159"></a>01159 
<a name="l01160"></a>01160     <a class="code" href="classCFmiPcAppDlg.html#aead4f57d93a41526b3614d153752ae44" title="The FmiApplicationLayer object used to communicate with the client.">mCom</a>.<a class="code" href="classFmiApplicationLayer.html#a83d4dac712ddc9ab126d1fb5b1f7fca1" title="Send an arbitrary FMI packet //!">sendFmiPacket</a>( fmiPacketId, fmiPayload, fmiPayloadSize );
<a name="l01161"></a>01161 }
<a name="l01162"></a>01162 
<a name="l01163"></a>01163 <span class="comment">//----------------------------------------------------------------------</span>
<a name="l01169"></a>01169 <span class="comment"></span><span class="comment">//----------------------------------------------------------------------</span>
<a name="l01170"></a>01170 afx_msg LRESULT <a class="code" href="classCFmiPcAppDlg.html#a558058b93c02bef1159966933d15f560" title="Handler for the Text Message Ack Received event from Com. //!">CFmiPcAppDlg::OnEventTextMsgAck</a>
<a name="l01171"></a><a class="code" href="classCFmiPcAppDlg.html#a558058b93c02bef1159966933d15f560">01171</a>     (
<a name="l01172"></a>01172     WPARAM,
<a name="l01173"></a>01173     LPARAM aEventDataPtr
<a name="l01174"></a>01174     )
<a name="l01175"></a>01175 {
<a name="l01176"></a>01176     <span class="keyword">const</span> <a class="code" href="structtext__msg__ack__event__type.html" title="Structure containing details for a text message ACK from the client.">text_msg_ack_event_type</a> * ackEvent = (<span class="keyword">const</span> <a class="code" href="structtext__msg__ack__event__type.html" title="Structure containing details for a text message ACK from the client.">text_msg_ack_event_type</a> *)aEventDataPtr;
<a name="l01177"></a>01177     <a class="code" href="classCTxtMsgAckDlg.html" title="Modal pop up which displays a text message ack received from //! the client. //!">CTxtMsgAckDlg</a> dlg( <span class="keyword">this</span>, mCom, ackEvent );
<a name="l01178"></a>01178     dlg.DoModal();
<a name="l01179"></a>01179 
<a name="l01180"></a>01180     <span class="keyword">delete</span> ackEvent;
<a name="l01181"></a>01181     <span class="keywordflow">return</span> 0;
<a name="l01182"></a>01182 }
<a name="l01183"></a>01183 <span class="preprocessor">#endif</span>
<a name="l01184"></a>01184 <span class="preprocessor"></span>
<a name="l01185"></a>01185 <span class="preprocessor">#if( FMI_SUPPORT_A603 )</span>
<a name="l01186"></a>01186 <span class="preprocessor"></span><span class="comment">//----------------------------------------------------------------------</span>
<a name="l01189"></a>01189 <span class="comment"></span><span class="comment">//----------------------------------------------------------------------</span>
<a name="l01190"></a><a class="code" href="classCFmiPcAppDlg.html#aa23c5d80ed397d94f1e9466543089681">01190</a> afx_msg <span class="keywordtype">void</span> <a class="code" href="classCFmiPcAppDlg.html#aa23c5d80ed397d94f1e9466543089681" title="Event handler for Auto ETA Request check box. //!">CFmiPcAppDlg::OnBnClickedAutoETA</a>()
<a name="l01191"></a>01191 {
<a name="l01192"></a>01192     UpdateData( <a class="code" href="garmin__types_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a> );
<a name="l01193"></a>01193     <span class="keywordflow">if</span>( <a class="code" href="classCFmiPcAppDlg.html#ae331fc9540d7e9efd02c82728c5fbeeb" title="If TRUE, the Auto ETA Request text box is checked //!">mAutoEtaChecked</a> )
<a name="l01194"></a>01194     {
<a name="l01195"></a>01195         <span class="keywordflow">if</span>( !<a class="code" href="classCFmiPcAppDlg.html#abaaa3f64326def05b431eae2cc1b13c3" title="If true, mEtaTimer is a valid timer ID. //!">mEtaTimerEnabled</a> )
<a name="l01196"></a>01196         {
<a name="l01197"></a>01197             <a class="code" href="classCFmiPcAppDlg.html#a55f1dbc1fca2cff9eebd8d8e1d738283" title="Pointer to the timer ID for the ETA timer (used to disable the timer //! when needed) //!...">mEtaTimer</a> = SetTimer( <a class="code" href="CFmiPcAppDlg_8cpp.html#ab1607f7a01655d3cce2eaef4fbdac704ad2be3b7cd9de6fb84059d6f4fe8a836a">MAIN_ETA_TIMER_ID</a>, <a class="code" href="CFmiPcAppDlg_8cpp.html#a003fb6279f55301fe65abc5dce6c266e" title="Interval between automatic ETA requests, in milliseconds.">MAIN_ETA_TIMER_INTERVAL</a>, NULL );
<a name="l01198"></a>01198             <span class="keywordflow">if</span>( <a class="code" href="classCFmiPcAppDlg.html#a55f1dbc1fca2cff9eebd8d8e1d738283" title="Pointer to the timer ID for the ETA timer (used to disable the timer //! when needed) //!...">mEtaTimer</a> )
<a name="l01199"></a>01199             {
<a name="l01200"></a>01200                 <a class="code" href="classCFmiPcAppDlg.html#abaaa3f64326def05b431eae2cc1b13c3" title="If true, mEtaTimer is a valid timer ID. //!">mEtaTimerEnabled</a> = <span class="keyword">true</span>;
<a name="l01201"></a>01201             }
<a name="l01202"></a>01202             <span class="keywordflow">else</span>
<a name="l01203"></a>01203             {
<a name="l01204"></a>01204                 ::MessageBox( m_hWnd, _T(<span class="stringliteral">&quot;Failed to set periodic ETA timer!&quot;</span>), _T(<span class="stringliteral">&quot;Error&quot;</span>), MB_OK );
<a name="l01205"></a>01205                 <a class="code" href="classCFmiPcAppDlg.html#ae331fc9540d7e9efd02c82728c5fbeeb" title="If TRUE, the Auto ETA Request text box is checked //!">mAutoEtaChecked</a> = FALSE;
<a name="l01206"></a>01206                 UpdateData( FALSE );
<a name="l01207"></a>01207             }
<a name="l01208"></a>01208         }
<a name="l01209"></a>01209     }
<a name="l01210"></a>01210     <span class="keywordflow">else</span>
<a name="l01211"></a>01211     {
<a name="l01212"></a>01212         <span class="keywordflow">if</span>( <a class="code" href="classCFmiPcAppDlg.html#abaaa3f64326def05b431eae2cc1b13c3" title="If true, mEtaTimer is a valid timer ID. //!">mEtaTimerEnabled</a> )
<a name="l01213"></a>01213         {
<a name="l01214"></a>01214             KillTimer( <a class="code" href="classCFmiPcAppDlg.html#a55f1dbc1fca2cff9eebd8d8e1d738283" title="Pointer to the timer ID for the ETA timer (used to disable the timer //! when needed) //!...">mEtaTimer</a> );
<a name="l01215"></a>01215             <a class="code" href="classCFmiPcAppDlg.html#abaaa3f64326def05b431eae2cc1b13c3" title="If true, mEtaTimer is a valid timer ID. //!">mEtaTimerEnabled</a> = <span class="keyword">false</span>;
<a name="l01216"></a>01216         }
<a name="l01217"></a>01217     }
<a name="l01218"></a>01218 }
<a name="l01219"></a>01219 
<a name="l01220"></a>01220 <span class="comment">//----------------------------------------------------------------------</span>
<a name="l01225"></a>01225 <span class="comment"></span><span class="comment">//----------------------------------------------------------------------</span>
<a name="l01226"></a><a class="code" href="classCFmiPcAppDlg.html#a458458ed01b8408dc089c32134dfe220">01226</a> afx_msg <span class="keywordtype">void</span> <a class="code" href="classCFmiPcAppDlg.html#a458458ed01b8408dc089c32134dfe220" title="Click handler for the Change Auto-Arrival button //!">CFmiPcAppDlg::OnBnClickedChgAutoArvl</a>()
<a name="l01227"></a>01227 {
<a name="l01228"></a>01228     <a class="code" href="classCAutoArrivalDlg.html" title="Dialog allowing the user to change the auto-arrival options. //!">CAutoArrivalDlg</a> dlg( <span class="keyword">this</span>, <a class="code" href="classCFmiPcAppDlg.html#aead4f57d93a41526b3614d153752ae44" title="The FmiApplicationLayer object used to communicate with the client.">mCom</a> );
<a name="l01229"></a>01229     dlg.DoModal();
<a name="l01230"></a>01230 }    <span class="comment">/* OnBnClickedChgAutoArvl() */</span>
<a name="l01231"></a>01231 
<a name="l01232"></a>01232 <span class="comment">//----------------------------------------------------------------------</span>
<a name="l01237"></a>01237 <span class="comment"></span><span class="comment">//----------------------------------------------------------------------</span>
<a name="l01238"></a><a class="code" href="classCFmiPcAppDlg.html#a919a2c8416e3384f4673fd3455c3c05d">01238</a> afx_msg <span class="keywordtype">void</span> <a class="code" href="classCFmiPcAppDlg.html#a919a2c8416e3384f4673fd3455c3c05d" title="Click handler for the Delete Data button //!">CFmiPcAppDlg::OnBnClickedDelData</a>()
<a name="l01239"></a>01239 {
<a name="l01240"></a>01240     <a class="code" href="classCDeleteDataDlg.html" title="Dialog allowing the user to delete specified FMI data from //! the client. //!">CDeleteDataDlg</a> dlg( <span class="keyword">this</span>, <a class="code" href="classCFmiPcAppDlg.html#aead4f57d93a41526b3614d153752ae44" title="The FmiApplicationLayer object used to communicate with the client.">mCom</a> );
<a name="l01241"></a>01241     dlg.DoModal();
<a name="l01242"></a>01242 }
<a name="l01243"></a>01243 
<a name="l01244"></a>01244 <span class="comment">//----------------------------------------------------------------------</span>
<a name="l01250"></a>01250 <span class="comment"></span><span class="comment">//----------------------------------------------------------------------</span>
<a name="l01251"></a><a class="code" href="classCFmiPcAppDlg.html#af949471afb107c1ed8514ca23a042280">01251</a> afx_msg <span class="keywordtype">void</span> <a class="code" href="classCFmiPcAppDlg.html#af949471afb107c1ed8514ca23a042280" title="Click handler for the Request ETA button //!">CFmiPcAppDlg::OnBnClickedReqETA</a>()
<a name="l01252"></a>01252 {
<a name="l01253"></a>01253     <a class="code" href="classCFmiPcAppDlg.html#aead4f57d93a41526b3614d153752ae44" title="The FmiApplicationLayer object used to communicate with the client.">mCom</a>.<a class="code" href="classFmiApplicationLayer.html#a9870b74f1e4f1cdf1e9d3e5fb38b0dce" title="Send a request for ETA data. //!">sendEtaRequest</a>();
<a name="l01254"></a>01254 }    <span class="comment">/* OnBnClickedReqETA() */</span>
<a name="l01255"></a>01255 
<a name="l01256"></a>01256 <span class="comment">//----------------------------------------------------------------------</span>
<a name="l01261"></a>01261 <span class="comment"></span><span class="comment">//----------------------------------------------------------------------</span>
<a name="l01262"></a><a class="code" href="classCFmiPcAppDlg.html#a73cc31e40511ac668da179f2d158de80">01262</a> afx_msg LRESULT <a class="code" href="classCFmiPcAppDlg.html#a73cc31e40511ac668da179f2d158de80" title="Handler for the ETA Received event from Com. //!">CFmiPcAppDlg::OnEventEtaReceived</a>( WPARAM, LPARAM )
<a name="l01263"></a>01263 {
<a name="l01264"></a>01264     <span class="comment">//eta data will be transmitted when an active route starts</span>
<a name="l01265"></a>01265     <span class="comment">//On start up, the server requests the eta to make sure there</span>
<a name="l01266"></a>01266     <span class="comment">//wasn&#39;t one active already</span>
<a name="l01267"></a>01267     TCHAR str[14];
<a name="l01268"></a>01268     UpdateData( <a class="code" href="garmin__types_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a> );
<a name="l01269"></a>01269     MultiByteToWideChar( <a class="code" href="classCFmiPcAppDlg.html#aead4f57d93a41526b3614d153752ae44" title="The FmiApplicationLayer object used to communicate with the client.">mCom</a>.<a class="code" href="classFmiApplicationLayer.html#aa8bda2692621f9603e6a2b927a944e56" title="Code page used for encoding of text fields when communicating //! with the client.">mClientCodepage</a>, 0, <a class="code" href="classCFmiPcAppDlg.html#aead4f57d93a41526b3614d153752ae44" title="The FmiApplicationLayer object used to communicate with the client.">mCom</a>.<a class="code" href="classFmiApplicationLayer.html#a5bf59bf77a75f8bfefaefd1372a12353" title="String containing the ETA time from the client, or &amp;quot;invalid&amp;quot; //!">mEtaTime</a>, -1, str, 13 );
<a name="l01270"></a>01270     str[12] = <span class="charliteral">&#39;\0&#39;</span>;
<a name="l01271"></a>01271     <a class="code" href="classCFmiPcAppDlg.html#a94a92186049f15dd61dbd4f072c27beb" title="Contents of the ETA Time text box (arrival time at destination) //!">mEtaTime</a>.Format( _T(<span class="stringliteral">&quot; %s&quot;</span>), str );
<a name="l01272"></a>01272     MultiByteToWideChar( <a class="code" href="classCFmiPcAppDlg.html#aead4f57d93a41526b3614d153752ae44" title="The FmiApplicationLayer object used to communicate with the client.">mCom</a>.<a class="code" href="classFmiApplicationLayer.html#aa8bda2692621f9603e6a2b927a944e56" title="Code page used for encoding of text fields when communicating //! with the client.">mClientCodepage</a>, 0, <a class="code" href="classCFmiPcAppDlg.html#aead4f57d93a41526b3614d153752ae44" title="The FmiApplicationLayer object used to communicate with the client.">mCom</a>.<a class="code" href="classFmiApplicationLayer.html#ac03276e2d094ea1d697f7db5ff1f2897" title="String representing the latitude in decimal degrees (and N or S) //!">mEtaLatitude</a>, -1, str, 14 );
<a name="l01273"></a>01273     str[13] = <span class="charliteral">&#39;\0&#39;</span>;
<a name="l01274"></a>01274     <a class="code" href="classCFmiPcAppDlg.html#abdc93d9e30e064b75763233b4cde7c7d" title="Contents of the ETA Latitude text box (latitude of destination) //!">mEtaLatitude</a>.Format( _T(<span class="stringliteral">&quot; %s&quot;</span>), str );
<a name="l01275"></a>01275     MultiByteToWideChar( <a class="code" href="classCFmiPcAppDlg.html#aead4f57d93a41526b3614d153752ae44" title="The FmiApplicationLayer object used to communicate with the client.">mCom</a>.<a class="code" href="classFmiApplicationLayer.html#aa8bda2692621f9603e6a2b927a944e56" title="Code page used for encoding of text fields when communicating //! with the client.">mClientCodepage</a>, 0, <a class="code" href="classCFmiPcAppDlg.html#aead4f57d93a41526b3614d153752ae44" title="The FmiApplicationLayer object used to communicate with the client.">mCom</a>.<a class="code" href="classFmiApplicationLayer.html#a7ff20c5c22f6eb7a4b1f58931fdf80ed" title="String representing the longitude in decimal degrees (and E or W) //!">mEtaLongitude</a>, -1, str, 14 );
<a name="l01276"></a>01276     str[13] = <span class="charliteral">&#39;\0&#39;</span>;
<a name="l01277"></a>01277     <a class="code" href="classCFmiPcAppDlg.html#a1eaea478a5679fff60dd81d6ab593a10" title="Contents of the ETA Longitude text box (longitude of destination) //!">mEtaLongitude</a>.Format( _T(<span class="stringliteral">&quot; %s&quot;</span>), str );
<a name="l01278"></a>01278     MultiByteToWideChar( <a class="code" href="classCFmiPcAppDlg.html#aead4f57d93a41526b3614d153752ae44" title="The FmiApplicationLayer object used to communicate with the client.">mCom</a>.<a class="code" href="classFmiApplicationLayer.html#aa8bda2692621f9603e6a2b927a944e56" title="Code page used for encoding of text fields when communicating //! with the client.">mClientCodepage</a>, 0, <a class="code" href="classCFmiPcAppDlg.html#aead4f57d93a41526b3614d153752ae44" title="The FmiApplicationLayer object used to communicate with the client.">mCom</a>.<a class="code" href="classFmiApplicationLayer.html#a4cb1ed13458135b8e987e7e10ed28fd5" title="Null-terminated ASCII string containing the distance to the //! current destination, including units //.">mEtaDistance</a>, -1, str, 14 );
<a name="l01279"></a>01279     str[13] = <span class="charliteral">&#39;\0&#39;</span>;
<a name="l01280"></a>01280     <a class="code" href="classCFmiPcAppDlg.html#a03551d989596bd9e815ac80e4a7b2888" title="Contents of the ETA Distance text box (distance to destination) //!">mEtaDistance</a>.Format( _T(<span class="stringliteral">&quot; %s&quot;</span>), str );
<a name="l01281"></a>01281     UpdateData( FALSE );
<a name="l01282"></a>01282     <span class="keywordflow">return</span> 0;
<a name="l01283"></a>01283 }
<a name="l01284"></a>01284 
<a name="l01285"></a>01285 <span class="comment">//----------------------------------------------------------------------</span>
<a name="l01289"></a>01289 <span class="comment"></span><span class="comment">//----------------------------------------------------------------------</span>
<a name="l01290"></a><a class="code" href="classCFmiPcAppDlg.html#a117cfe6050d09286d852dd8eb6ca7ac8">01290</a> afx_msg LRESULT <a class="code" href="classCFmiPcAppDlg.html#a117cfe6050d09286d852dd8eb6ca7ac8" title="Handler for the Stop Done event from Com. //!">CFmiPcAppDlg::OnEventStopDone</a>( WPARAM, LPARAM )
<a name="l01291"></a>01291 {
<a name="l01292"></a>01292     <span class="keywordflow">if</span>( !<a class="code" href="classCFmiPcAppDlg.html#aead4f57d93a41526b3614d153752ae44" title="The FmiApplicationLayer object used to communicate with the client.">mCom</a>.<a class="code" href="classFmiApplicationLayer.html#a23b6d7b4cb80f819ad13d2bee584da69" title="If TRUE, the client has a stop active. //!">mActiveRoute</a> )
<a name="l01293"></a>01293     {
<a name="l01294"></a>01294         UpdateData( <a class="code" href="garmin__types_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a> );
<a name="l01295"></a>01295         <a class="code" href="classCFmiPcAppDlg.html#a94a92186049f15dd61dbd4f072c27beb" title="Contents of the ETA Time text box (arrival time at destination) //!">mEtaTime</a>.Format( _T(<span class="stringliteral">&quot;&quot;</span>) );
<a name="l01296"></a>01296         <a class="code" href="classCFmiPcAppDlg.html#abdc93d9e30e064b75763233b4cde7c7d" title="Contents of the ETA Latitude text box (latitude of destination) //!">mEtaLatitude</a>.Format( _T(<span class="stringliteral">&quot;&quot;</span>) );
<a name="l01297"></a>01297         <a class="code" href="classCFmiPcAppDlg.html#a1eaea478a5679fff60dd81d6ab593a10" title="Contents of the ETA Longitude text box (longitude of destination) //!">mEtaLongitude</a>.Format( _T(<span class="stringliteral">&quot;&quot;</span>) );
<a name="l01298"></a>01298         <a class="code" href="classCFmiPcAppDlg.html#a03551d989596bd9e815ac80e4a7b2888" title="Contents of the ETA Distance text box (distance to destination) //!">mEtaDistance</a>.Format( _T(<span class="stringliteral">&quot;&quot;</span>) );
<a name="l01299"></a>01299         UpdateData( FALSE );
<a name="l01300"></a>01300     }
<a name="l01301"></a>01301     <span class="keywordflow">return</span> 0;
<a name="l01302"></a>01302 }
<a name="l01303"></a>01303 
<a name="l01304"></a>01304 <span class="comment">//----------------------------------------------------------------------</span>
<a name="l01310"></a>01310 <span class="comment"></span><span class="comment">//----------------------------------------------------------------------</span>
<a name="l01311"></a>01311 afx_msg LRESULT <a class="code" href="classCFmiPcAppDlg.html#a3c950569ebfb595a32e216d6bd1f9115" title="Handler for the Text Message Received event from Com. //!">CFmiPcAppDlg::OnEventTxtMsgFromClient</a>
<a name="l01312"></a><a class="code" href="classCFmiPcAppDlg.html#a3c950569ebfb595a32e216d6bd1f9115">01312</a>     (
<a name="l01313"></a>01313     WPARAM,
<a name="l01314"></a>01314     LPARAM aEventDataPtr
<a name="l01315"></a>01315     )
<a name="l01316"></a>01316 {
<a name="l01317"></a>01317     <a class="code" href="structtext__msg__from__client__event__type.html" title="Structure containing details for a client to server text message.">text_msg_from_client_event_type</a> * messageEvent = (<a class="code" href="structtext__msg__from__client__event__type.html" title="Structure containing details for a client to server text message.">text_msg_from_client_event_type</a> *)aEventDataPtr;
<a name="l01318"></a>01318 
<a name="l01319"></a>01319     <a class="code" href="classCTxtMsgFromClient.html" title="Modal pop up dialog displaying a client to server open text //! message. //!">CTxtMsgFromClient</a> dlg( <span class="keyword">this</span>, mCom, messageEvent );
<a name="l01320"></a>01320 
<a name="l01321"></a>01321     dlg.DoModal();
<a name="l01322"></a>01322     <span class="keyword">delete</span> messageEvent;
<a name="l01323"></a>01323 
<a name="l01324"></a>01324     <span class="keywordflow">return</span> 0;
<a name="l01325"></a>01325 }
<a name="l01326"></a>01326 <span class="preprocessor">#endif</span>
<a name="l01327"></a>01327 <span class="preprocessor"></span>
<a name="l01328"></a>01328 <span class="preprocessor">#if( FMI_SUPPORT_A604 )</span>
<a name="l01329"></a>01329 <span class="preprocessor"></span><span class="comment">//----------------------------------------------------------------------</span>
<a name="l01335"></a>01335 <span class="comment"></span><span class="comment">//----------------------------------------------------------------------</span>
<a name="l01336"></a><a class="code" href="classCFmiPcAppDlg.html#a63c392208430d8c1cb20d0c031b28b23">01336</a> <span class="keywordtype">void</span> <a class="code" href="classCFmiPcAppDlg.html#a63c392208430d8c1cb20d0c031b28b23" title="Click handler for the Canned Responses button. //!">CFmiPcAppDlg::OnBnClickedCannedResponses</a>()
<a name="l01337"></a>01337 {
<a name="l01338"></a>01338     <span class="keyword">delete</span> <a class="code" href="classCFmiPcAppDlg.html#a3bbd3a1621fdc2f8bf0957a0c61b9505" title="Pointer to the Canned Response dialog, or NULL if no such dialog //! is displayed //!...">mCannedResponseDlg</a>;
<a name="l01339"></a>01339     <a class="code" href="classCFmiPcAppDlg.html#a3bbd3a1621fdc2f8bf0957a0c61b9505" title="Pointer to the Canned Response dialog, or NULL if no such dialog //! is displayed //!...">mCannedResponseDlg</a> = <span class="keyword">new</span> <a class="code" href="classCManageCannedResponseDlg.html" title="Dialog allowing the user to manage canned responses. //!">CManageCannedResponseDlg</a>( <span class="keyword">this</span>, <a class="code" href="classCFmiPcAppDlg.html#aead4f57d93a41526b3614d153752ae44" title="The FmiApplicationLayer object used to communicate with the client.">mCom</a> );
<a name="l01340"></a>01340     <a class="code" href="classCFmiPcAppDlg.html#a3bbd3a1621fdc2f8bf0957a0c61b9505" title="Pointer to the Canned Response dialog, or NULL if no such dialog //! is displayed //!...">mCannedResponseDlg</a>-&gt;Create( <a class="code" href="resource_8h.html#a34b71ac35c30a953124c54a423a574d8">IDD_CANNED_RESPONSE</a> );
<a name="l01341"></a>01341     <a class="code" href="classCFmiPcAppDlg.html#a3bbd3a1621fdc2f8bf0957a0c61b9505" title="Pointer to the Canned Response dialog, or NULL if no such dialog //! is displayed //!...">mCannedResponseDlg</a>-&gt;ShowWindow( SW_SHOW );
<a name="l01342"></a>01342 
<a name="l01343"></a>01343     GetDlgItem( IDC_MAIN_BTN_CANNED_RESPONSES )-&gt;EnableWindow( FALSE );
<a name="l01344"></a>01344 }
<a name="l01345"></a>01345 
<a name="l01346"></a>01346 <span class="comment">//----------------------------------------------------------------------</span>
<a name="l01351"></a>01351 <span class="comment"></span><span class="comment">//----------------------------------------------------------------------</span>
<a name="l01352"></a><a class="code" href="classCFmiPcAppDlg.html#a3dc3611b04376137c8a57ba22411ccca">01352</a> <span class="keywordtype">void</span> <a class="code" href="classCFmiPcAppDlg.html#a3dc3611b04376137c8a57ba22411ccca" title="Click handler for the GPI Transfer File button //!">CFmiPcAppDlg::OnBnClickedGpiFileTrans</a>()
<a name="l01353"></a>01353 {
<a name="l01354"></a>01354     <a class="code" href="classCGpiTransferDlg.html" title="Modal dialog allowing the user to select a GPI file to //! transfer to the client. //!">CGpiTransferDlg</a> dlg( <span class="keyword">this</span>, <a class="code" href="classCFmiPcAppDlg.html#aead4f57d93a41526b3614d153752ae44" title="The FmiApplicationLayer object used to communicate with the client.">mCom</a> );
<a name="l01355"></a>01355     dlg.DoModal();
<a name="l01356"></a>01356 }
<a name="l01357"></a>01357 
<a name="l01358"></a>01358 <span class="comment">//----------------------------------------------------------------------</span>
<a name="l01363"></a>01363 <span class="comment"></span><span class="comment">//----------------------------------------------------------------------</span>
<a name="l01364"></a><a class="code" href="classCFmiPcAppDlg.html#ac15ecc926acab443b779ce745037cbab">01364</a> <span class="keywordtype">void</span> <a class="code" href="classCFmiPcAppDlg.html#ac15ecc926acab443b779ce745037cbab" title="Click handler for the GPI Query button //!">CFmiPcAppDlg::OnBnClickedGpiQuery</a>()
<a name="l01365"></a>01365 {
<a name="l01366"></a>01366     <a class="code" href="classCGpiQueryDlg.html" title="Modal dialog allowing the user to query the file version and //! size of the FMI GPI file on the clie...">CGpiQueryDlg</a> dlg( <span class="keyword">this</span>, <a class="code" href="classCFmiPcAppDlg.html#aead4f57d93a41526b3614d153752ae44" title="The FmiApplicationLayer object used to communicate with the client.">mCom</a> );
<a name="l01367"></a>01367     dlg.DoModal();
<a name="l01368"></a>01368 }
<a name="l01369"></a>01369 
<a name="l01370"></a>01370 <span class="comment">//----------------------------------------------------------------------</span>
<a name="l01376"></a>01376 <span class="comment"></span><span class="comment">//----------------------------------------------------------------------</span>
<a name="l01377"></a><a class="code" href="classCFmiPcAppDlg.html#ad8a5dea9a208767d5fe83cec906b4b8c">01377</a> <span class="keywordtype">void</span> <a class="code" href="classCFmiPcAppDlg.html#ad8a5dea9a208767d5fe83cec906b4b8c" title="Click handler for the Driver ID and Status button. /.">CFmiPcAppDlg::OnBnClickedIdStatus</a>()
<a name="l01378"></a>01378 {
<a name="l01379"></a>01379     <span class="keyword">delete</span> <a class="code" href="classCFmiPcAppDlg.html#a2d806a631fe69eae982ae915bad250ed" title="Pointer to the Driver ID and Status dialog, or NULL if no such dialog //! is displayed //!...">mDriverIdAndStatusDlg</a>;
<a name="l01380"></a>01380 
<a name="l01381"></a>01381     <a class="code" href="classCFmiPcAppDlg.html#a2d806a631fe69eae982ae915bad250ed" title="Pointer to the Driver ID and Status dialog, or NULL if no such dialog //! is displayed //!...">mDriverIdAndStatusDlg</a> = <span class="keyword">new</span> <a class="code" href="classCDriverIdAndStatusDlg.html" title="Modeless dialog allowing the user to query and update //! Driver ID and Status on the client...">CDriverIdAndStatusDlg</a>( <span class="keyword">this</span>, <a class="code" href="classCFmiPcAppDlg.html#aead4f57d93a41526b3614d153752ae44" title="The FmiApplicationLayer object used to communicate with the client.">mCom</a> );
<a name="l01382"></a>01382     <a class="code" href="classCFmiPcAppDlg.html#a2d806a631fe69eae982ae915bad250ed" title="Pointer to the Driver ID and Status dialog, or NULL if no such dialog //! is displayed //!...">mDriverIdAndStatusDlg</a>-&gt;Create( <a class="code" href="resource_8h.html#a50fd84983d5ce4becb8307dd9048aa10">IDD_DRIVER_ID_STATUS</a> );
<a name="l01383"></a>01383     <a class="code" href="classCFmiPcAppDlg.html#a2d806a631fe69eae982ae915bad250ed" title="Pointer to the Driver ID and Status dialog, or NULL if no such dialog //! is displayed //!...">mDriverIdAndStatusDlg</a>-&gt;ShowWindow( SW_SHOW );
<a name="l01384"></a>01384 
<a name="l01385"></a>01385     GetDlgItem( IDC_MAIN_BTN_DRIVER_INFO )-&gt;EnableWindow( FALSE );
<a name="l01386"></a>01386 }
<a name="l01387"></a>01387 
<a name="l01388"></a>01388 <span class="comment">//----------------------------------------------------------------------</span>
<a name="l01394"></a>01394 <span class="comment"></span><span class="comment">//----------------------------------------------------------------------</span>
<a name="l01395"></a><a class="code" href="classCFmiPcAppDlg.html#a1a7bae946572e6615a8367e8b9ca8935">01395</a> <span class="keywordtype">void</span> <a class="code" href="classCFmiPcAppDlg.html#a1a7bae946572e6615a8367e8b9ca8935" title="Click handler for the Canned Messages button. //!">CFmiPcAppDlg::OnBnClickedManageCannedMsg</a>()
<a name="l01396"></a>01396 {
<a name="l01397"></a>01397     <span class="keyword">delete</span> <a class="code" href="classCFmiPcAppDlg.html#a3a1cc35a4f59d87f299ab5d8e2dd3142" title="Pointer to the Canned Text Message dialog, or NULL if no such dialog //! is displayed //!...">mCannedTxtMsgDlg</a>;
<a name="l01398"></a>01398 
<a name="l01399"></a>01399     <a class="code" href="classCFmiPcAppDlg.html#a3a1cc35a4f59d87f299ab5d8e2dd3142" title="Pointer to the Canned Text Message dialog, or NULL if no such dialog //! is displayed //!...">mCannedTxtMsgDlg</a> = <span class="keyword">new</span> <a class="code" href="classCCannedTxtMsgDlg.html" title="Dialog allowing the user to manage the list of canned //! messages on the client. //!...">CCannedTxtMsgDlg</a>( <span class="keyword">this</span>, <a class="code" href="classCFmiPcAppDlg.html#aead4f57d93a41526b3614d153752ae44" title="The FmiApplicationLayer object used to communicate with the client.">mCom</a> );
<a name="l01400"></a>01400     <a class="code" href="classCFmiPcAppDlg.html#a3a1cc35a4f59d87f299ab5d8e2dd3142" title="Pointer to the Canned Text Message dialog, or NULL if no such dialog //! is displayed //!...">mCannedTxtMsgDlg</a>-&gt;Create( <a class="code" href="resource_8h.html#a1adee18d6e12cd35666827bf3c52309d">IDD_CANNED_TXT_MSG</a> );
<a name="l01401"></a>01401     <a class="code" href="classCFmiPcAppDlg.html#a3a1cc35a4f59d87f299ab5d8e2dd3142" title="Pointer to the Canned Text Message dialog, or NULL if no such dialog //! is displayed //!...">mCannedTxtMsgDlg</a>-&gt;ShowWindow( SW_SHOW );
<a name="l01402"></a>01402 
<a name="l01403"></a>01403     GetDlgItem( IDC_MAIN_BTN_CANNED_MESSAGES )-&gt;EnableWindow( FALSE );
<a name="l01404"></a>01404 }
<a name="l01405"></a>01405 
<a name="l01406"></a>01406 <span class="comment">//----------------------------------------------------------------------</span>
<a name="l01411"></a>01411 <span class="comment"></span><span class="comment">//----------------------------------------------------------------------</span>
<a name="l01412"></a><a class="code" href="classCFmiPcAppDlg.html#a434a2a48fa710fc11112564d4e5daee6">01412</a> <span class="keywordtype">void</span> <a class="code" href="classCFmiPcAppDlg.html#a434a2a48fa710fc11112564d4e5daee6" title="Click handler for the Message Status button //!">CFmiPcAppDlg::OnBnClickedMsgStatus</a>()
<a name="l01413"></a>01413 {
<a name="l01414"></a>01414     <a class="code" href="classCTxtMsgStatusRequestDlg.html" title="Modal dialog allowing the user to request the status of a //! server to client text message...">CTxtMsgStatusRequestDlg</a> dlg( <span class="keyword">this</span>, <a class="code" href="classCFmiPcAppDlg.html#aead4f57d93a41526b3614d153752ae44" title="The FmiApplicationLayer object used to communicate with the client.">mCom</a> );
<a name="l01415"></a>01415     dlg.DoModal();
<a name="l01416"></a>01416 }
<a name="l01417"></a>01417 
<a name="l01418"></a>01418 <span class="comment">//----------------------------------------------------------------------</span>
<a name="l01424"></a>01424 <span class="comment"></span><span class="comment">//----------------------------------------------------------------------</span>
<a name="l01425"></a><a class="code" href="classCFmiPcAppDlg.html#a140feb64ecf7bf0807f7c15ec7c985e4">01425</a> <span class="keywordtype">void</span> <a class="code" href="classCFmiPcAppDlg.html#a140feb64ecf7bf0807f7c15ec7c985e4" title="Click handler for the Message Throttling button //!">CFmiPcAppDlg::OnBnClickedMsgThrottling</a>()
<a name="l01426"></a>01426 {
<a name="l01427"></a>01427     <a class="code" href="classCMsgThrottlingDlg.html" title="Modal dialog allowing the user to throttle (disable) or //! un-throttle (enable) certain client-initi...">CMsgThrottlingDlg</a> dlg( <span class="keyword">this</span>, <a class="code" href="classCFmiPcAppDlg.html#aead4f57d93a41526b3614d153752ae44" title="The FmiApplicationLayer object used to communicate with the client.">mCom</a> );
<a name="l01428"></a>01428     dlg.DoModal();
<a name="l01429"></a>01429 }
<a name="l01430"></a>01430 
<a name="l01431"></a>01431 <span class="comment">//----------------------------------------------------------------------</span>
<a name="l01436"></a>01436 <span class="comment"></span><span class="comment">//----------------------------------------------------------------------</span>
<a name="l01437"></a><a class="code" href="classCFmiPcAppDlg.html#aa21443ed12616cba2c6492761a4809e6">01437</a> <span class="keywordtype">void</span> <a class="code" href="classCFmiPcAppDlg.html#aa21443ed12616cba2c6492761a4809e6" title="Click handler for the Ping button //!">CFmiPcAppDlg::OnBnClickedPing</a>()
<a name="l01438"></a>01438 {
<a name="l01439"></a>01439     <a class="code" href="classCPingStatusDlg.html" title="Modeless dialog allowing the user to view ping status and //! send a ping //!">CPingStatusDlg</a> dlg( <span class="keyword">this</span>, <a class="code" href="classCFmiPcAppDlg.html#aead4f57d93a41526b3614d153752ae44" title="The FmiApplicationLayer object used to communicate with the client.">mCom</a> );
<a name="l01440"></a>01440     dlg.DoModal();
<a name="l01441"></a>01441 }
<a name="l01442"></a>01442 
<a name="l01443"></a>01443 <span class="comment">//----------------------------------------------------------------------</span>
<a name="l01448"></a>01448 <span class="comment"></span><span class="comment">//----------------------------------------------------------------------</span>
<a name="l01449"></a><a class="code" href="classCFmiPcAppDlg.html#a633b58712358465e5ddb1873a8301e3b">01449</a> <span class="keywordtype">void</span> <a class="code" href="classCFmiPcAppDlg.html#a633b58712358465e5ddb1873a8301e3b" title="Click handler for the Change UI Text button //!">CFmiPcAppDlg::OnBnClickedUiTxtChg</a>()
<a name="l01450"></a>01450 {
<a name="l01451"></a>01451     <a class="code" href="classCUITextChangeDlg.html" title="Dialog allowing the user to change certain UI text elements //! on the client //!">CUITextChangeDlg</a> dlg( <span class="keyword">this</span>, <a class="code" href="classCFmiPcAppDlg.html#aead4f57d93a41526b3614d153752ae44" title="The FmiApplicationLayer object used to communicate with the client.">mCom</a> );
<a name="l01452"></a>01452     dlg.DoModal();
<a name="l01453"></a>01453 }
<a name="l01454"></a>01454 
<a name="l01455"></a>01455 <span class="comment">//----------------------------------------------------------------------</span>
<a name="l01460"></a>01460 <span class="comment"></span><span class="comment">//----------------------------------------------------------------------</span>
<a name="l01461"></a><a class="code" href="classCFmiPcAppDlg.html#ab32e3e273b4f2ced31a0b2b0578328e6">01461</a> afx_msg LRESULT <a class="code" href="classCFmiPcAppDlg.html#ab32e3e273b4f2ced31a0b2b0578328e6" title="Handler for Canned Text Message Dialog Closed event.">CFmiPcAppDlg::OnEventCannedMessageDlgClosed</a>( WPARAM, LPARAM )
<a name="l01462"></a>01462 {
<a name="l01463"></a>01463     GetDlgItem( IDC_MAIN_BTN_CANNED_MESSAGES )-&gt;EnableWindow( <a class="code" href="garmin__types_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a> );
<a name="l01464"></a>01464     <span class="keyword">delete</span> <a class="code" href="classCFmiPcAppDlg.html#a3a1cc35a4f59d87f299ab5d8e2dd3142" title="Pointer to the Canned Text Message dialog, or NULL if no such dialog //! is displayed //!...">mCannedTxtMsgDlg</a>;
<a name="l01465"></a>01465     <a class="code" href="classCFmiPcAppDlg.html#a3a1cc35a4f59d87f299ab5d8e2dd3142" title="Pointer to the Canned Text Message dialog, or NULL if no such dialog //! is displayed //!...">mCannedTxtMsgDlg</a> = NULL;
<a name="l01466"></a>01466 
<a name="l01467"></a>01467     <span class="keywordflow">return</span> 0;
<a name="l01468"></a>01468 }
<a name="l01469"></a>01469 
<a name="l01470"></a>01470 <span class="comment">//----------------------------------------------------------------------</span>
<a name="l01476"></a>01476 <span class="comment"></span><span class="comment">//----------------------------------------------------------------------</span>
<a name="l01477"></a>01477 afx_msg LRESULT <a class="code" href="classCFmiPcAppDlg.html#ac50e918582dae006c3324a6eceff099b" title="Handler for the Canned Response List Rcpt Error event. //!">CFmiPcAppDlg::OnEventCannedRespListReceiptError</a>
<a name="l01478"></a><a class="code" href="classCFmiPcAppDlg.html#ac50e918582dae006c3324a6eceff099b">01478</a>     (
<a name="l01479"></a>01479     WPARAM aResultCode,
<a name="l01480"></a>01480     LPARAM
<a name="l01481"></a>01481     )
<a name="l01482"></a>01482 {
<a name="l01483"></a>01483     <span class="keywordflow">if</span>( aResultCode == <a class="code" href="fmi_8h.html#ac9d78f1622953513d773b52b76c4581ca3d950e89271cd4fee7e40536d0b6b567">CANNED_RESP_LIST_INVALID_COUNT</a> )
<a name="l01484"></a>01484     {
<a name="l01485"></a>01485         AfxGetMainWnd()-&gt;MessageBox
<a name="l01486"></a>01486             (
<a name="l01487"></a>01487             _T(<span class="stringliteral">&quot;Invalid Response Count! Retry with a Canned Response List packet with 1-50 Response IDs.&quot;</span>),
<a name="l01488"></a>01488             _T(<span class="stringliteral">&quot;Canned Response Text Message Failure&quot;</span>)
<a name="l01489"></a>01489             );
<a name="l01490"></a>01490     }
<a name="l01491"></a>01491     <span class="keywordflow">else</span> <span class="keywordflow">if</span>( aResultCode == <a class="code" href="fmi_8h.html#ac9d78f1622953513d773b52b76c4581ca0f5db5444ad74aa1c4b58fa516052903">CANNED_RESP_LIST_INVALID_MSG_ID</a> )
<a name="l01492"></a>01492     {
<a name="l01493"></a>01493         AfxGetMainWnd()-&gt;MessageBox
<a name="l01494"></a>01494             (
<a name="l01495"></a>01495             _T(<span class="stringliteral">&quot;Invalid Response ID! Retry after ensuring all canned responses are on the client.&quot;</span>),
<a name="l01496"></a>01496             _T(<span class="stringliteral">&quot;Canned Response Text Message Failure&quot;</span>)
<a name="l01497"></a>01497             );
<a name="l01498"></a>01498     }
<a name="l01499"></a>01499     <span class="keywordflow">else</span> <span class="keywordflow">if</span>( aResultCode == <a class="code" href="fmi_8h.html#ac9d78f1622953513d773b52b76c4581ca4e05fdc2474c7f1727995a5f1cc24f90">CANNED_RESP_LIST_DUPLICATE_MSG_ID</a> )
<a name="l01500"></a>01500     {
<a name="l01501"></a>01501         AfxGetMainWnd()-&gt;MessageBox
<a name="l01502"></a>01502             (
<a name="l01503"></a>01503             _T(<span class="stringliteral">&quot;Duplicate Message ID! Retry using a message ID that is not on the client.&quot;</span>),
<a name="l01504"></a>01504             _T(<span class="stringliteral">&quot;Canned Response Text Message Failure&quot;</span>)
<a name="l01505"></a>01505             );
<a name="l01506"></a>01506     }
<a name="l01507"></a>01507     <span class="keywordflow">else</span> <span class="keywordflow">if</span>( aResultCode == <a class="code" href="fmi_8h.html#ac9d78f1622953513d773b52b76c4581cadd2238a73eb4ef0ea01bc22658c90105">CANNED_RESP_LIST_FULL</a> )
<a name="l01508"></a>01508     {
<a name="l01509"></a>01509         AfxGetMainWnd()-&gt;MessageBox
<a name="l01510"></a>01510             (
<a name="l01511"></a>01511             _T(<span class="stringliteral">&quot;Canned Response List Database Full! Retry after receiving an acknowledgment for a previous message.&quot;</span>),
<a name="l01512"></a>01512             _T(<span class="stringliteral">&quot;Canned Response Text Message Failure&quot;</span>)
<a name="l01513"></a>01513             );
<a name="l01514"></a>01514     }
<a name="l01515"></a>01515     <span class="keywordflow">else</span>
<a name="l01516"></a>01516     {
<a name="l01517"></a>01517         AfxGetMainWnd()-&gt;MessageBox
<a name="l01518"></a>01518             (
<a name="l01519"></a>01519             _T(<span class="stringliteral">&quot;Unknown error.  Please retry.&quot;</span>),
<a name="l01520"></a>01520             _T(<span class="stringliteral">&quot;Canned Response Text Message Failure&quot;</span>)
<a name="l01521"></a>01521             );
<a name="l01522"></a>01522     }
<a name="l01523"></a>01523 
<a name="l01524"></a>01524     <span class="keywordflow">return</span> 0;
<a name="l01525"></a>01525 }
<a name="l01526"></a>01526 
<a name="l01527"></a>01527 <span class="comment">//----------------------------------------------------------------------</span>
<a name="l01532"></a>01532 <span class="comment"></span><span class="comment">//----------------------------------------------------------------------</span>
<a name="l01533"></a><a class="code" href="classCFmiPcAppDlg.html#a693b911bd1a5f5b22fb551dc41f4a51d">01533</a> afx_msg LRESULT <a class="code" href="classCFmiPcAppDlg.html#a693b911bd1a5f5b22fb551dc41f4a51d" title="Handler for Canned Response Dialog Closed event //!">CFmiPcAppDlg::OnEventCannedResponseDlgClosed</a>( WPARAM, LPARAM )
<a name="l01534"></a>01534 {
<a name="l01535"></a>01535     GetDlgItem( IDC_MAIN_BTN_CANNED_RESPONSES )-&gt;EnableWindow( <a class="code" href="garmin__types_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a> );
<a name="l01536"></a>01536     <span class="keyword">delete</span> <a class="code" href="classCFmiPcAppDlg.html#a3bbd3a1621fdc2f8bf0957a0c61b9505" title="Pointer to the Canned Response dialog, or NULL if no such dialog //! is displayed //!...">mCannedResponseDlg</a>;
<a name="l01537"></a>01537     <a class="code" href="classCFmiPcAppDlg.html#a3bbd3a1621fdc2f8bf0957a0c61b9505" title="Pointer to the Canned Response dialog, or NULL if no such dialog //! is displayed //!...">mCannedResponseDlg</a> = NULL;
<a name="l01538"></a>01538 
<a name="l01539"></a>01539     <span class="keywordflow">return</span> 0;
<a name="l01540"></a>01540 }
<a name="l01541"></a>01541 
<a name="l01542"></a>01542 <span class="comment">//----------------------------------------------------------------------</span>
<a name="l01547"></a>01547 <span class="comment"></span><span class="comment">//----------------------------------------------------------------------</span>
<a name="l01548"></a><a class="code" href="classCFmiPcAppDlg.html#ac97729c753a78566733982240d4b2d5b">01548</a> afx_msg LRESULT <a class="code" href="classCFmiPcAppDlg.html#ac97729c753a78566733982240d4b2d5b" title="Handler for Driver ID and Status Dialog Closed event //!">CFmiPcAppDlg::OnEventDriverIdAndStatusDlgClosed</a>( WPARAM, LPARAM )
<a name="l01549"></a>01549 {
<a name="l01550"></a>01550     GetDlgItem( IDC_MAIN_BTN_DRIVER_INFO )-&gt;EnableWindow( <a class="code" href="garmin__types_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a> );
<a name="l01551"></a>01551     <span class="keyword">delete</span> <a class="code" href="classCFmiPcAppDlg.html#a2d806a631fe69eae982ae915bad250ed" title="Pointer to the Driver ID and Status dialog, or NULL if no such dialog //! is displayed //!...">mDriverIdAndStatusDlg</a>;
<a name="l01552"></a>01552     <a class="code" href="classCFmiPcAppDlg.html#a2d806a631fe69eae982ae915bad250ed" title="Pointer to the Driver ID and Status dialog, or NULL if no such dialog //! is displayed //!...">mDriverIdAndStatusDlg</a> = NULL;
<a name="l01553"></a>01553 
<a name="l01554"></a>01554     <span class="keywordflow">return</span> 0;
<a name="l01555"></a>01555 }
<a name="l01556"></a>01556 
<a name="l01557"></a>01557 <span class="comment">//----------------------------------------------------------------------</span>
<a name="l01562"></a>01562 <span class="comment"></span><span class="comment">//----------------------------------------------------------------------</span>
<a name="l01563"></a><a class="code" href="classCFmiPcAppDlg.html#ab90f6ba0802d47b453a984d7776e9a57">01563</a> afx_msg LRESULT <a class="code" href="classCFmiPcAppDlg.html#ab90f6ba0802d47b453a984d7776e9a57" title="Handler for the Delete Driver Status Failed event from Com. //!">CFmiPcAppDlg::OnEventDriverStatusListDeleteFailed</a>( WPARAM, LPARAM )
<a name="l01564"></a>01564 {
<a name="l01565"></a>01565     AfxGetMainWnd()-&gt;MessageBox
<a name="l01566"></a>01566         (
<a name="l01567"></a>01567         _T(<span class="stringliteral">&quot;Unable to delete driver status item.&quot;</span>),
<a name="l01568"></a>01568         _T(<span class="stringliteral">&quot;Delete Driver Status Error&quot;</span>)
<a name="l01569"></a>01569         );
<a name="l01570"></a>01570     <span class="keywordflow">return</span> 0;
<a name="l01571"></a>01571 }
<a name="l01572"></a>01572 
<a name="l01573"></a>01573 <span class="comment">//----------------------------------------------------------------------</span>
<a name="l01580"></a>01580 <span class="comment"></span><span class="comment">//----------------------------------------------------------------------</span>
<a name="l01581"></a><a class="code" href="classCFmiPcAppDlg.html#a2627a83b46d153fdda65d7c295aa7cd3">01581</a> afx_msg LRESULT <a class="code" href="classCFmiPcAppDlg.html#a2627a83b46d153fdda65d7c295aa7cd3" title="Set FMI as disabled //!">CFmiPcAppDlg::OnEventFmiDisabled</a>( WPARAM, LPARAM )
<a name="l01582"></a>01582 {
<a name="l01583"></a>01583     OnOK();
<a name="l01584"></a>01584 
<a name="l01585"></a>01585     <span class="keywordflow">return</span> 0;
<a name="l01586"></a>01586 }
<a name="l01587"></a>01587 
<a name="l01588"></a>01588 <span class="comment">//----------------------------------------------------------------------</span>
<a name="l01593"></a>01593 <span class="comment"></span><span class="comment">//----------------------------------------------------------------------</span>
<a name="l01594"></a><a class="code" href="classCFmiPcAppDlg.html#ac2818833f14b8a2fd650600114083c88">01594</a> afx_msg LRESULT <a class="code" href="classCFmiPcAppDlg.html#ac2818833f14b8a2fd650600114083c88" title="Handler for the Message Throttle Failed event from Com. //!">CFmiPcAppDlg::OnEventMsgThrottleFailed</a>( WPARAM, LPARAM )
<a name="l01595"></a>01595 {
<a name="l01596"></a>01596     AfxGetMainWnd()-&gt;MessageBox
<a name="l01597"></a>01597         (
<a name="l01598"></a>01598         _T(<span class="stringliteral">&quot;Invalid protocol ID or state.&quot;</span>),
<a name="l01599"></a>01599         _T(<span class="stringliteral">&quot;Message Throttling Error&quot;</span>)
<a name="l01600"></a>01600         );
<a name="l01601"></a>01601     <span class="keywordflow">return</span> 0;
<a name="l01602"></a>01602 }
<a name="l01603"></a>01603 
<a name="l01604"></a>01604 <span class="comment">//----------------------------------------------------------------------</span>
<a name="l01611"></a>01611 <span class="comment"></span><span class="comment">//----------------------------------------------------------------------</span>
<a name="l01612"></a>01612 afx_msg LRESULT <a class="code" href="classCFmiPcAppDlg.html#acc4c7cea5c574a715fd98f771d3e5ce3" title="Handler for the Server to Client Text Message Error event //! from Com. //!">CFmiPcAppDlg::OnEventOpenTextMsgError</a>
<a name="l01613"></a><a class="code" href="classCFmiPcAppDlg.html#acc4c7cea5c574a715fd98f771d3e5ce3">01613</a>     (
<a name="l01614"></a>01614     WPARAM,
<a name="l01615"></a>01615     LPARAM aEventDataPtr
<a name="l01616"></a>01616     )
<a name="l01617"></a>01617 {
<a name="l01618"></a>01618     CString errorString;
<a name="l01619"></a>01619 
<a name="l01620"></a>01620     <a class="code" href="classMessageId.html" title="Encapsulation of a message ID. //!">MessageId</a> * messageId = (<a class="code" href="classMessageId.html" title="Encapsulation of a message ID. //!">MessageId</a>*)aEventDataPtr;
<a name="l01621"></a>01621 
<a name="l01622"></a>01622     errorString.Format( _T(<span class="stringliteral">&quot;Text Message with id %s already exists!&quot;</span>), messageId-&gt;<a class="code" href="classMessageId.html#ac768fa177e4a229aa3e9466cfdab1231" title="CString representation of the message ID //!">toCString</a>( mCom.mClientCodepage ) );
<a name="l01623"></a>01623     AfxGetMainWnd()-&gt;MessageBox( errorString, _T(<span class="stringliteral">&quot;Open Text Message Failure&quot;</span> ) );
<a name="l01624"></a>01624     <span class="keyword">delete</span> messageId;
<a name="l01625"></a>01625 
<a name="l01626"></a>01626     <span class="keywordflow">return</span> 0;
<a name="l01627"></a>01627 }
<a name="l01628"></a>01628 <span class="comment">//----------------------------------------------------------------------</span>
<a name="l01634"></a>01634 <span class="comment"></span><span class="comment">//----------------------------------------------------------------------</span>
<a name="l01635"></a>01635 afx_msg LRESULT <a class="code" href="classCFmiPcAppDlg.html#ae3b26c1c41ade55be1d13650050ff0fa" title="Handler for the Text Message Status Received event from Com. //!">CFmiPcAppDlg::OnEventTxtMsgStatus</a>
<a name="l01636"></a><a class="code" href="classCFmiPcAppDlg.html#ae3b26c1c41ade55be1d13650050ff0fa">01636</a>     (
<a name="l01637"></a>01637     WPARAM,
<a name="l01638"></a>01638     LPARAM aEventDataPtr
<a name="l01639"></a>01639     )
<a name="l01640"></a>01640 {
<a name="l01641"></a>01641     <a class="code" href="structtext__msg__status__event__type.html" title="Structure containing details for a text message status from the client.">text_msg_status_event_type</a>* statusEvent = (<a class="code" href="structtext__msg__status__event__type.html" title="Structure containing details for a text message status from the client.">text_msg_status_event_type</a>*)aEventDataPtr;
<a name="l01642"></a>01642     <span class="keywordflow">if</span>( mTxtMsgStatusDlg != NULL )
<a name="l01643"></a>01643     {
<a name="l01644"></a>01644         mTxtMsgStatusDlg-&gt;EndDialog( IDCANCEL );
<a name="l01645"></a>01645         mTxtMsgStatusDlg = NULL;
<a name="l01646"></a>01646     }
<a name="l01647"></a>01647     <a class="code" href="classCTxtMsgStatusDlg.html" title="Modal pop-up dialog displaying the status of a server to //! client text message. //!...">CTxtMsgStatusDlg</a> dlg( <span class="keyword">this</span>, mCom, statusEvent );    <span class="comment">//same as above</span>
<a name="l01648"></a>01648     mTxtMsgStatusDlg = &amp;dlg;  <span class="comment">//keep track of this dialog so if another comes along</span>
<a name="l01649"></a>01649     dlg.DoModal();            <span class="comment">//we can close this one</span>
<a name="l01650"></a>01650     mTxtMsgStatusDlg = NULL;
<a name="l01651"></a>01651 
<a name="l01652"></a>01652     <span class="keyword">delete</span> statusEvent;
<a name="l01653"></a>01653 
<a name="l01654"></a>01654     <span class="keywordflow">return</span> 0;
<a name="l01655"></a>01655 }
<a name="l01656"></a>01656 
<a name="l01657"></a>01657 <span class="comment">//----------------------------------------------------------------------</span>
<a name="l01662"></a>01662 <span class="comment"></span><span class="comment">//----------------------------------------------------------------------</span>
<a name="l01663"></a><a class="code" href="classCFmiPcAppDlg.html#acd877536231658f742e9ff16abfa10a9">01663</a> afx_msg LRESULT <a class="code" href="classCFmiPcAppDlg.html#acd877536231658f742e9ff16abfa10a9" title="Handler for the UI Text Change Failed event from Com. //!">CFmiPcAppDlg::OnEventUserInterfaceTextChangeFailed</a>( WPARAM, LPARAM )
<a name="l01664"></a>01664 {
<a name="l01665"></a>01665     AfxGetMainWnd()-&gt;MessageBox( _T(<span class="stringliteral">&quot;Updating UI Text Failed!&quot;</span>), _T(<span class="stringliteral">&quot;Error!&quot;</span>) );
<a name="l01666"></a>01666     <span class="keywordflow">return</span> 0;
<a name="l01667"></a>01667 }
<a name="l01668"></a>01668 <span class="preprocessor">#endif</span>
<a name="l01669"></a>01669 <span class="preprocessor"></span>
<a name="l01670"></a>01670 <span class="preprocessor">#if (FMI_SUPPORT_A606)</span>
<a name="l01671"></a>01671 <span class="preprocessor"></span><span class="comment">//---------------------------------------------------------------------</span>
<a name="l01676"></a>01676 <span class="comment"></span><span class="comment">//----------------------------------------------------------------------</span>
<a name="l01677"></a><a class="code" href="classCFmiPcAppDlg.html#ab58c56bc81ad45bc7b41ef286ae98c45">01677</a> <span class="keywordtype">void</span> <a class="code" href="classCFmiPcAppDlg.html#ab58c56bc81ad45bc7b41ef286ae98c45" title="Click handler for the FMI Safe Mode button //!">CFmiPcAppDlg::OnBnClickedSafeMode</a>()
<a name="l01678"></a>01678 {
<a name="l01679"></a>01679     <a class="code" href="classCSafeModeDlg.html" title="Modal dialog allowing the user to set FMI Safe Mode and the //! threshold speed. //!">CSafeModeDlg</a> dlg( <span class="keyword">this</span>, <a class="code" href="classCFmiPcAppDlg.html#aead4f57d93a41526b3614d153752ae44" title="The FmiApplicationLayer object used to communicate with the client.">mCom</a> );
<a name="l01680"></a>01680     dlg.DoModal();
<a name="l01681"></a>01681 }
<a name="l01682"></a>01682 
<a name="l01683"></a>01683 <span class="comment">//----------------------------------------------------------------------</span>
<a name="l01688"></a>01688 <span class="comment"></span><span class="comment">//----------------------------------------------------------------------</span>
<a name="l01689"></a><a class="code" href="classCFmiPcAppDlg.html#a5c42c4fd42aa171964252b5127fc6ac0">01689</a> afx_msg LRESULT <a class="code" href="classCFmiPcAppDlg.html#a5c42c4fd42aa171964252b5127fc6ac0" title="Handler for the FMI Safe Mode event from Com. //!">CFmiPcAppDlg::OnEventFmiSafeModeError</a>( WPARAM, LPARAM )
<a name="l01690"></a>01690 {
<a name="l01691"></a>01691     CString *errorString = <span class="keyword">new</span> CString( <span class="stringliteral">&quot;Error setting FMI Safe Mode!&quot;</span> );
<a name="l01692"></a>01692 
<a name="l01693"></a>01693     AfxGetMainWnd()-&gt;MessageBox( *errorString, _T( <span class="stringliteral">&quot;FMI Safe Mode Failure&quot;</span> ) );
<a name="l01694"></a>01694 
<a name="l01695"></a>01695     <span class="keywordflow">return</span> 0;
<a name="l01696"></a>01696 }
<a name="l01697"></a>01697 <span class="preprocessor">#endif</span>
<a name="l01698"></a>01698 <span class="preprocessor"></span>
<a name="l01699"></a>01699 <span class="preprocessor">#if( FMI_SUPPORT_A607 )</span>
<a name="l01700"></a>01700 <span class="preprocessor"></span><span class="comment">//----------------------------------------------------------------------</span>
<a name="l01705"></a>01705 <span class="comment"></span><span class="comment">//----------------------------------------------------------------------</span>
<a name="l01706"></a><a class="code" href="classCFmiPcAppDlg.html#a663231873a137804476ca6be34bc55cd">01706</a> <span class="keywordtype">void</span> <a class="code" href="classCFmiPcAppDlg.html#a663231873a137804476ca6be34bc55cd" title="Click handler for the Message Delete button //!">CFmiPcAppDlg::OnBnClickedMsgDelete</a>()
<a name="l01707"></a>01707 {
<a name="l01708"></a>01708     <a class="code" href="classCTxtMsgDeleteRequestDlg.html" title="Modal dialog allowing the user to request the status of a //! server to client text message...">CTxtMsgDeleteRequestDlg</a> dlg( <span class="keyword">this</span>, <a class="code" href="classCFmiPcAppDlg.html#aead4f57d93a41526b3614d153752ae44" title="The FmiApplicationLayer object used to communicate with the client.">mCom</a> );
<a name="l01709"></a>01709     dlg.DoModal();
<a name="l01710"></a>01710 }
<a name="l01711"></a>01711 
<a name="l01712"></a>01712 <span class="comment">//----------------------------------------------------------------------</span>
<a name="l01718"></a>01718 <span class="comment"></span><span class="comment">//----------------------------------------------------------------------</span>
<a name="l01719"></a>01719 afx_msg LRESULT <a class="code" href="classCFmiPcAppDlg.html#aa3ce267860ab90cb3a0b7852ce69ea55" title="Handler for the Delete Text Message Status event from Com. //!">CFmiPcAppDlg::OnEventDeleteTextMessageStatus</a>
<a name="l01720"></a><a class="code" href="classCFmiPcAppDlg.html#aa3ce267860ab90cb3a0b7852ce69ea55">01720</a>     (
<a name="l01721"></a>01721     WPARAM aEventData,
<a name="l01722"></a>01722     LPARAM
<a name="l01723"></a>01723     )
<a name="l01724"></a>01724 {
<a name="l01725"></a>01725     <span class="keywordtype">boolean</span> deleteSuccessful = (boolean)aEventData;
<a name="l01726"></a>01726 
<a name="l01727"></a>01727     <span class="keywordflow">if</span>( deleteSuccessful )
<a name="l01728"></a>01728     {
<a name="l01729"></a>01729         AfxGetMainWnd()-&gt;MessageBox( _T(<span class="stringliteral">&quot;Text Message Deleted&quot;</span>), _T(<span class="stringliteral">&quot;Error!&quot;</span>) );
<a name="l01730"></a>01730     }
<a name="l01731"></a>01731     <span class="keywordflow">else</span>
<a name="l01732"></a>01732     {
<a name="l01733"></a>01733         AfxGetMainWnd()-&gt;MessageBox( _T(<span class="stringliteral">&quot;Text Message Delete failed.  Check Message ID and try again&quot;</span>), _T(<span class="stringliteral">&quot;Error!&quot;</span>) );
<a name="l01734"></a>01734     }
<a name="l01735"></a>01735 
<a name="l01736"></a>01736     <span class="keywordflow">return</span> 0;
<a name="l01737"></a>01737 }
<a name="l01738"></a>01738 
<a name="l01739"></a>01739 <span class="preprocessor">#endif</span>
<a name="l01740"></a>01740 <span class="preprocessor"></span>
<a name="l01741"></a>01741 <span class="preprocessor">#if( FMI_SUPPORT_A608 )</span>
<a name="l01742"></a>01742 <span class="preprocessor"></span><span class="comment">//---------------------------------------------------------------------</span>
<a name="l01747"></a>01747 <span class="comment"></span><span class="comment">//----------------------------------------------------------------------</span>
<a name="l01748"></a><a class="code" href="classCFmiPcAppDlg.html#a0a967074285a33d3f518d3d1f1173d5a">01748</a> afx_msg <span class="keywordtype">void</span> <a class="code" href="classCFmiPcAppDlg.html#a0a967074285a33d3f518d3d1f1173d5a" title="Click handler for the FMI Speed Limit Alerts button.">CFmiPcAppDlg::OnBnClickedSpeedLimit</a>()
<a name="l01749"></a>01749 {
<a name="l01750"></a>01750     <a class="code" href="classCSpeedLimitAlertsDlg.html" title="Dialog allowing the user to change speed limit alerts settings //!">CSpeedLimitAlertsDlg</a> dlg( <span class="keyword">this</span>, <a class="code" href="classCFmiPcAppDlg.html#aead4f57d93a41526b3614d153752ae44" title="The FmiApplicationLayer object used to communicate with the client.">mCom</a> );
<a name="l01751"></a>01751     dlg.DoModal();
<a name="l01752"></a>01752 }
<a name="l01753"></a>01753 <span class="preprocessor">#endif</span>
<a name="l01754"></a>01754 <span class="preprocessor"></span>
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Thu May 5 2011 15:43:37 for Garmin Fleet Management Controller by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
